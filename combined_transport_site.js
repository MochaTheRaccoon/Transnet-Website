var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

var Base;!function(){var marker={},fnTest=/xyz/.test(function(){})?/\b_super\b/:/.*/;Base=function(){},Base.addMethod=function(name,func){var parent=this._super&&this._super.prototype;parent&&fnTest.test(func)?this.prototype[name]=function(){var tmp=this._super;this._super=parent[name];try{var ret=func.apply(this,arguments)}finally{this._super=tmp}return ret}:this.prototype[name]=func},Base.addMethods=function(props){for(var name in props)"function"==typeof props[name]?this.addMethod(name,props[name]):this.prototype[name]=props[name]},Base.subclassOf=function(parentkls){for(var kls=this;kls;){if(kls===parentkls)return!0;kls=kls._super}},Base.extend=function(props){var Kls=function(){if(arguments[0]!==marker){if(!(this instanceof Kls)){var ret=new Kls(marker);return ret.init&&ret.init.apply(ret,arguments),ret}this.init&&this.init.apply(this,arguments)}};return Kls.constructor=Kls,Kls.extend=Base.extend,Kls.addMethod=Base.addMethod,Kls.addMethods=Base.addMethods,Kls.subclassOf=Base.subclassOf,Kls._super=this,Kls.prototype=new this(marker),Kls.prototype.constructor=Kls,Kls.addMethods(props),Kls}}(),function($){var tokens={UNICODE:/\\[0-9a-f]{1,6}(?:\r\n|[ \n\r\t\f])?/,ESCAPE:/(?:UNICODE)|\\[^\n\r\f0-9a-f]/,NONASCII:/[^\x00-\x7F]/,NMSTART:/[_a-z]|(?:NONASCII)|(?:ESCAPE)/,NMCHAR:/[_a-z0-9-]|(?:NONASCII)|(?:ESCAPE)/,IDENT:/-?(?:NMSTART)(?:NMCHAR)*/,NL:/\n|\r\n|\r|\f/,STRING:/(?:STRING1)|(?:STRING2)|(?:STRINGBARE)/,STRING1:/"(?:(?:ESCAPE)|\\(?:NL)|[^\n\r\f\"])*"/,STRING2:/'(?:(?:ESCAPE)|\\(?:NL)|[^\n\r\f\'])*'/,STRINGBARE:/(?:(?:ESCAPE)|\\(?:NL)|[^\n\r\f\]])*/,FUNCTION:/(?:IDENT)\(\)/,INTEGER:/[0-9]+/,WITHN:/([-+])?(INTEGER)?(n)\s*(?:([-+])\s*(INTEGER))?/,WITHOUTN:/([-+])?(INTEGER)/},rx={not:/:not\(/,not_end:/\)/,tag:/((?:IDENT)|\*)/,id:/#(IDENT)/,cls:/\.(IDENT)/,attr:/\[\s*(IDENT)\s*(?:([^=]?=)\s*(STRING)\s*)?\]/,pseudo_el:/(?::(first-line|first-letter|before|after))|(?:::((?:FUNCTION)|(?:IDENT)))/,pseudo_cls_nth:/:nth-child\(\s*(?:(?:WITHN)|(?:WITHOUTN)|(odd|even))\s*\)/,pseudo_cls:/:(IDENT)/,comb:/\s*(\+|~|>)\s*|\s+/,comma:/\s*,\s*/,important:/\s+!important\s*$/},token=/[A-Z][A-Z0-9]+/;for(var k in rx){for(var m,src=rx[k].source;m=src.match(token);)src=src.replace(m[0],tokens[m[0]].source);rx[k]=new RegExp(src,"gi")}var ConsumableString=Base.extend({init:function(str){this.str=str,this.pos=0},match:function(rx){var m;return rx.lastIndex=this.pos,(m=rx.exec(this.str))&&m.index==this.pos?(this.pos=rx.lastIndex?rx.lastIndex:this.str.length,m):null},peek:function(rx){var m;return rx.lastIndex=this.pos,(m=rx.exec(this.str))&&m.index==this.pos?m:null},showpos:function(){return this.str.slice(0,this.pos)+"<HERE>"+this.str.slice(this.pos)},done:function(){return this.pos==this.str.length}}),SelectorBase=Base.extend({}),SimpleSelector=SelectorBase.extend({init:function(){this.tag=null,this.id=null,this.classes=[],this.attrs=[],this.nots=[],this.pseudo_classes=[],this.pseudo_els=[]},parse:function(selector){var m;(m=selector.match(rx.tag))&&(this.tag=m[1]);do if(m=selector.match(rx.not)){if(this.nots[this.nots.length]=SelectorsGroup().parse(selector),!(m=selector.match(rx.not_end)))throw"Invalid :not term in selector"}else if(m=selector.match(rx.id))this.id=m[1];else if(m=selector.match(rx.cls))this.classes[this.classes.length]=m[1];else if(m=selector.match(rx.attr))this.attrs[this.attrs.length]=[m[1],m[2],m[3]];else if(m=selector.match(rx.pseudo_el))this.pseudo_els[this.pseudo_els.length]=m[1]||m[2];else if(m=selector.match(rx.pseudo_cls_nth)){if(m[3])var a=parseInt((m[1]||"")+(m[2]||"1")),b=parseInt((m[4]||"")+(m[5]||"0"));else var a=m[8]?2:0,b=m[8]?4-m[8].length:parseInt((m[6]||"")+m[7]);this.pseudo_classes[this.pseudo_classes.length]=["nth-child",[a,b]]}else(m=selector.match(rx.pseudo_cls))&&(this.pseudo_classes[this.pseudo_classes.length]=[m[1]]);while(m&&!selector.done());return this}}),Selector=SelectorBase.extend({init:function(){this.parts=[]},parse:function(cons){for(this.parts[this.parts.length]=SimpleSelector().parse(cons);!cons.done()&&!cons.peek(rx.comma)&&(m=cons.match(rx.comb));)this.parts[this.parts.length]=m[1]||" ",this.parts[this.parts.length]=SimpleSelector().parse(cons);return 1==this.parts.length?this.parts[0]:this}}),SelectorsGroup=SelectorBase.extend({init:function(){this.parts=[]},parse:function(cons){for(this.parts[this.parts.length]=Selector().parse(cons);!cons.done()&&(m=cons.match(rx.comma));)this.parts[this.parts.length]=Selector().parse(cons);return 1==this.parts.length?this.parts[0]:this}});$.selector=function(s){var cons=ConsumableString(s),res=SelectorsGroup().parse(cons);if(res.selector=s,cons.done())return res;throw"Could not parse selector - "+cons.showpos()},$.selector.SelectorBase=SelectorBase,$.selector.SimpleSelector=SimpleSelector,$.selector.Selector=Selector,$.selector.SelectorsGroup=SelectorsGroup}(jQuery),function($){$.selector.SimpleSelector.addMethod("specifity",function(){if(this.spec)return this.spec;var spec=[this.id?1:0,this.classes.length+this.attrs.length+this.pseudo_classes.length,(this.tag&&"*"!=this.tag?1:0)+this.pseudo_els.length];return $.each(this.nots,function(i,not){var ns=not.specifity();spec[0]+=ns[0],spec[1]+=ns[1],spec[2]+=ns[2]}),this.spec=spec}),$.selector.Selector.addMethod("specifity",function(){if(this.spec)return this.spec;var spec=[0,0,0];return $.each(this.parts,function(i,part){if(!(i%2)){var ps=part.specifity();spec[0]+=ps[0],spec[1]+=ps[1],spec[2]+=ps[2]}}),this.spec=spec}),$.selector.SelectorsGroup.addMethod("specifity",function(){if(this.spec)return this.spec;var spec=[0,0,0];return $.each(this.parts,function(i,part){var ps=part.specifity();spec[0]+=ps[0],spec[1]+=ps[1],spec[2]+=ps[2]}),this.spec=spec})}(jQuery),function($){function as_subexpr(f){return f.complex?join(["l"+ ++lbl_id+":{",f.replace(GOOD,"break l"+lbl_id),"}"]):f.replace(GOOD,"")}var div=document.createElement("div");div.innerHTML='<form id="test"><input name="id" type="text"/></form>';var getAttr,getAttributeDodgy="test"!==div.firstChild.getAttribute("id"),hasElementTraversal=div.firstElementChild&&"FORM"==div.firstElementChild.tagName,GOOD=(div.children&&"FORM"==div.children[0].tagName,/GOOD/g),BAD=/BAD/g,STARTS_WITH_QUOTES=/^['"]/g,join=function(js){return js.join("\n")},join_complex=function(js){var code=new String(js.join("\n"));return code.complex=!0,code},varForAttr=function(attr){return"_"+attr.replace(/^[^A-Za-z]|[^A-Za-z0-9]/g,function(m){return"_0x"+m.charCodeAt(0).toString(16)+"_"})};if(getAttributeDodgy){var getAttrIEMap={"class":"className","for":"htmlFor"};getAttr=function(attr){var ieattr=getAttrIEMap[attr]||attr;return"var "+varForAttr(attr)+' = el.getAttribute("'+ieattr+'",2) || (el.getAttributeNode("'+attr+'")||{}).nodeValue;'}}else getAttr=function(attr){return"var "+varForAttr(attr)+' = el.getAttribute("'+attr+'");'};var attrchecks={"-":"!K","=":'K != "V"',"!=":'K == "V"',"~=":'_WS_K.indexOf(" V ") == -1',"^=":'!K || K.indexOf("V") != 0',"*=":'!K || K.indexOf("V") == -1',"$=":'!K || K.substr(K.length-"V".length) != "V"'},State=$.selector.State=Base.extend({init:function(){this.reset()},reset:function(){this.attrs={},this.wsattrs={}},prev:function(){return this.reset(),hasElementTraversal?"el = el.previousElementSibling":"while((el = el.previousSibling) && el.nodeType != 1) {}"},next:function(){return this.reset(),hasElementTraversal?"el = el.nextElementSibling":"while((el = el.nextSibling) && el.nodeType != 1) {}"},prevLoop:function(body){return this.reset(),join(hasElementTraversal?["while(el = el.previousElementSibling){",body]:["while(el = el.previousSibling){","if (el.nodeType != 1) continue;",body])},parent:function(){return this.reset(),"el = el.parentNode;"},parentLoop:function(body){return this.reset(),join(["while((el = el.parentNode) && el.nodeType == 1){",body,"}"])},uses_attr:function(attr){return this.attrs[attr]?void 0:(this.attrs[attr]=!0,getAttr(attr))},uses_wsattr:function(attr){return this.wsattrs[attr]?void 0:(this.wsattrs[attr]=!0,join([this.uses_attr(attr),"var _WS_"+varForAttr(attr)+' = " "+'+varForAttr(attr)+'+" ";']))},uses_jqueryFilters:function(){return this.jqueryFiltersAdded?void 0:(this.jqueryFiltersAdded=!0,"var _$filters = jQuery.find.selectors.filters;")},save:function(lbl){return"var el"+lbl+" = el;"},restore:function(lbl){return this.reset(),"el = el"+lbl+";"}}),pseudoclschecks={"first-child":join(["var cel = el;","while(cel = cel.previousSibling){ if (cel.nodeType === 1) BAD; }"]),"last-child":join(["var cel = el;","while(cel = cel.nextSibling){ if (cel.nodeType === 1) BAD; }"]),"nth-child":function(a,b){var get_i=join(["var i = 1, cel = el;","while(cel = cel.previousSibling){","if (cel.nodeType === 1) i++;","}"]);return join(0==a?[get_i,"if (i- "+b+" != 0) BAD;"]:0==b&&a>=0?[get_i,"if (i%"+a+" != 0 || i/"+a+" < 0) BAD;"]:0==b&&0>a?["BAD;"]:[get_i,"if ((i- "+b+")%"+a+" != 0 || (i- "+b+")/"+a+" < 0) BAD;"])}};pseudoclschecks["only-child"]=join([pseudoclschecks["first-child"],pseudoclschecks["last-child"]]),$.selector.SimpleSelector.addMethod("compile",function(el){var js=[];return this.tag&&"*"!=this.tag&&(js[js.length]='if (el.tagName != "'+this.tag.toUpperCase()+'") BAD;'),this.id&&(js[js.length]=el.uses_attr("id"),js[js.length]='if (_id !== "'+this.id+'") BAD;'),this.classes.length&&(js[js.length]=el.uses_wsattr("class"),$.each(this.classes,function(i,cls){js[js.length]='if (_WS__class.indexOf(" '+cls+' ") == -1) BAD;'})),$.each(this.attrs,function(i,attr){js[js.length]="~="==attr[1]?el.uses_wsattr(attr[0]):el.uses_attr(attr[0]);var check=attrchecks[attr[1]||"-"];check=check.replace(/K/g,varForAttr(attr[0])).replace(/V/g,attr[2]&&attr[2].match(STARTS_WITH_QUOTES)?attr[2].slice(1,-1):attr[2]),js[js.length]="if ("+check+") BAD;"}),$.each(this.nots,function(i,not){var lbl=++lbl_id,func=join(["l"+lbl+":{",not.compile(el).replace(BAD,"break l"+lbl).replace(GOOD,"BAD"),"}"]);not instanceof $.selector.SimpleSelector||(func=join([el.save(lbl),func,el.restore(lbl)])),js[js.length]=func}),$.each(this.pseudo_classes,function(i,pscls){var check=pseudoclschecks[pscls[0]];check?js[js.length]="function"==typeof check?check.apply(this,pscls[1]):check:(check=$.find.selectors.filters[pscls[0]])&&(js[js.length]=el.uses_jqueryFilters(),js[js.length]="if (!_$filters."+pscls[0]+"(el)) BAD;")}),js[js.length]="GOOD",join(js)});var lbl_id=0,combines={" ":function(el,f1,f2){return join_complex([f2,"while(true){",el.parent(),"if (!el || el.nodeType !== 1) BAD;",f1.compile(el).replace(BAD,"continue"),"}"])},">":function(el,f1,f2){return join([f2,el.parent(),"if (!el || el.nodeType !== 1) BAD;",f1.compile(el)])},"~":function(el,f1,f2){return join_complex([f2,el.prevLoop(),f1.compile(el).replace(BAD,"continue"),"}","BAD;"])},"+":function(el,f1,f2){return join([f2,el.prev(),"if (!el) BAD;",f1.compile(el)])}};$.selector.Selector.addMethod("compile",function(el){for(var l=this.parts.length,expr=this.parts[--l].compile(el);l;){var combinator=this.parts[--l];expr=combines[combinator](el,this.parts[--l],as_subexpr(expr))}return expr}),$.selector.SelectorsGroup.addMethod("compile",function(el){for(var expr=[],lbl=++lbl_id,i=0;i<this.parts.length;i++)expr[expr.length]=join([0==i?el.save(lbl):el.restore(lbl),"l"+lbl+"_"+i+":{",this.parts[i].compile(el).replace(BAD,"break l"+lbl+"_"+i),"}"]);return expr[expr.length]="BAD;",join(expr)}),$.selector.SelectorBase.addMethod("matches",function(el){return this.matches=new Function("el",join(["if (!el) return false;",this.compile(new State).replace(BAD,"return false").replace(GOOD,"return true")])),this.matches(el)})}(jQuery),function($){var DIRECT=/DIRECT/g,CONTEXT=/CONTEXT/g,EITHER=/DIRECT|CONTEXT/g;$.selector.SelectorBase.addMethod("affectedBy",function(props){return this.affectedBy=new Function("props",["var direct_classes, context_classes, direct_attrs, context_attrs, t;",this.ABC_compile().replace(DIRECT,"direct").replace(CONTEXT,"context"),"return {classes: {context: context_classes, direct: direct_classes}, attrs: {context: context_attrs, direct: direct_attrs}};"].join("\n")),this.affectedBy(props)}),$.selector.SimpleSelector.addMethod("ABC_compile",function(){var parts=[];return $.each(this.classes,function(i,cls){parts[parts.length]="if (t = props.classes['"+cls+"']) (DIRECT_classes || (DIRECT_classes = {}))['"+cls+"'] = t;"}),$.each(this.nots,function(i,not){parts[parts.length]=not.ABC_compile()}),parts.join("\n")}),$.selector.Selector.addMethod("ABC_compile",function(arg){var parts=[],i=this.parts.length-1;for(parts[parts.length]=this.parts[i].ABC_compile();(i-=2)>=0;)parts[parts.length]=this.parts[i].ABC_compile().replace(EITHER,"CONTEXT");return parts.join("\n")}),$.selector.SelectorsGroup.addMethod("ABC_compile",function(){var parts=[];return $.each(this.parts,function(i,part){parts[parts.length]=part.ABC_compile()}),parts.join("\n")})}(jQuery),function($){void 0===$.support.focusinBubbles&&($.support.focusinBubbles=!!$.browser.msie),$.support.focusinBubbles||$.event.special.focusin||$.each({focus:"focusin",blur:"focusout"},function(original,fix){$.event.special[fix]={setup:function(){return this.addEventListener?void this.addEventListener(original,$.event.special[fix].handler,!0):!1},teardown:function(){return this.removeEventListener?void this.removeEventListener(original,$.event.special[fix].handler,!0):!1},handler:function(e){return arguments[0]=$.event.fix(e),arguments[0].type=fix,$.event.handle.apply(this,arguments)}}}),function(){var activeFocus=null;$(document).bind("focusin",function(e){var target=e.realTarget||e.target;activeFocus&&activeFocus!==target&&(e.type="focusout",$(activeFocus).trigger(e),e.type="focusin",e.target=target),activeFocus=target}).bind("focusout",function(e){activeFocus=null})}()}(jQuery);try{console.log}catch(e){window.console=void 0}!function($){var sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,$),jQuerySub.superclass=$,jQuerySub.fn=jQuerySub.prototype=$(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},namespaces={};$.entwine=function(){$.fn.entwine.apply(null,arguments)},$.extend($.entwine,{namespaces:namespaces,clear_all_rules:function(){for(var k in $.fn)$.fn[k].isentwinemethod&&delete $.fn[k];$(document).unbind(".entwine"),$(window).unbind(".entwine");for(var k in namespaces)delete namespaces[k];for(var k in $.entwine.capture_bindings)delete $.entwine.capture_bindings[k]},WARN_LEVEL_NONE:0,WARN_LEVEL_IMPORTANT:1,WARN_LEVEL_BESTPRACTISE:2,warningLevel:0,warn:function(message,level){level<=$.entwine.warningLevel&&console&&console.warn&&(console.warn(message),console.trace&&console.trace())},warn_exception:function(where,on,e){$.entwine.WARN_LEVEL_IMPORTANT<=$.entwine.warningLevel&&console&&console.warn&&(2==arguments.length&&(e=on,on=null),on?console.warn("Uncaught exception",e,"in",where,"on",on):console.warn("Uncaught exception",e,"in",where),e.stack&&console.warn("Stack Trace:\n"+e.stack))}});var rulecount=0,Rule=Base.extend({init:function(selector,name){this.selector=selector,this.specifity=selector.specifity(),this.important=0,this.name=name,this.rulecount=rulecount++}});Rule.compare=function(a,b){var as=a.specifity,bs=b.specifity;return a.important-b.important||as[0]-bs[0]||as[1]-bs[1]||as[2]-bs[2]||a.rulecount-b.rulecount},$.entwine.RuleList=function(){var list=[];return list.addRule=function(selector,name){var rule=Rule(selector,name);return list[list.length]=rule,list.sort(Rule.compare),rule},list};var handlers=[];$.entwine.Namespace=Base.extend({init:function(name){if(name&&!name.match(/^[A-Za-z0-9.]+$/)&&$.entwine.warn("Entwine namespace "+name+" is not formatted as period seperated identifiers",$.entwine.WARN_LEVEL_BESTPRACTISE),name=name||"__base",this.name=name,this.store={},namespaces[name]=this,"__base"==name)this.injectee=$.fn,this.$=$;else{this.$=$.sub?$.sub():sub(),this.$.cache=$.cache,this.injectee=this.$.prototype;var entwine_wrapper=this.injectee.entwine=function(spacename){var args=arguments;return spacename&&"string"==typeof spacename?"."!=spacename.charAt(0)&&(args[0]=name+"."+spacename):(args=$.makeArray(args),args.unshift(name)),$.fn.entwine.apply(this,args)};this.$.entwine=function(){entwine_wrapper.apply(null,arguments)};for(var i=0;i<handlers.length;i++){var builder,handler=handlers[i];if(builder=handler.namespaceMethodOverrides){var overrides=builder(this);for(var k in overrides)this.injectee[k]=overrides[k]}if(builder=handler.namespaceStaticOverrides){var overrides=builder(this);for(var k in overrides)this.$.entwine[k]=overrides[k]}}}},one:function(name,funcprop,basefunc){var namespace=this,funcs=this.store[name],one=function(el,args,i){for(void 0===i&&(i=funcs.length);i--;)if(funcs[i].selector.matches(el)){var ret,tmp_i=el.i,tmp_f=el.f;el.i=i,el.f=one;try{ret=funcs[i][funcprop].apply(namespace.$(el),args)}finally{el.i=tmp_i,el.f=tmp_f}return ret}return basefunc?basefunc.apply(namespace.$(el),args):void 0};return one},build_proxy:function(name,basefunc){var one=this.one(name,"func",basefunc),prxy=function(){for(var rv,ctx=$(this),i=ctx.length;i--;)rv=one(ctx[i],arguments);return rv};return prxy},bind_proxy:function(selector,name,func){var rulelist=this.store[name]||(this.store[name]=$.entwine.RuleList()),rule=rulelist.addRule(selector,name);rule.func=func,this.injectee.hasOwnProperty(name)&&this.injectee[name].isentwinemethod||(this.injectee[name]=this.build_proxy(name,this.injectee.hasOwnProperty(name)?this.injectee[name]:null),this.injectee[name].isentwinemethod=!0),this.injectee[name].isentwinemethod||$.entwine.warn("Warning: Entwine function "+name+" clashes with regular jQuery function - entwine function will not be callable directly on jQuery object",$.entwine.WARN_LEVEL_IMPORTANT)},add:function(selector,data){for(var k in data)for(var v=data[k],i=0;i<handlers.length&&(!handlers[i].bind||!handlers[i].bind.call(this,selector,k,v));i++);},has:function(ctx,name){var rulelist=this.store[name];if(!rulelist)return!1;for(var i=0;i<rulelist.length;i++)if(ctx=ctx.not(rulelist[i].selector),!ctx.length)return!0;return!1}}),$.entwine.Namespace.addHandler=function(handler){for(var i=0;i<handlers.length&&handlers[i].order<handler.order;i++);handlers.splice(i,0,handler)},$.entwine.Namespace.addHandler({order:50,bind:function(selector,k,v){return $.isFunction(v)?(this.bind_proxy(selector,k,v),!0):void 0}}),$.extend($.fn,{entwine:function(spacename){var i=0,selector=null,namespace=namespaces.__base||$.entwine.Namespace();for("string"==typeof spacename&&("."==spacename.charAt("0")&&(spacename=spacename.substr(1)),spacename&&(namespace=namespaces[spacename]||$.entwine.Namespace(spacename)),i=1);i<arguments.length;){var res=arguments[i++];$.isFunction(res)&&(1!=res.length&&$.entwine.warn("Function block inside entwine definition does not take $ argument properly",$.entwine.WARN_LEVEL_IMPORTANT),res=res.call(namespace.$(this),namespace.$)),res&&(null===selector&&(selector=this.selector?$.selector(this.selector):!1),selector?namespace.add(selector,res):$.entwine.warn("Entwine block given to entwine call without selector. Make sure you call $(selector).entwine when defining blocks",$.entwine.WARN_LEVEL_IMPORTANT))}return namespace.$(this)},_super:function(){for(var rv,i=this.length;i--;){var el=this[0];rv=el.f(el,arguments,el.i)}return rv}})}(jQuery),function($){function getElements(store,original){for(var node,i=store.length,next=original.firstChild;node=next;)for(1===node.nodeType&&(store[i++]=node),next=node.firstChild||node.nextSibling;!next&&(node=node.parentNode)&&node!==original;)next=node.nextSibling}var dontTrigger=!1,patchDomManipCallback=function(original){var patched=function(elem){var added=[];dontTrigger||(1==elem.nodeType&&(added[added.length]=elem),getElements(added,elem));var rv=original.apply(this,arguments);if(!dontTrigger&&added.length){var event=$.Event("EntwineElementsAdded");event.targets=added,$(document).triggerHandler(event)}return rv};return patched.patched=!0,patched},version=$.prototype.jquery.split("."),callbackIdx=version[0]>1||version[1]>=10?1:2,_domManip=$.prototype.domManip;$.prototype.domManip=function(){return arguments[callbackIdx].patched||(arguments[callbackIdx]=patchDomManipCallback(arguments[callbackIdx])),_domManip.apply(this,arguments)};var _html=$.prototype.html;$.prototype.html=function(value){if(void 0===value)return _html.apply(this,arguments);dontTrigger=!0;var res=_html.apply(this,arguments);dontTrigger=!1;for(var added=[],i=0,length=this.length;length>i;i++)getElements(added,this[i]);var event=$.Event("EntwineElementsAdded");return event.targets=added,$(document).triggerHandler(event),res};var supressActualClean=!1,_cleanData=$.cleanData;$.cleanData=function(elems){var removed=elems;if(supressActualClean)for(var i=0,len=elems.length,removed=[],ri=0;len>i;i++)for(var node=elems[i],current=node;current=current.parentNode;)if(9==current.nodeType){removed[ri++]=node;break}if(removed.length){var event=$.Event("EntwineElementsRemoved");event.targets=removed,$(document).triggerHandler(event)}supressActualClean||_cleanData.apply(this,arguments)};var _remove=$.prototype.remove;$.prototype.remove=function(selector,keepdata){supressActualClean=keepdata;var rv=_remove.call(this,selector);return supressActualClean=!1,rv},$(function(){var added=[];getElements(added,document);var event=$.Event("EntwineElementsAdded");event.targets=added,$(document).triggerHandler(event)})}(jQuery),function($){var monkey=function(){var methods=$.makeArray(arguments),patch=methods.pop();$.each(methods,function(i,method){var old=$.fn[method];$.fn[method]=function(){var self=this,args=$.makeArray(arguments),rv=old.apply(self,args);return patch.apply(self,args),rv}})},runSoon=window.setTimeout,ChangeDetails=Base.extend({init:function(){this.global=!1,this.attrs={},this.classes={}},triggerEvent:function(){changes==this&&(this.check_id&&clearTimeout(this.check_id),changes=new ChangeDetails,$(document).triggerHandler("EntwineSubtreeMaybeChanged",[this]))},changed:function(){if(!this.check_id){var self=this;this.check_id=runSoon(function(){self.check_id=null,self.triggerEvent()},10)}},addAll:function(){return this.global?this:(this.global=!0,this.changed(),this)},addSubtree:function(node){return this.addAll()},addSubtreeFuture:function(node){return this.global?this:(this.subtree=this.subtree?this.subtree.add(node):$(node),this.changed(),this)},addAttr:function(attr,node){return this.global?this:(this.attrs[attr]=attr in this.attrs?this.attrs[attr].add(node):$(node),this.changed(),this)},addClass:function(klass,node){return this.global?this:(this.classes[klass]=klass in this.classes?this.classes[klass].add(node):$(node),this.changed(),this)}}),changes=new ChangeDetails;$(document).bind("EntwineElementsAdded",function(e){changes.addSubtree(e.targets)});var removed=null;$(document).bind("EntwineElementsRemoved",function(e){removed=e.targets}),monkey("remove","html","empty",function(){var subtree=removed;removed=null,subtree&&changes.addSubtree(subtree)}),monkey("removeAttr",function(attr){changes.addAttr(attr,this)}),monkey("addClass","removeClass","toggleClass",function(klass){"string"==typeof klass&&changes.addClass(klass,this)}),monkey("attr",function(a,b){if(void 0!==b&&"string"==typeof a)changes.addAttr(a,this);else if("string"!=typeof a)for(var k in a)changes.addAttr(k,this)}),$.extend($.entwine,{synchronous_mode:function(){changes&&changes.check_id&&clearTimeout(changes.check_id),changes=new ChangeDetails,runSoon=function(func,delay){return func.call(this),null}},triggerMatching:function(){changes.addAll()}})}(jQuery),function($){if(void 0==$.support.changeBubbles){$.support.changeBubbles=!0;var el=document.createElement("div");if(eventName="onchange",el.attachEvent){var isSupported=eventName in el;isSupported||(el.setAttribute(eventName,"return;"),isSupported="function"==typeof el[eventName]),$.support.changeBubbles=isSupported}}if(document.compareDocumentPosition)var is_or_contains=function(a,b){return a&&b&&(a==b||!!(16&a.compareDocumentPosition(b)))};else var is_or_contains=function(a,b){return a&&b&&(a==b||(a.contains?a.contains(b):!0))};$.entwine.Namespace.addMethods({build_event_proxy:function(name){var one=this.one(name,"func"),prxy=function(e,data){e=e.delegatedEvent||e;for(var el=e.target;el&&1==el.nodeType&&!e.isPropagationStopped();){var ret=one(el,arguments);void 0!==ret&&(e.result=ret),ret===!1&&(e.preventDefault(),e.stopPropagation()),el=el.parentNode}};return prxy},build_mouseenterleave_proxy:function(name){var one=this.one(name,"func"),prxy=function(e){for(var el=e.target,rel=e.relatedTarget;el&&1==el.nodeType&&!e.isPropagationStopped()&&!is_or_contains(el,rel);){var ret=one(el,arguments);void 0!==ret&&(e.result=ret),ret===!1&&(e.preventDefault(),e.stopPropagation()),el=el.parentNode}};return prxy},build_change_proxy:function(name){var one=this.one(name,"func"),getVal=function(elem){var type=elem.type,val=elem.value;return"radio"===type||"checkbox"===type?val=elem.checked:"select-multiple"===type?(val="",elem.selectedIndex>-1&&(val=jQuery.map(elem.options,function(elem){return elem.selected}).join("-"))):jQuery.nodeName(elem,"select")&&(val=elem.selectedIndex),val},rformElems=/^(?:textarea|input|select)$/i,testChange=function(e){var data,val,elem=e.target;if(rformElems.test(elem.nodeName)&&!elem.readOnly&&(data=jQuery.data(elem,"_entwine_change_data"),val=getVal(elem),"focusout"===e.type&&"radio"===elem.type||jQuery.data(elem,"_entwine_change_data",val),void 0!==data&&val!==data&&(null!=data||val)))for(e.type="change";elem&&1==elem.nodeType&&!e.isPropagationStopped();){var ret=one(elem,arguments);void 0!==ret&&(e.result=ret),ret===!1&&(e.preventDefault(),e.stopPropagation()),elem=elem.parentNode}},prxy=function(e){var event=e.type,elem=e.target,type=jQuery.nodeName(elem,"input")?elem.type:"";switch(event){case"focusout":case"beforedeactivate":testChange.apply(this,arguments);break;case"click":("radio"===type||"checkbox"===type||jQuery.nodeName(elem,"select"))&&testChange.apply(this,arguments);break;case"keydown":(13===e.keyCode&&!jQuery.nodeName(elem,"textarea")||32===e.keyCode&&("checkbox"===type||"radio"===type)||"select-multiple"===type)&&testChange.apply(this,arguments);break;case"focusin":case"beforeactivate":jQuery.data(elem,"_entwine_change_data",getVal(elem))}};return prxy},bind_event:function(selector,name,func,event){var funcs=this.store[name]||(this.store[name]=$.entwine.RuleList()),proxies=funcs.proxies||(funcs.proxies={}),rule=funcs.addRule(selector,name);if(rule.func=func,!proxies[name]){switch(name){case"onmouseenter":proxies[name]=this.build_mouseenterleave_proxy(name),event="mouseover";break;case"onmouseleave":proxies[name]=this.build_mouseenterleave_proxy(name),event="mouseout";break;case"onchange":$.support.changeBubbles||(proxies[name]=this.build_change_proxy(name),event="click keydown focusin focusout beforeactivate beforedeactivate");break;case"onsubmit":event="delegatedSubmit";break;case"onfocus":case"onblur":$.entwine.warn("Event "+event+" not supported - using focusin / focusout instead",$.entwine.WARN_LEVEL_IMPORTANT)}proxies[name]||(proxies[name]=this.build_event_proxy(name)),$(document).bind(event.replace(/(\s+|$)/g,".entwine$1"),proxies[name])}}}),$.entwine.Namespace.addHandler({order:40,bind:function(selector,k,v){var match,event;return $.isFunction(v)&&(match=k.match(/^on(.*)/))?(event=match[1],this.bind_event(selector,k,v,event),!0):void 0}});var delegate_submit=function(e,data){var delegationEvent=$.Event("delegatedSubmit");return delegationEvent.delegatedEvent=e,$(document).trigger(delegationEvent,data)};$(document).bind("EntwineElementsAdded",function(e){var forms=$(e.targets).filter("form");forms.length&&forms.bind("submit.entwine_delegate_submit",delegate_submit)})}(jQuery),function($){$.entwine.Namespace.addMethods({bind_capture:function(selector,event,name,capture){var store=this.captures||(this.captures={}),rulelists=store[event]||(store[event]={}),rulelist=rulelists[name]||(rulelists[name]=$.entwine.RuleList());rule=rulelist.addRule(selector,event),rule.handler=name,this.bind_proxy(selector,name,capture)}});var bindings=$.entwine.capture_bindings={},event_proxy=function(event){return function(e){var namespace,capturelists,forevent,capturelist,rule,handler,sel;for(var k in $.entwine.namespaces)if(namespace=$.entwine.namespaces[k],capturelists=namespace.captures,capturelists&&(forevent=capturelists[event]))for(var k in forevent)for(var capturelist=forevent[k],triggered=namespace.$([]),j=capturelist.length;j--;){rule=capturelist[j],handler=rule.handler,sel=rule.selector.selector;var matching=namespace.$(sel).not(triggered);matching[handler].apply(matching,arguments),triggered=triggered.add(matching)}}},selector_proxy=function(selector,handler,includechildren){var matcher=$.selector(selector);return function(e){return matcher.matches(e.target)?handler.apply(this,arguments):void 0}},document_proxy=function(selector,handler,includechildren){return function(e){return e.target===document?handler.apply(this,arguments):void 0}},window_proxy=function(selector,handler,includechildren){return function(e){return e.target===window?handler.apply(this,arguments):void 0}},property_proxy=function(property,handler,includechildren){return function(e){var match=this["get"+property]();if("string"==typeof match){var matcher=matcher&&match==matcher.selector?matcher:$.selector(match);if(matcher.matches(e.target))return handler.apply(this,arguments)}else if(-1!==$.inArray(e.target,match))return handler.apply(this,arguments)}};$.entwine.Namespace.addHandler({order:10,bind:function(selector,k,v){var match;if($.isPlainObject(v)&&(match=k.match(/^from\s*(.*)/))){var proxyGen,from=match[1];proxyGen=from.match(/[^\w]/)?selector_proxy:"Window"==from||"window"==from?window_proxy:"Document"==from||"document"==from?document_proxy:property_proxy;for(var onevent in v){var handler=v[onevent];match=onevent.match(/^on(.*)/);var event=match[1];if(this.bind_capture(selector,event,k+"_"+event,proxyGen(from,handler)),!bindings[event]){var namespaced=event.replace(/(\s+|$)/g,".entwine$1");bindings[event]=event_proxy(event),$(proxyGen==window_proxy?window:document).bind(namespaced,bindings[event])}}return!0}}})}(jQuery),function($){$.entwine.Namespace.addMethods({bind_condesc:function(selector,name,func){for(var rule,ctors=this.store.ctors||(this.store.ctors=$.entwine.RuleList()),i=0;i<ctors.length;i++)if(ctors[i].selector.selector==selector.selector){rule=ctors[i];break}if(rule||(rule=ctors.addRule(selector,"ctors")),rule[name]=func,!ctors[name+"proxy"]){var one=this.one("ctors",name),namespace=this,proxy=function(els,i,func){for(var j=els.length;j--;){var el=els[j],tmp_i=el.i,tmp_f=el.f;el.i=i,el.f=one;try{func.call(namespace.$(el))}catch(e){$.entwine.warn_exception(name,el,e)}finally{el.i=tmp_i,el.f=tmp_f}}};ctors[name+"proxy"]=proxy}}}),$.entwine.Namespace.addHandler({order:30,bind:function(selector,k,v){return!$.isFunction(v)||"onmatch"!=k&&"onunmatch"!=k?void 0:(this.matchersDirty=!0,this.bind_condesc(selector,k,v),!0)}}),$(document).bind("EntwineSubtreeMaybeChanged",function(e,changes){for(var k in $.entwine.namespaces){var namespace=$.entwine.namespaces[k],ctors=namespace.store.ctors;if(ctors){for(var add,rem,res,rule,sel,ctor,dtor,full,matched=null,taken=$([]),released=$([]),calcmatched=function(j){if(null===matched){matched=$([]);for(var cache,k=ctors.length;--k>j;)(cache=ctors[k].cache)&&(matched=matched.add(cache))}},j=ctors.length;j--;){if(rule=ctors[j],sel=rule.selector.selector,ctor=rule.onmatch,dtor=rule.onunmatch,res=null,full=!1,namespace.matchersDirty||changes.global)full=!0;else{for(var k in changes.attrs){full=!0;break}var method=rule.selector.affectedBy(changes);if(method.classes.context)full=!0;else for(var k in method.classes.direct){
calcmatched(j);var recheck=changes.classes[k].not(matched);null===res&&(res=rule.cache?rule.cache.not(taken).add(released.filter(sel)):$([])),res=res.not(recheck).add(recheck.filter(sel))}}full?(calcmatched(j),res=$(sel).not(matched)):res||(add=released.length&&released.filter(sel),add&&add.length?res=rule.cache?rule.cache.not(taken).add(add):add:(rem=taken.length&&rule.cache&&rule.cache.filter(taken),rem&&rem.length&&(res=rule.cache.not(rem)))),null===res?matched&&rule.cache&&(matched=matched.add(rule.cache)):(rule.cache?(add=res.not(rule.cache),rem=rule.cache.not(res)):(add=res,rem=null),(add&&add.length||rem&&rem.length)&&(rem&&rem.length&&(released=released.add(rem),dtor&&!rule.onunmatchRunning&&(rule.onunmatchRunning=!0,ctors.onunmatchproxy(rem,j,dtor),rule.onunmatchRunning=!1)),add&&add.length&&(taken=taken.add(add),released=released.not(add),ctor&&!rule.onmatchRunning&&(rule.onmatchRunning=!0,ctors.onmatchproxy(add,j,ctor),rule.onmatchRunning=!1))),matched&&(matched=matched.add(res)),rule.cache=res)}namespace.matchersDirty=!1}}})}(jQuery),function($){$.entwine.Namespace.addMethods({build_addrem_proxy:function(name){var one=this.one(name,"func");return function(){if(0!==this.length){if(this.length){for(var rv,i=this.length;i--;)rv=one(this[i],arguments);return rv}return one(this,arguments)}}},bind_addrem_proxy:function(selector,name,func){var rulelist=this.store[name]||(this.store[name]=$.entwine.RuleList()),rule=rulelist.addRule(selector,name);rule.func=func,this.injectee.hasOwnProperty(name)||(this.injectee[name]=this.build_addrem_proxy(name),this.injectee[name].isentwinemethod=!0)}}),$.entwine.Namespace.addHandler({order:30,bind:function(selector,k,v){return!$.isFunction(v)||"onadd"!=k&&"onremove"!=k?void 0:(this.bind_addrem_proxy(selector,k,v),!0)}}),$(document).bind("EntwineElementsAdded",function(e){for(var k in $.entwine.namespaces){var namespace=$.entwine.namespaces[k];namespace.injectee.onadd&&namespace.injectee.onadd.call(e.targets)}}),$(document).bind("EntwineElementsRemoved",function(e){for(var k in $.entwine.namespaces){var namespace=$.entwine.namespaces[k];namespace.injectee.onremove&&namespace.injectee.onremove.call(e.targets)}})}(jQuery),function($){var entwine_prepend="__entwine!",getEntwineData=function(el,namespace,property){return el.data(entwine_prepend+namespace+"!"+property)},setEntwineData=function(el,namespace,property,value){return el.data(entwine_prepend+namespace+"!"+property,value)},getEntwineDataAsHash=function(el,namespace){var hash={},id=jQuery.data(el[0]),matchstr=entwine_prepend+namespace+"!",matchlen=matchstr.length,cache=jQuery.cache[id];for(var k in cache)k.substr(0,matchlen)==matchstr&&(hash[k.substr(matchlen)]=cache[k]);return hash},setEntwineDataFromHash=function(el,namespace,hash){for(var k in hash)setEntwineData(namespace,k,hash[k])},entwineData=function(el,namespace,args){switch(args.length){case 0:return getEntwineDataAsHash(el,namespace);case 1:return"string"==typeof args[0]?getEntwineData(el,namespace,args[0]):setEntwineDataFromHash(el,namespace,args[0]);default:return setEntwineData(el,namespace,args[0],args[1])}};$.extend($.fn,{entwineData:function(){return entwineData(this,"__base",arguments)}}),$.entwine.Namespace.addHandler({order:60,bind:function(selector,k,v){k.charAt(0)!=k.charAt(0).toUpperCase()&&$.entwine.warn("Entwine property "+k+" does not start with a capital letter",$.entwine.WARN_LEVEL_BESTPRACTISE);var getterName="get"+k,setterName="set"+k;this.bind_proxy(selector,getterName,function(){var r=this.entwineData(k);return void 0===r?v:r}),this.bind_proxy(selector,setterName,function(v){return this.entwineData(k,v)});var getter=this.injectee[getterName],setter=this.injectee[setterName];return this.bind_proxy(selector,k,function(v){return(1==arguments.length?setter:getter).call(this,v)}),!0},namespaceMethodOverrides:function(namespace){return{entwineData:function(){return entwineData(this,namespace.name,arguments)}}}})}(jQuery),function($){$.concrete=$.entwine,$.fn.concrete=$.fn.entwine,$.fn.concreteData=$.fn.entwineData,$.entwine.Namespace.addHandler({order:100,bind:function(selector,k,v){return!1},namespaceMethodOverrides:function(namespace){return namespace.$.concrete=namespace.$.entwine,namespace.injectee.concrete=namespace.injectee.entwine,namespace.injectee.concreteData=namespace.injectee.entwineData,{}}})}(jQuery),function($){$(function(){$("a.youtube").each(function(){var url=$(this).attr("href");if(/v=([a-zA-Z0-9_-]+)/.test(url)){var id=/v=([a-zA-Z0-9_-]+)/.exec(url)[1],embedUrl="https://web.archive.org/web/20180927073653/http://www.youtube.com/embed/"+id,iframe=$("<iframe>").attr("width",560).attr("height",315).attr("frameborder",0).attr("allowfullscreen","allowfullscreen").attr("src",embedUrl);$(this).after(iframe),$(this).hide()}})})}(jQuery),function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY,track=function(ev){cX=ev.pageX,cY=ev.pageY},compare=function(ev,ob){return ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t),Math.abs(pX-cX)+Math.abs(pY-cY)<cfg.sensitivity?($(ob).unbind("mousemove",track),ob.hoverIntent_s=1,cfg.over.apply(ob,[ev])):(pX=cX,pY=cY,ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval),void 0)},delay=function(ev,ob){return ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t),ob.hoverIntent_s=0,cfg.out.apply(ob,[ev])},handleHover=function(e){for(var p=("mouseover"==e.type?e.fromElement:e.toElement)||e.relatedTarget;p&&p!=this;)try{p=p.parentNode}catch(e){p=this}if(p==this)return!1;var ev=jQuery.extend({},e),ob=this;ob.hoverIntent_t&&(ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)),"mouseover"==e.type?(pX=ev.pageX,pY=ev.pageY,$(ob).bind("mousemove",track),1!=ob.hoverIntent_s&&(ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval))):($(ob).unbind("mousemove",track),1==ob.hoverIntent_s&&(ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)))};return this.mouseover(handleHover).mouseout(handleHover)}}(jQuery),function($){$(document).ready(function(){function megaHoverOver(){if($("#MobileMainMenu").is(":visible"))return!1;if(!$(this).hasClass("expanded")){checkMenuClose(this);var rowWidth=0;if($(this).addClass("expanded").find(".sub").stop().css("opacity",1).show(),$.fn.calcSubWidth=function(){$(this).find("ul").each(function(){rowWidth+=$(this).width()})},$(this).find(".row").length>0){var biggestRow=0;$(this).find(".row").each(function(){$(this).calcSubWidth(),rowWidth>biggestRow&&(biggestRow=rowWidth)}),$(this).find(".sub").css({width:biggestRow}),$(this).find(".row:last").css({margin:"0"})}else $(this).calcSubWidth(),$(this).find(".sub").css({width:"none"})}}function megaHoverOut(){$(this).removeClass("expanded").find(".sub").stop().hide()}var checkMenuClose=function(menuelem){var menuLi=$(menuelem);$(menuelem).is("li")||(menuLi=$(menuLi).parents("li"));var childIsSelected=!1;menuLi.find("a").each(function(){var me=$(this);me.is(":focus")&&me.parents("li").attr("id")==menuLi.attr("id")&&(childIsSelected=!0)}),childIsSelected||megaHoverOut.call(menuLi)},config={sensitivity:2,interval:50,over:megaHoverOver,timeout:500,out:megaHoverOut};$("ul#nav li .sub").css({opacity:"0"}),$("ul#nav li").hoverIntent(config),$("ul#nav li a").focusin(function(){var expanded=$("#nav li.expanded"),parentMenu=$(this).parents("li");expanded.attr("id")!=parentMenu.attr("id")&&megaHoverOut(),megaHoverOver.call($(parentMenu[0]))}),$("ul#nav li a").focusout(function(){var _self=this;setTimeout(function(){checkMenuClose(_self)},200)})})}(jQuery),function($){var tmp,loading,overlay,wrap,outer,content,close,title,nav_left,nav_right,loadingTimer,start_pos,final_pos,selectedIndex=0,selectedOpts={},selectedArray=[],currentIndex=0,currentOpts={},currentArray=[],ajaxLoader=null,imgPreloader=new Image,imgRegExp=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,swfRegExp=/[^\.]\.(swf)\s*$/i,loadingFrame=1,titleHeight=0,titleStr="",busy=!1,fx=$.extend($("<div/>")[0],{prop:0}),isIE6=$.browser.msie&&$.browser.version<7&&!window.XMLHttpRequest,_abort=function(){"undefined"!=typeof loading&&loading.hide(),imgPreloader.onerror=imgPreloader.onload=null,ajaxLoader&&ajaxLoader.abort(),tmp.empty()},_error=function(){return!1===selectedOpts.onError(selectedArray,selectedIndex,selectedOpts)?(loading.hide(),void(busy=!1)):(selectedOpts.titleShow=!1,selectedOpts.width="auto",selectedOpts.height="auto",tmp.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),void _process_inline())},_start=function(){var href,type,title,str,emb,ret,obj=selectedArray[selectedIndex];if(_abort(),selectedOpts=$.extend({},$.fn.fancybox.defaults,"undefined"==typeof $(obj).data("fancybox")?selectedOpts:$(obj).data("fancybox")),ret=selectedOpts.onStart(selectedArray,selectedIndex,selectedOpts),ret===!1)return void(busy=!1);if("object"==typeof ret&&(selectedOpts=$.extend(selectedOpts,ret)),title=selectedOpts.title||(obj.nodeName?$(obj).attr("title"):obj.title)||"",obj.nodeName&&!selectedOpts.orig&&(selectedOpts.orig=$(obj).children("img:first").length?$(obj).children("img:first"):$(obj)),""===title&&selectedOpts.orig&&selectedOpts.titleFromAlt&&(title=selectedOpts.orig.attr("alt")),href=selectedOpts.href||(obj.nodeName?$(obj).attr("href"):obj.href)||null,(/^(?:javascript)/i.test(href)||"#"==href)&&(href=null),selectedOpts.type?(type=selectedOpts.type,href||(href=selectedOpts.content)):selectedOpts.content?type="html":href&&(type=href.match(imgRegExp)?"image":href.match(swfRegExp)?"swf":$(obj).hasClass("iframe")?"iframe":0===href.indexOf("#")?"inline":"ajax"),!type)return void _error();switch("inline"==type&&(obj=href.substr(href.indexOf("#")),type=$(obj).length>0?"inline":"ajax"),selectedOpts.type=type,selectedOpts.href=href,selectedOpts.title=title,selectedOpts.autoDimensions&&("html"==selectedOpts.type||"inline"==selectedOpts.type||"ajax"==selectedOpts.type?(selectedOpts.width="auto",selectedOpts.height="auto"):selectedOpts.autoDimensions=!1),selectedOpts.modal&&(selectedOpts.overlayShow=!0,selectedOpts.hideOnOverlayClick=!1,selectedOpts.hideOnContentClick=!1,selectedOpts.enableEscapeButton=!1,selectedOpts.showCloseButton=!1),selectedOpts.padding=parseInt(selectedOpts.padding,10),selectedOpts.margin=parseInt(selectedOpts.margin,10),tmp.css("padding",selectedOpts.padding+selectedOpts.margin),$(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){$(this).replaceWith(content.children())}),type){case"html":tmp.html(selectedOpts.content),_process_inline();break;case"inline":if($(obj).parent().is("#fancybox-content")===!0)return void(busy=!1);$('<div class="fancybox-inline-tmp" />').hide().insertBefore($(obj)).bind("fancybox-cleanup",function(){$(this).replaceWith(content.children())}).bind("fancybox-cancel",function(){$(this).replaceWith(tmp.children())}),$(obj).appendTo(tmp),_process_inline();break;case"image":busy=!1,$.fancybox.showActivity(),imgPreloader=new Image,imgPreloader.onerror=function(){_error()},imgPreloader.onload=function(){busy=!0,imgPreloader.onerror=imgPreloader.onload=null,_process_image()},imgPreloader.src=href;break;case"swf":selectedOpts.scrolling="no",str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"><param name="movie" value="'+href+'"></param>',emb="",$.each(selectedOpts.swf,function(name,val){str+='<param name="'+name+'" value="'+val+'"></param>',emb+=" "+name+'="'+val+'"'}),str+='<embed src="'+href+'" type="application/x-shockwave-flash" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"'+emb+"></embed></object>",tmp.html(str),_process_inline();break;case"ajax":busy=!1,$.fancybox.showActivity(),selectedOpts.ajax.win=selectedOpts.ajax.success,ajaxLoader=$.ajax($.extend({},selectedOpts.ajax,{url:href,data:selectedOpts.ajax.data||{},error:function(XMLHttpRequest,textStatus,errorThrown){XMLHttpRequest.status>0&&_error()},success:function(data,textStatus,XMLHttpRequest){var o="object"==typeof XMLHttpRequest?XMLHttpRequest:ajaxLoader;if(200==o.status){if("function"==typeof selectedOpts.ajax.win){if(ret=selectedOpts.ajax.win(href,data,textStatus,XMLHttpRequest),ret===!1)return void loading.hide();"string"!=typeof ret&&"object"!=typeof ret||(data=ret)}tmp.html(data),_process_inline()}}}));break;case"iframe":_show()}},_process_inline=function(){var w=selectedOpts.width,h=selectedOpts.height;w=w.toString().indexOf("%")>-1?parseInt(($(window).width()-2*selectedOpts.margin)*parseFloat(w)/100,10)+"px":"auto"==w?"auto":w+"px",h=h.toString().indexOf("%")>-1?parseInt(($(window).height()-2*selectedOpts.margin)*parseFloat(h)/100,10)+"px":"auto"==h?"auto":h+"px",tmp.wrapInner('<div style="width:'+w+";height:"+h+";overflow: "+("auto"==selectedOpts.scrolling?"auto":"yes"==selectedOpts.scrolling?"scroll":"hidden")+';position:relative;"></div>'),selectedOpts.width=tmp.width(),selectedOpts.height=tmp.height(),_show()},_process_image=function(){selectedOpts.width=imgPreloader.width,selectedOpts.height=imgPreloader.height,$("<img />").attr({id:"fancybox-img",src:imgPreloader.src,alt:selectedOpts.title}).appendTo(tmp),_show()},_show=function(){var pos,equal;return loading.hide(),wrap.is(":visible")&&!1===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)?($.event.trigger("fancybox-cancel"),void(busy=!1)):(busy=!0,$(content.add(overlay)).unbind(),$(window).unbind("resize.fb scroll.fb"),$(document).unbind("keydown.fb"),wrap.is(":visible")&&"outside"!==currentOpts.titlePosition&&wrap.css("height",wrap.height()),currentArray=selectedArray,currentIndex=selectedIndex,currentOpts=selectedOpts,currentOpts.overlayShow?(overlay.css({"background-color":currentOpts.overlayColor,opacity:currentOpts.overlayOpacity,cursor:currentOpts.hideOnOverlayClick?"pointer":"auto",height:$(document).height()}),overlay.is(":visible")||(isIE6&&$("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),overlay.show())):overlay.hide(),final_pos=_get_zoom_to(),_process_title(),wrap.is(":visible")?($(close.add(nav_left).add(nav_right)).hide(),pos=wrap.position(),start_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()},equal=start_pos.width==final_pos.width&&start_pos.height==final_pos.height,void content.fadeTo(currentOpts.changeFade,.3,function(){var finish_resizing=function(){content.html(tmp.contents()).fadeTo(currentOpts.changeFade,1,_finish)};$.event.trigger("fancybox-change"),content.empty().removeAttr("filter").css({"border-width":currentOpts.padding,width:final_pos.width-2*currentOpts.padding,height:selectedOpts.autoDimensions?"auto":final_pos.height-titleHeight-2*currentOpts.padding}),equal?finish_resizing():(fx.prop=0,$(fx).animate({prop:1},{duration:currentOpts.changeSpeed,easing:currentOpts.easingChange,step:_draw,complete:finish_resizing}))})):(wrap.removeAttr("style"),content.css("border-width",currentOpts.padding),"elastic"==currentOpts.transitionIn?(start_pos=_get_zoom_from(),content.html(tmp.contents()),wrap.show(),currentOpts.opacity&&(final_pos.opacity=0),fx.prop=0,void $(fx).animate({prop:1},{duration:currentOpts.speedIn,easing:currentOpts.easingIn,step:_draw,complete:_finish})):("inside"==currentOpts.titlePosition&&titleHeight>0&&title.show(),content.css({width:final_pos.width-2*currentOpts.padding,height:selectedOpts.autoDimensions?"auto":final_pos.height-titleHeight-2*currentOpts.padding}).html(tmp.contents()),void wrap.css(final_pos).fadeIn("none"==currentOpts.transitionIn?0:currentOpts.speedIn,_finish))))},_format_title=function(title){return title&&title.length?"float"==currentOpts.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+currentOpts.titlePosition+'">'+title+"</div>":!1},_process_title=function(){if(titleStr=currentOpts.title||"",titleHeight=0,title.empty().removeAttr("style").removeClass(),currentOpts.titleShow===!1)return void title.hide();if(titleStr=$.isFunction(currentOpts.titleFormat)?currentOpts.titleFormat(titleStr,currentArray,currentIndex,currentOpts):_format_title(titleStr),!titleStr||""===titleStr)return void title.hide();switch(title.addClass("fancybox-title-"+currentOpts.titlePosition).html(titleStr).appendTo("body").show(),currentOpts.titlePosition){case"inside":title.css({width:final_pos.width-2*currentOpts.padding,marginLeft:currentOpts.padding,marginRight:currentOpts.padding}),titleHeight=title.outerHeight(!0),title.appendTo(outer),final_pos.height+=titleHeight;break;case"over":title.css({marginLeft:currentOpts.padding,width:final_pos.width-2*currentOpts.padding,bottom:currentOpts.padding}).appendTo(outer);break;case"float":title.css("left",-1*parseInt((title.width()-final_pos.width-40)/2,10)).appendTo(wrap);break;default:title.css({width:final_pos.width-2*currentOpts.padding,paddingLeft:currentOpts.padding,paddingRight:currentOpts.padding}).appendTo(wrap)}title.hide()},_set_navigation=function(){return(currentOpts.enableEscapeButton||currentOpts.enableKeyboardNav)&&$(document).bind("keydown.fb",function(e){27==e.keyCode&&currentOpts.enableEscapeButton?(e.preventDefault(),$.fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!currentOpts.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),$.fancybox[37==e.keyCode?"prev":"next"]())}),currentOpts.showNavArrows?((currentOpts.cyclic&&currentArray.length>1||0!==currentIndex)&&nav_left.show(),void((currentOpts.cyclic&&currentArray.length>1||currentIndex!=currentArray.length-1)&&nav_right.show())):(nav_left.hide(),void nav_right.hide())},_finish=function(){$.support.opacity||(content.get(0).style.removeAttribute("filter"),wrap.get(0).style.removeAttribute("filter")),selectedOpts.autoDimensions&&content.css("height","auto"),wrap.css("height","auto"),titleStr&&titleStr.length&&title.show(),currentOpts.showCloseButton&&close.show(),_set_navigation(),currentOpts.hideOnContentClick&&content.bind("click",$.fancybox.close),currentOpts.hideOnOverlayClick&&overlay.bind("click",$.fancybox.close),$(window).bind("resize.fb",$.fancybox.resize),currentOpts.centerOnScroll&&$(window).bind("scroll.fb",$.fancybox.center),"iframe"==currentOpts.type&&$('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+($.browser.msie?'allowtransparency="true""':"")+' scrolling="'+selectedOpts.scrolling+'" src="'+currentOpts.href+'"></iframe>').appendTo(content),wrap.show(),busy=!1,$.fancybox.center(),currentOpts.onComplete(currentArray,currentIndex,currentOpts),_preload_images()},_preload_images=function(){var href,objNext;currentArray.length-1>currentIndex&&(href=currentArray[currentIndex+1].href,"undefined"!=typeof href&&href.match(imgRegExp)&&(objNext=new Image,objNext.src=href)),currentIndex>0&&(href=currentArray[currentIndex-1].href,"undefined"!=typeof href&&href.match(imgRegExp)&&(objNext=new Image,objNext.src=href))},_draw=function(pos){var dim={width:parseInt(start_pos.width+(final_pos.width-start_pos.width)*pos,10),height:parseInt(start_pos.height+(final_pos.height-start_pos.height)*pos,10),top:parseInt(start_pos.top+(final_pos.top-start_pos.top)*pos,10),left:parseInt(start_pos.left+(final_pos.left-start_pos.left)*pos,10)};"undefined"!=typeof final_pos.opacity&&(dim.opacity=.5>pos?.5:pos),wrap.css(dim),content.css({width:dim.width-2*currentOpts.padding,height:dim.height-titleHeight*pos-2*currentOpts.padding})},_get_viewport=function(){return[$(window).width()-2*currentOpts.margin,$(window).height()-2*currentOpts.margin,$(document).scrollLeft()+currentOpts.margin,$(document).scrollTop()+currentOpts.margin]},_get_zoom_to=function(){var ratio,view=_get_viewport(),to={},resize=currentOpts.autoScale,double_padding=2*currentOpts.padding;return currentOpts.width.toString().indexOf("%")>-1?to.width=parseInt(view[0]*parseFloat(currentOpts.width)/100,10):to.width=currentOpts.width+double_padding,currentOpts.height.toString().indexOf("%")>-1?to.height=parseInt(view[1]*parseFloat(currentOpts.height)/100,10):to.height=currentOpts.height+double_padding,resize&&(to.width>view[0]||to.height>view[1])&&("image"==selectedOpts.type||"swf"==selectedOpts.type?(ratio=currentOpts.width/currentOpts.height,to.width>view[0]&&(to.width=view[0],to.height=parseInt((to.width-double_padding)/ratio+double_padding,10)),to.height>view[1]&&(to.height=view[1],to.width=parseInt((to.height-double_padding)*ratio+double_padding,10))):(to.width=Math.min(to.width,view[0]),to.height=Math.min(to.height,view[1]))),to.top=parseInt(Math.max(view[3]-20,view[3]+.5*(view[1]-to.height-40)),10),to.left=parseInt(Math.max(view[2]-20,view[2]+.5*(view[0]-to.width-40)),10),to},_get_obj_pos=function(obj){var pos=obj.offset();return pos.top+=parseInt(obj.css("paddingTop"),10)||0,pos.left+=parseInt(obj.css("paddingLeft"),10)||0,pos.top+=parseInt(obj.css("border-top-width"),10)||0,pos.left+=parseInt(obj.css("border-left-width"),10)||0,pos.width=obj.width(),pos.height=obj.height(),pos},_get_zoom_from=function(){var pos,view,orig=selectedOpts.orig?$(selectedOpts.orig):!1,from={};return orig&&orig.length?(pos=_get_obj_pos(orig),from={width:pos.width+2*currentOpts.padding,height:pos.height+2*currentOpts.padding,top:pos.top-currentOpts.padding-20,left:pos.left-currentOpts.padding-20}):(view=_get_viewport(),from={width:2*currentOpts.padding,height:2*currentOpts.padding,top:parseInt(view[3]+.5*view[1],10),left:parseInt(view[2]+.5*view[0],10)}),from},_animate_loading=function(){return loading.is(":visible")?($("div",loading).css("top",-40*loadingFrame+"px"),void(loadingFrame=(loadingFrame+1)%12)):void clearInterval(loadingTimer)};$.fn.fancybox=function(options){return $(this).length?($(this).data("fancybox",$.extend({},options,$.metadata?$(this).metadata():{})).unbind("click.fb").bind("click.fb",function(e){if(e.preventDefault(),!busy){busy=!0,$(this).blur(),selectedArray=[],selectedIndex=0;var rel=$(this).attr("rel")||"";rel&&""!=rel&&"nofollow"!==rel?(selectedArray=$("a[rel="+rel+"], area[rel="+rel+"]"),selectedIndex=selectedArray.index(this)):selectedArray.push(this),_start()}}),this):this},$.fancybox=function(obj){var opts;if(!busy){if(busy=!0,opts="undefined"!=typeof arguments[1]?arguments[1]:{},selectedArray=[],selectedIndex=parseInt(opts.index,10)||0,$.isArray(obj)){for(var i=0,j=obj.length;j>i;i++)"object"==typeof obj[i]?$(obj[i]).data("fancybox",$.extend({},opts,obj[i])):obj[i]=$({}).data("fancybox",$.extend({content:obj[i]},opts));selectedArray=jQuery.merge(selectedArray,obj)}else"object"==typeof obj?$(obj).data("fancybox",$.extend({},opts,obj)):obj=$({}).data("fancybox",$.extend({content:obj},opts)),selectedArray.push(obj);(selectedIndex>selectedArray.length||0>selectedIndex)&&(selectedIndex=0),_start()}},$.fancybox.showActivity=function(){clearInterval(loadingTimer),loading.show(),loadingTimer=setInterval(_animate_loading,66)},$.fancybox.hideActivity=function(){loading.hide()},$.fancybox.next=function(){return $.fancybox.pos(currentIndex+1)},$.fancybox.prev=function(){return $.fancybox.pos(currentIndex-1)},$.fancybox.pos=function(pos){busy||(pos=parseInt(pos),selectedArray=currentArray,pos>-1&&pos<currentArray.length?(selectedIndex=pos,_start()):currentOpts.cyclic&&currentArray.length>1&&(selectedIndex=pos>=currentArray.length?0:currentArray.length-1,_start()))},$.fancybox.cancel=function(){busy||(busy=!0,$.event.trigger("fancybox-cancel"),_abort(),selectedOpts.onCancel(selectedArray,selectedIndex,selectedOpts),busy=!1)},$.fancybox.close=function(){function _cleanup(){overlay.fadeOut("fast"),title.empty().hide(),wrap.hide(),$.event.trigger("fancybox-cleanup"),content.empty(),currentOpts.onClosed(currentArray,currentIndex,currentOpts),currentArray=selectedOpts=[],currentIndex=selectedIndex=0,currentOpts=selectedOpts={},busy=!1}if(!busy&&!wrap.is(":hidden")){if(busy=!0,currentOpts&&!1===currentOpts.onCleanup(currentArray,currentIndex,currentOpts))return void(busy=!1);if(_abort(),$(close.add(nav_left).add(nav_right)).hide(),$(content.add(overlay)).unbind(),$(window).unbind("resize.fb scroll.fb"),$(document).unbind("keydown.fb"),content.find("iframe").attr("src",isIE6&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==currentOpts.titlePosition&&title.empty(),wrap.stop(),"elastic"==currentOpts.transitionOut){start_pos=_get_zoom_from();var pos=wrap.position();final_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()},currentOpts.opacity&&(final_pos.opacity=1),title.empty().hide(),fx.prop=1,$(fx).animate({prop:0},{duration:currentOpts.speedOut,easing:currentOpts.easingOut,step:_draw,complete:_cleanup})}else wrap.fadeOut("none"==currentOpts.transitionOut?0:currentOpts.speedOut,_cleanup)}},$.fancybox.resize=function(){overlay.is(":visible")&&overlay.css("height",$(document).height()),$.fancybox.center(!0)},$.fancybox.center=function(){var view,align;busy||(align=arguments[0]===!0?1:0,view=_get_viewport(),!align&&(wrap.width()>view[0]||wrap.height()>view[1])||wrap.stop().animate({top:parseInt(Math.max(view[3]-20,view[3]+.5*(view[1]-content.height()-40)-currentOpts.padding)),left:parseInt(Math.max(view[2]-20,view[2]+.5*(view[0]-content.width()-40)-currentOpts.padding))},"number"==typeof arguments[0]?arguments[0]:200))},$.fancybox.init=function(){$("#fancybox-wrap").length||($("body").append(tmp=$('<div id="fancybox-tmp"></div>'),loading=$('<div id="fancybox-loading"><div></div></div>'),overlay=$('<div id="fancybox-overlay"></div>'),wrap=$('<div id="fancybox-wrap"></div>')),outer=$('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(wrap),outer.append(content=$('<div id="fancybox-content"></div>'),close=$('<a id="fancybox-close"></a>'),title=$('<div id="fancybox-title"></div>'),nav_left=$('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),nav_right=$('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),close.click($.fancybox.close),loading.click($.fancybox.cancel),nav_left.click(function(e){e.preventDefault(),$.fancybox.prev()}),nav_right.click(function(e){e.preventDefault(),$.fancybox.next()}),$.fn.mousewheel&&wrap.bind("mousewheel.fb",function(e,delta){busy?e.preventDefault():0!=$(e.target).get(0).clientHeight&&$(e.target).get(0).scrollHeight!==$(e.target).get(0).clientHeight||(e.preventDefault(),$.fancybox[delta>0?"prev":"next"]())}),$.support.opacity||wrap.addClass("fancybox-ie"),isIE6&&(loading.addClass("fancybox-ie6"),wrap.addClass("fancybox-ie6"),$('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer)))},$.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},$(document).ready(function(){$.fancybox.init()})}(jQuery),function($){function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,deltaX=0,deltaY=0;return event=$.event.fix(orgEvent),event.type="mousewheel",event.wheelDelta&&(delta=event.wheelDelta/120),event.detail&&(delta=-event.detail/3),deltaY=delta,void 0!==orgEvent.axis&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaY=0,deltaX=-1*delta),void 0!==orgEvent.wheelDeltaY&&(deltaY=orgEvent.wheelDeltaY/120),void 0!==orgEvent.wheelDeltaX&&(deltaX=-1*orgEvent.wheelDeltaX/120),args.unshift(event,delta,deltaX,deltaY),$.event.handle.apply(this,args)}var types=["DOMMouseScroll","mousewheel"];$.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var i=types.length;i;)this.addEventListener(types[--i],handler,!1);else this.onmousewheel=handler},teardown:function(){if(this.removeEventListener)for(var i=types.length;i;)this.removeEventListener(types[--i],handler,!1);else this.onmousewheel=null}},$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}(jQuery),function($){$.extend($.fn,{validate:function(options){if(!this.length)return void(options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var validator=$.data(this[0],"validator");return validator?validator:(validator=new $.validator(options,this[0]),$.data(this[0],"validator",validator),validator.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){validator.cancelSubmit=!0}),validator.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){validator.submitButton=this}),this.submit(function(event){function handle(){if(validator.settings.submitHandler){if(validator.submitButton)var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);return validator.settings.submitHandler.call(validator,validator.currentForm),validator.submitButton&&hidden.remove(),!1}return!0}return validator.settings.debug&&event.preventDefault(),validator.cancelSubmit?(validator.cancelSubmit=!1,handle()):validator.form()?validator.pendingRequest?(validator.formSubmitted=!0,!1):handle():(validator.focusInvalid(),!1)})),validator)},valid:function(){if($(this[0]).is("form"))return this.validate().form();var valid=!0,validator=$(this[0].form).validate();return this.each(function(){valid&=validator.element(this)}),valid},removeAttrs:function(attributes){var result={},$element=this;return $.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value),$element.removeAttr(value)}),result},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings,staticRules=settings.rules,existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument)),staticRules[element.name]=existingRules,argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":if(!argument)return delete staticRules[element.name],existingRules;var filtered={};return $.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method],delete existingRules[method]}),filtered}}var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required,data=$.extend({required:param},data)}return data}}),$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value)},filled:function(a){return!!$.trim(""+a.value)},unchecked:function(a){return!a.checked}}),$.validator=function(options,form){
this.settings=$.extend(!0,{},$.validator.defaults,options),this.currentForm=form,this.init()},$.validator.format=function(source,params){return 1==arguments.length?function(){var args=$.makeArray(arguments);return args.unshift(source),$.validator.format.apply(this,args)}:(arguments.length>2&&params.constructor!=Array&&(params=$.makeArray(arguments).slice(1)),params.constructor!=Array&&(params=[params]),$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n)}),source)},$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(element){this.lastActive=element,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(element)).hide())},onfocusout:function(element){this.checkable(element)||!(element.name in this.submitted)&&this.optional(element)||this.element(element)},onkeyup:function(element){(element.name in this.submitted||element==this.lastElement)&&this.element(element)},onclick:function(element){element.name in this.submitted?this.element(element):element.parentNode.name in this.submitted&&this.element(element.parentNode)},highlight:function(element,errorClass,validClass){$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){$(element).removeClass(errorClass).addClass(validClass)}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator&&validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0])}this.labelContainer=$(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm),this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var groups=this.groups={};$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key})});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)}),$(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",delegate).validateDelegate(":radio, :checkbox, select, option","click",delegate),this.settings.invalidHandler&&$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.valid()||$(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},element:function(element){element=this.clean(element),this.lastElement=element,this.prepareElement(element),this.currentElements=$(element);var result=this.check(element);return result?delete this.invalid[element.name]:this.invalid[element.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors),this.errorList=[];for(var name in errors)this.errorList.push({message:errors[name],element:this.findByName(name)[0]});this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){$.fn.resetForm&&$(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0;for(var i in obj)count++;return count},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&1==$.grep(this.errorList,function(n){return n.element.name==lastActive.name}).length&&lastActive},elements:function(){var validator=this,rulesCache={};return $([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in rulesCache||!validator.objectLength($(this).rules())?!1:(rulesCache[this.name]=!0,!0)})},clean:function(selector){return $(selector)[0]},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=$([]),this.toHide=$([]),this.currentElements=$([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset(),this.toHide=this.errorsFor(element)},check:function(element){element=this.clean(element),this.checkable(element)&&(element=this.findByName(element.name).not(this.settings.ignore)[0]);var rules=$(element).rules(),dependencyMismatch=!1;for(var method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if("dependency-mismatch"==result){dependencyMismatch=!0;continue}if(dependencyMismatch=!1,"pending"==result)return void(this.toHide=this.toHide.not(this.errorsFor(element)));if(!result)return this.formatAndAdd(element,rule),!1}catch(e){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id+", check the '"+rule.method+"' method",e),e}}return dependencyMismatch?void 0:(this.objectLength(rules)&&this.successList.push(element),!0)},customMetaMessage:function(element,method){if($.metadata){var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method]}},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||void 0,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;"function"==typeof message?message=message.call(this,rule.parameters,element):theregex.test(message)&&(message=jQuery.format(message.replace(theregex,"{$1}"),rule.parameters)),this.errorList.push({message:message,element:element}),this.errorMap[element.name]=message,this.submitted[element.name]=message},addWrapper:function(toToggle){return this.settings.wrapper&&(toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))),toToggle},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass),this.showLabel(error.element,error.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(var i=0,elements=this.validElements();elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var label=this.errorsFor(element);label.length?(label.removeClass().addClass(this.settings.errorClass),label.attr("generated")&&label.html(message)):(label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:!0}).addClass(this.settings.errorClass).html(message||""),this.settings.wrapper&&(label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(label).length||(this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element))),!message&&this.settings.success&&(label.text(""),"string"==typeof this.settings.success?label.addClass(this.settings.success):this.settings.success(label)),this.toShow=this.toShow.add(label)},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")==name})},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null})},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):!0},dependTypes:{"boolean":function(param,element){return param},string:function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch"},startRequest:function(element){this.pending[element.name]||(this.pendingRequest++,this.pending[element.name]=!0)},stopRequest:function(element,valid){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[element.name],valid&&0==this.pendingRequest&&this.formSubmitted&&this.form()?($(this.currentForm).submit(),this.formSubmitted=!1):!valid&&0==this.pendingRequest&&this.formSubmitted&&($(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className)},classRules:function(element){var rules={},classes=$(element).attr("class");return classes&&$.each(classes.split(" "),function(){this in $.validator.classRuleSettings&&$.extend(rules,$.validator.classRuleSettings[this])}),rules},attributeRules:function(element){var rules={},$element=$(element);for(var method in $.validator.methods){var value=$element.attr(method);value&&(rules[method]=value)}return rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)&&delete rules.maxlength,rules},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,"validator").settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata()},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");return validator.settings.rules&&(rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}),rules},normalizeRules:function(rules,element){return $.each(rules,function(prop,val){if(val===!1)return void delete rules[prop];if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element)}keepRule?rules[prop]=void 0!==val.param?val.param:!0:delete rules[prop]}}),$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter}),$.each(["minlength","maxlength","min","max"],function(){rules[this]&&(rules[this]=Number(rules[this]))}),$.each(["rangelength","range"],function(){rules[this]&&(rules[this]=[Number(rules[this][0]),Number(rules[this][1])])}),$.validator.autoCreateRanges&&(rules.min&&rules.max&&(rules.range=[rules.min,rules.max],delete rules.min,delete rules.max),rules.minlength&&rules.maxlength&&(rules.rangelength=[rules.minlength,rules.maxlength],delete rules.minlength,delete rules.maxlength)),rules.messages&&delete rules.messages,rules},normalizeRule:function(data){if("string"==typeof data){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0}),data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method,$.validator.messages[name]=void 0!=message?message:$.validator.messages[name],method.length<3&&$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case"select":var val=$(element).val();return val&&val.length>0;case"input":if(this.checkable(element))return this.getLength(value,element)>0;default:return $.trim(value).length>0}},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(this.settings.messages[element.name]||(this.settings.messages[element.name]={}),previous.originalMessage=this.settings.messages[element.name].remote,this.settings.messages[element.name].remote=previous.message,param="string"==typeof param&&{url:param}||param,this.pending[element.name])return"pending";if(previous.old===value)return previous.valid;previous.old=value;var validator=this;this.startRequest(element);var data={};return data[element.name]=value,$.ajax($.extend(!0,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===!0;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element),validator.formSubmitted=submitted,validator.successList.push(element),validator.showErrors()}else{var errors={},message=previous.message=response||validator.defaultMessage(element,"remote");errors[element.name]=$.isFunction(message)?message(value):message,validator.showErrors(errors)}previous.valid=valid,validator.stopRequest(element,valid)}},param)),"pending"},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||param>=value},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value)},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value))},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";if(/[^0-9-]+/.test(value))return!1;var nCheck=0,nDigit=0,bEven=!1;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n),nDigit=parseInt(cDigit,10);bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven}return nCheck%10==0},accept:function(value,element,param){return param="string"==typeof param?param.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(element)||value.match(new RegExp(".("+param+")$","i"))},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()});return value==target.val()}}}),$.format=$.validator.format}(jQuery),function($){var ajax=$.ajax,pendingRequests={};$.ajax=function(settings){settings=$.extend(settings,$.extend({},$.ajaxSettings,settings));var port=settings.port;return"abort"==settings.mode?(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=ajax.apply(this,arguments)):ajax.apply(this,arguments)}}(jQuery),function($){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||$.each({focus:"focusin",blur:"focusout"},function(original,fix){function handler(e){return e=$.event.fix(e),e.type=fix,$.event.handle.call(this,e)}$.event.special[fix]={setup:function(){this.addEventListener(original,handler,!0)},teardown:function(){this.removeEventListener(original,handler,!0)},handler:function(e){return arguments[0]=$.event.fix(e),arguments[0].type=fix,$.event.handle.apply(this,arguments)}}}),$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);return target.is(delegate)?handler.apply(target,arguments):void 0})}})}(jQuery),function($){$(function(){if($.fn.smartSubnav=function(){var sub;return this.each(function(){if(sub=$(this).find(".sub"),sub.length){var offsetRight=$("body").width()-$(this).offset().left;offsetRight<sub.width()?sub.addClass("left-sub"):sub.removeClass("left-sub")}})},$("#nav > li").smartSubnav(),$("#nav > li").hover(function(){$(this).smartSubnav()}),$("html").removeClass("no-js"),$(["#txtSearch","#Form_Form_Search"]).each(function(i,e){var searchField=$(e),currentSearch=$(e).val();searchField.focus(function(){var s=$(this);s.val()==currentSearch&&s.val(""),s&&"Search this site..."==s.val()&&s.val("")}).blur(function(){var s=$(this).val();0==s.replace(/\s+/,"").length})}),$("#header form input").focus(function(){$(this).closest("form").addClass("active")}).blur(function(){var $self=$(this);("image"==$self.attr("type")||$self.parent().is("li:last-child"))&&$(this).closest("form").removeClass("active")}),$("a#languages").fancybox({width:750,height:540,autoDimensions:!1,padding:0}),$("#servicesNav").length){var scroll_timer,top=$("#servicesNav").position().top,$window=$(window),displayed=!1,$scrollMessage=$("#scrollMessage");$scrollMessage.find("a").mouseup(function(e){return 1==e.which?(e.preventDefault(),$(document).scrollTo("#servicesNav:visible",{offset:{top:-50},duration:100}),$("#content").find(":focusable").first().focus(),!1):void 0}),$window.scroll(function(){window.clearTimeout(scroll_timer),scroll_timer=window.setTimeout(function(){$window.scrollTop()<=top?(displayed=!1,$scrollMessage.hide(),$scrollMessage.css("position","absolute")):0==displayed&&(displayed=!0,$scrollMessage.stop(),$scrollMessage.css("position","fixed"),$scrollMessage.show())},100)})}$("#SearchResults .gradient-table").each(function(){var first=$(this).find("tr.transportlinemain")[0];$('<tr><td colspan="3"><h3>Lines and routes</h3></td></tr>').insertBefore(first),first=$(this).find("tr.transportstop")[0],$('<tr><td colspan="3"><h3>Stations and stops</h3></td></tr>').insertBefore(first)}),$("a.fancylink").fancybox({hideOnContentClick:!1}),$("#print-page").show().click(function(){return window.print(),!1}),$(".js-hidden").hide(),$(".js-shown").show(),"undefined"!=typeof $.fn.chosen&&setTimeout(function(){$("select").livequery(function(){if(!($(this).hasClass("no-enhance")||$(this).parents(".noscriptJP").length>0)){var size=parseInt($(this).attr("size")),multiple=$(this).attr("multiple");if(!(size>1||multiple)){var isNext5Form=$(this).parents(".next5TabForm").length>0&&$("body.HomePage").length>0,threshold=25;isNext5Form&&(threshold=10),$(this).parents("#locationSelector").length&&(threshold=40);$(this).chosen({disable_search_threshold:threshold});isNext5Form&&$(this).parent().find(".chosen-container").removeClass("chosen-container-single").addClass("jp-select-chosen")}}})},350),$("select.redirect-select").live("change",function(){this.value&&(window.location=this.value)}),$(".content").hide(),$(".heading").click(function(e){return e.preventDefault(),$(this).hasClass("openRoute")?$(this).removeClass("openRoute"):$(this).addClass("openRoute"),$(this).next(".content").slideToggle(500),!1});var parentChain=$("#ParentChain").val();if(parentChain&&parentChain.length){var ids=parentChain.split(",");ids.length>=2&&$(".topNav-"+ids[1]).addClass("current-section")}$(document).on("ready",function(e){$(document).width()<600&&$("#nav").detach().appendTo("#MobileNavContainer")}),$(window).on("resize",function(e){$(document).width()<600?($("#MobileNavContainer").has("#nav").length||($("#nav").children("li").hide(),$("#nav").detach().appendTo("#MobileNavContainer")),$("#home-slideshow-mobile").show()):($("#MobileNavContainer").has("#nav").length&&($("#nav").children("li").show(),$("#nav").detach().appendTo("#header .wrapper")),$("#journey-holder").has(".home-journey-planner").length&&($("#journey-holder .home-journey-planner").is(":hidden")&&$("#journey-holder .home-journey-planner").show(),$("#journey-holder .home-journey-planner").first().insertBefore($(".function-panels #next5"))),$("#home-slideshow-mobile").hide())}),$("#MobileMainMenu").on("click",function(e){return e.preventDefault(),$("#nav").children("li").slideToggle(250),!1}),$("#SearchFilterDisplay").click(function(e){return e.preventDefault(),$(this).siblings(".facetHolder").toggle(),!1}),$("#ShowSubnav").click(function(e){e.preventDefault();var subnav=$("#sectionNav");return subnav.is(":visible")?$(subnav).animate({"margin-left":"-1000px"},500,function(){$(this).hide()}):(subnav.show(),subnav.animate({"margin-left":"0px"},250)),!1}),$("form.RouteForm").submit(function(){var select=$(this).find("select");if(select&&select.val()){var selected=select.val(),path=selected;path.indexOf("//")<0&&(path=$("base").attr("href")+path),location.href=path}return!1}),location.href.indexOf("cms.ptv")>=0&&$(".cms-show").show(),$(".popupLink").live("click",function(){window.open($(this).attr("href"),"_blank",$(this).attr("data-popup-params"));return!1}),$(document).on("click",".RouteForm input.action[name=action_viewroute]",function(e){var checkOn=$(this).siblings("select"),onForm=$(this).parents("form");if(onForm.find("label.error").remove(),""==checkOn.val()){var error=$('<label for="'+checkOn.attr("id")+'" generated="true" class="error" style="position: static; display: inline;">Please select a line</label>');onForm.append(error)}}),$("a").each(function(){var href=$(this).attr("href"),actions=[];if(href&&href.indexOf("://")>=0&&href.indexOf("ptv.vic.gov.au")<0&&href.indexOf("ptv.silverstripe")<0&&actions.push("navigates away from PTV"),"_blank"==$(this).attr("target")&&actions.push("opens a new window"),actions.length){var existingTitle=$(this).attr("title");existingTitle?existingTitle+=" (this link "+actions.join(", ")+")":existingTitle="This link "+actions.join(", "),$(this).attr("title",existingTitle)}})}),$("#mobile-journey").on("click",function(e){0==$("#journey-holder").has(".home-journey-planner").length&&$(".home-journey-planner").first().appendTo("#journey-holder"),$("#journey-holder").has(".home-journey-planner").length&&($("#journey-holder").slideToggle(250),e.preventDefault())}),$("*[data-category]").live("click",function(){Metlink.Utility.track($(this).attr("data-category"),$(this).attr("rel"),$(this).attr("title"))})}(jQuery),function(){var $,Lightbox,LightboxOptions;$=jQuery,LightboxOptions=function(){function LightboxOptions(){this.fileLoadingImage="themes/transport-site/images/loading.gif",this.fileCloseImage="themes/transport-site/images/close.gif",this.resizeDuration=700,this.fadeDuration=500,this.labelImage="Image",this.labelOf="of"}return LightboxOptions}(),Lightbox=function(){function Lightbox(options){this.options=options,this.album=[],this.currentImageIndex=void 0,this.init()}return Lightbox.prototype.init=function(){return this.enable(),this.build()},Lightbox.prototype.enable=function(){var _this=this;return $("body").on("click","a[rel^=lightbox], area[rel^=lightbox]",function(e){return _this.start($(e.currentTarget)),!1})},Lightbox.prototype.build=function(){var $lightbox,_this=this;$("<div>",{id:"lightboxOverlay"}).after($("<div/>",{id:"lightbox"}).append($("<div/>",{"class":"lb-outerContainer"}).append($("<div/>",{"class":"lb-container"}).append($("<img/>",{"class":"lb-image"}),$("<div/>",{"class":"lb-nav"}).append($("<a/>",{"class":"lb-prev"}),$("<a/>",{"class":"lb-next"})),$("<div/>",{"class":"lb-loader"}).append($("<a/>",{"class":"lb-cancel"}).append($("<img/>",{src:this.options.fileLoadingImage}))))),$("<div/>",{"class":"lb-dataContainer"}).append($("<div/>",{"class":"lb-data"}).append($("<div/>",{"class":"lb-details"}).append($("<span/>",{"class":"lb-caption"}),$("<span/>",{"class":"lb-number"})),$("<div/>",{"class":"lb-closeContainer"}).append($("<a/>",{"class":"lb-close"}).append($("<img/>",{src:this.options.fileCloseImage}))))))).appendTo($("body")),$("#lightboxOverlay").hide().on("click",function(e){return _this.end(),!1}),$lightbox=$("#lightbox"),$lightbox.hide().on("click",function(e){return"lightbox"===$(e.target).attr("id")&&_this.end(),!1}),$lightbox.find(".lb-outerContainer").on("click",function(e){return"lightbox"===$(e.target).attr("id")&&_this.end(),!1}),$lightbox.find(".lb-prev").on("click",function(e){return _this.changeImage(_this.currentImageIndex-1),!1}),$lightbox.find(".lb-next").on("click",function(e){return _this.changeImage(_this.currentImageIndex+1),!1}),$lightbox.find(".lb-loader, .lb-close").on("click",function(e){return _this.end(),!1})},Lightbox.prototype.start=function($link){var $lightbox,$window,a,i,imageNumber,left,top,_len,_ref;if($(window).on("resize",this.sizeOverlay),$("select, object, embed").css({visibility:"hidden"}),$("#lightboxOverlay").width($(document).width()).height($(document).height()).fadeIn(this.options.fadeDuration),this.album=[],imageNumber=0,"lightbox"===$link.attr("rel"))this.album.push({link:$link.attr("href"),title:$link.attr("title")});else for(_ref=$($link.prop("tagName")+'[rel="'+$link.attr("rel")+'"]'),i=0,_len=_ref.length;_len>i;i++)a=_ref[i],this.album.push({link:$(a).attr("href"),title:$(a).attr("title")}),$(a).attr("href")===$link.attr("href")&&(imageNumber=i);$window=$(window),top=$window.scrollTop()+$window.height()/10,left=$window.scrollLeft(),$lightbox=$("#lightbox"),$lightbox.css({top:top+"px",left:left+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(imageNumber)},Lightbox.prototype.changeImage=function(imageNumber){var $image,$lightbox,preloader,_this=this;this.disableKeyboardNav(),$lightbox=$("#lightbox"),$image=$lightbox.find(".lb-image"),this.sizeOverlay(),$("#lightboxOverlay").fadeIn(this.options.fadeDuration),$(".loader").fadeIn("slow"),$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),$lightbox.find(".lb-outerContainer").addClass("animating"),preloader=new Image,preloader.onload=function(){return $image.attr("src",_this.album[imageNumber].link),$image.width=preloader.width,$image.height=preloader.height,_this.sizeContainer(preloader.width,preloader.height)},preloader.src=this.album[imageNumber].link,this.currentImageIndex=imageNumber},Lightbox.prototype.sizeOverlay=function(){return $("#lightboxOverlay").width($(document).width()).height($(document).height())},Lightbox.prototype.sizeContainer=function(imageWidth,imageHeight){var $container,$lightbox,$outerContainer,containerBottomPadding,containerLeftPadding,containerRightPadding,containerTopPadding,newHeight,newWidth,oldHeight,oldWidth,_this=this;
$lightbox=$("#lightbox"),$outerContainer=$lightbox.find(".lb-outerContainer"),oldWidth=$outerContainer.outerWidth(),oldHeight=$outerContainer.outerHeight(),$container=$lightbox.find(".lb-container"),containerTopPadding=parseInt($container.css("padding-top"),10),containerRightPadding=parseInt($container.css("padding-right"),10),containerBottomPadding=parseInt($container.css("padding-bottom"),10),containerLeftPadding=parseInt($container.css("padding-left"),10),newWidth=imageWidth+containerLeftPadding+containerRightPadding,newHeight=imageHeight+containerTopPadding+containerBottomPadding,newWidth!==oldWidth&&newHeight!==oldHeight?$outerContainer.animate({width:newWidth,height:newHeight},this.options.resizeDuration,"swing"):newWidth!==oldWidth?$outerContainer.animate({width:newWidth},this.options.resizeDuration,"swing"):newHeight!==oldHeight&&$outerContainer.animate({height:newHeight},this.options.resizeDuration,"swing"),setTimeout(function(){$lightbox.find(".lb-dataContainer").width(newWidth),$lightbox.find(".lb-prevLink").height(newHeight),$lightbox.find(".lb-nextLink").height(newHeight),_this.showImage()},this.options.resizeDuration)},Lightbox.prototype.showImage=function(){var $lightbox;$lightbox=$("#lightbox"),$lightbox.find(".lb-loader").hide(),$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},Lightbox.prototype.updateNav=function(){var $lightbox;$lightbox=$("#lightbox"),$lightbox.find(".lb-nav").show(),this.currentImageIndex>0&&$lightbox.find(".lb-prev").show(),this.currentImageIndex<this.album.length-1&&$lightbox.find(".lb-next").show()},Lightbox.prototype.updateDetails=function(){var $lightbox,_this=this;$lightbox=$("#lightbox"),"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast"),this.album.length>1?$lightbox.find(".lb-number").html(this.options.labelImage+" "+(this.currentImageIndex+1)+" "+this.options.labelOf+"  "+this.album.length).fadeIn("fast"):$lightbox.find(".lb-number").hide(),$lightbox.find(".lb-outerContainer").removeClass("animating"),$lightbox.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return _this.sizeOverlay()})},Lightbox.prototype.preloadNeighboringImages=function(){var preloadNext,preloadPrev;this.album.length>this.currentImageIndex+1&&(preloadNext=new Image,preloadNext.src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&(preloadPrev=new Image,preloadPrev.src=this.album[this.currentImageIndex-1].link)},Lightbox.prototype.enableKeyboardNav=function(){$(document).on("keyup.keyboard",$.proxy(this.keyboardAction,this))},Lightbox.prototype.disableKeyboardNav=function(){$(document).off(".keyboard")},Lightbox.prototype.keyboardAction=function(event){var KEYCODE_ESC,KEYCODE_LEFTARROW,KEYCODE_RIGHTARROW,key,keycode;KEYCODE_ESC=27,KEYCODE_LEFTARROW=37,KEYCODE_RIGHTARROW=39,keycode=event.keyCode,key=String.fromCharCode(keycode).toLowerCase(),keycode===KEYCODE_ESC||key.match(/x|o|c/)?this.end():"p"===key||keycode===KEYCODE_LEFTARROW?0!==this.currentImageIndex&&this.changeImage(this.currentImageIndex-1):"n"!==key&&keycode!==KEYCODE_RIGHTARROW||this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)},Lightbox.prototype.end=function(){return this.disableKeyboardNav(),$(window).off("resize",this.sizeOverlay),$("#lightbox").fadeOut(this.options.fadeDuration),$("#lightboxOverlay").fadeOut(this.options.fadeDuration),$("select, object, embed").css({visibility:"visible"})},Lightbox}(),$(function(){var lightbox,options;return options=new LightboxOptions,lightbox=new Lightbox(options)})}.call(this),function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(child){return"OPTGROUP"===child.nodeName.toUpperCase()?this.add_group(child):this.add_option(child)},SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;for(group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:this.escapeExpression(group.label),children:0,disabled:group.disabled,classes:group.className}),_ref=group.childNodes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],_results.push(this.add_option(option,group_position,group.disabled));return _results},SelectParser.prototype.add_option=function(option,group_position,group_disabled){return"OPTION"===option.nodeName.toUpperCase()?(""!==option.text?(null!=group_position&&(this.parsed[group_position].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===!0?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;return null==text||text===!1?"":/[\&\<\>\"\'\`]/.test(text)?(map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g,text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;"})):text},SelectParser}(),SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;for(parser=new SelectParser,_ref=select.childNodes,_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],parser.add_node(child);return parser.parsed},AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field,this.options=null!=options?options:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return AbstractChosen.prototype.set_default_values=function(){var _this=this;return this.click_test_action=function(evt){return _this.test_active_click(evt)},this.activate_action=function(evt){return _this.activate_field(evt)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.unique_id="chosen-id-"+Math.random().toString(36).substring(2,6),this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},AbstractChosen.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(evt){var _this=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return _this.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;for(content="",_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)data=_ref[_i],content+=data.group?this.result_add_group(data):this.result_add_option(data),(null!=options?options.first:void 0)&&(data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&this.single_set_selected_text(data.text));return content},AbstractChosen.prototype.result_add_option=function(option){var classes,option_el;return option.search_match&&this.include_option_in_results(option)?(classes=[],option.disabled||option.selected&&this.is_multiple||classes.push("active-result"),!option.disabled||option.selected&&this.is_multiple||classes.push("disabled-result"),option.selected&&classes.push("result-selected"),null!=option.group_array_index&&classes.push("group-option"),""!==option.classes&&classes.push(option.classes),option_el=document.createElement("li"),option_el.id=this.unique_id+"-"+option.array_index,option_el.className=classes.join(" "),option_el.style.cssText=option.style,option_el.setAttribute("data-option-array-index",option.array_index),option_el.setAttribute("role","option"),option_el.setAttribute("tabindex","-1"),option_el.innerHTML=option.search_text,this.outerHTML(option_el)):""},AbstractChosen.prototype.result_add_group=function(group){var classes,group_el;return(group.search_match||group.group_match)&&group.active_options>0?(classes=[],classes.push("group-result"),group.classes&&classes.push(group.classes),group_el=document.createElement("li"),group_el.className=classes.join(" "),group_el.innerHTML=group.search_text,this.outerHTML(group_el)):""},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.reset_single_select_options=function(){var result,_i,_len,_ref,_results;for(_ref=this.results_data,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)result=_ref[_i],result.selected?_results.push(result.selected=!1):_results.push(void 0);return _results},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(evt){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var escapedSearchText,option,regex,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;for(this.no_results_clear(),results=0,searchText=this.get_search_text(),searchText=searchText.toLowerCase(),escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zregex=new RegExp(escapedSearchText,"i"),regex=this.get_search_regex(escapedSearchText),_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.search_match=!1,results_group=null,this.include_option_in_results(option)&&(option.group&&(option.group_match=!1,option.active_options=0),null!=option.group_array_index&&this.results_data[option.group_array_index]&&(results_group=this.results_data[option.group_array_index],0===results_group.active_options&&results_group.search_match&&(results+=1),results_group.active_options+=1),option.group&&!this.group_search||(option.search_text=option.group?option.label:option.text,option.search_match=this.search_string_match(option.search_text,regex,escapedSearchText),option.search_match&&!option.group&&(results+=1),option.search_match?(searchText.length&&(startpos=option.search_text.search(zregex),text=option.search_text.substr(0,startpos+searchText.length)+"</em>"+option.search_text.substr(startpos+searchText.length),option.search_text=text.substr(0,startpos)+"<em>"+text.substr(startpos)),null!=results_group&&(results_group.group_match=!0)):null!=option.group_array_index&&this.results_data[option.group_array_index].search_match&&(option.search_match=!0)));return this.result_clear_highlight(),1>results&&searchText.length?(this.update_results_content(""),this.no_results(searchText)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.get_search_regex=function(escaped_search_string){var regex_anchor;return regex_anchor=this.search_contains?"":"^",new RegExp(regex_anchor+escaped_search_string,"i")},AbstractChosen.prototype.search_string_match=function(search_string,regex,raw_search){var part,parts,_i,_len;if(regex.test(search_string))return!0;if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||0===search_string.indexOf("["))){if(search_string.toLowerCase().indexOf(raw_search)>=0)return!0;if(parts=search_string.replace(/\[|\]/g,"").split(" "),parts.length)for(_i=0,_len=parts.length;_len>_i;_i++)if(part=parts[_i],regex.test(part))return!0}},AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,_ref=this.form_field.options,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(evt){return evt.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;switch(stroke=null!=(_ref=evt.which)?_ref:evt.keyCode,this.search_field_scale(),stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(evt.preventDefault(),this.results_showing)return this.result_select(evt);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.clipboard_event_checker=function(evt){var _this=this;return setTimeout(function(){return _this.results_search()},50)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth?""+(this.form_field.offsetWidth+13)+"px":$(this.form_field).css("width")?parseInt($(this.form_field).css("width"),10)+"px":""+$(this.form_field).outerWidth()+"px"},AbstractChosen.prototype.include_option_in_results=function(option){return this.is_multiple&&!this.display_selected_options&&option.selected?!1:!this.display_disabled_options&&option.disabled?!1:!option.empty},AbstractChosen.prototype.search_results_touchstart=function(evt){return this.touch_started=!0,this.search_results_mouseover(evt)},AbstractChosen.prototype.search_results_touchmove=function(evt){return this.touch_started=!1,this.search_results_mouseout(evt)},AbstractChosen.prototype.search_results_touchend=function(evt){return this.touch_started?this.search_results_mouseup(evt):void 0},AbstractChosen.prototype.outerHTML=function(element){var tmp;return element.outerHTML?element.outerHTML:(tmp=document.createElement("div"),tmp.appendChild(element),tmp.innerHTML)},AbstractChosen.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent)},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),$=jQuery,$.fn.extend({chosen:function(options){return AbstractChosen.browser_is_supported()?this.each(function(input_field){var $this,chosen;$this=$(this),chosen=$this.data("chosen"),"destroy"===options&&chosen instanceof Chosen?chosen.destroy():chosen instanceof Chosen||$this.data("chosen",new Chosen(this,options))}):this}}),Chosen=function(_super){function Chosen(){return _ref=Chosen.__super__.constructor.apply(this,arguments)}return __extends(Chosen,_super),Chosen.prototype.setup=function(){return this.form_field_jq=$(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var container_classes,container_props;return container_classes=["chosen-container"],container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&container_classes.push(this.form_field.className),this.is_rtl&&container_classes.push("chosen-rtl"),container_props={"class":container_classes.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(container_props.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=$("<div />",container_props),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results" role="listbox" tabindex="-1"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results" role="listbox" tabindex="-1"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_results.attr("id",this.unique_id+"-listbox"),this.search_results.attr("attr-labelledby",this.unique_id),this.search_field.attr({id:this.unique_id,role:"combobox","aria-haspopup":"true","aria-owns":this.search_results.attr("id"),"aria-expanded":"false"}),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},Chosen.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var _this=this;return this.container.bind("touchstart.chosen",function(evt){_this.container_mousedown(evt)}),this.container.bind("touchend.chosen",function(evt){_this.container_mouseup(evt)}),this.container.bind("mousedown.chosen",function(evt){_this.container_mousedown(evt)}),this.container.bind("mouseup.chosen",function(evt){_this.container_mouseup(evt)}),this.container.bind("mouseenter.chosen",function(evt){_this.mouse_enter(evt)}),this.container.bind("mouseleave.chosen",function(evt){_this.mouse_leave(evt)}),this.search_results.bind("mouseup.chosen",function(evt){_this.search_results_mouseup(evt)}),this.search_results.bind("mouseover.chosen",function(evt){_this.search_results_mouseover(evt)}),this.search_results.bind("mouseout.chosen",function(evt){_this.search_results_mouseout(evt)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(evt){_this.search_results_mousewheel(evt)}),this.search_results.bind("touchstart.chosen",function(evt){_this.search_results_touchstart(evt)}),this.search_results.bind("touchmove.chosen",function(evt){_this.search_results_touchmove(evt)}),this.search_results.bind("touchend.chosen",function(evt){_this.search_results_touchend(evt)}),this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt)}),this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt)}),this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt)}),this.form_field_jq.bind("chosen:close.chosen",function(evt){_this.input_blur(evt)}),this.search_field.bind("blur.chosen",function(evt){_this.input_blur(evt)}),this.search_field.bind("keyup.chosen",function(evt){_this.keyup_checker(evt)}),this.search_field.bind("keydown.chosen",function(evt){_this.keydown_checker(evt)}),this.search_field.bind("focus.chosen",function(evt){_this.input_focus(evt)}),this.search_field.bind("cut.chosen",function(evt){_this.clipboard_event_checker(evt)}),this.search_field.bind("paste.chosen",function(evt){_this.clipboard_event_checker(evt)}),this.is_multiple?this.search_choices.bind("click.chosen",function(evt){_this.choices_click(evt)}):this.container.bind("click.chosen",function(evt){evt.preventDefault()})},Chosen.prototype.destroy=function(){return $(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(evt){return this.is_disabled||(evt&&"mousedown"===evt.type&&!this.results_showing&&evt.preventDefault(),null!=evt&&$(evt.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!evt||$(evt.target)[0]!==this.selected_item[0]&&!$(evt.target).parents("a.chosen-single").length||(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(evt){return"ABBR"!==evt.target.nodeName||this.is_disabled?void 0:this.results_reset(evt)},Chosen.prototype.search_results_mousewheel=function(evt){var delta;return evt.originalEvent&&(delta=evt.originalEvent.deltaY||-evt.originalEvent.wheelDelta||evt.originalEvent.detail),null!=delta?(evt.preventDefault(),"DOMMouseScroll"===evt.type&&(delta=40*delta),this.search_results.scrollTop(delta+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(evt){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return $(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(evt){var active_container;return active_container=$(evt.target).closest(".chosen-container"),active_container.length&&this.container[0]===active_container[0]?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),this.search_results.attr("aria-labelledby",el.attr("id")),this.search_field.attr("aria-activedescendant",el.attr("id")),maxHeight=parseInt(this.search_results.css("maxHeight"),10),visible_top=this.search_results.scrollTop(),visible_bottom=maxHeight+visible_top;try{high_top=this.result_highlight.position().top+this.search_results.scrollTop()}catch(e){high_top=this.search_results.scrollTop()}if(high_bottom=high_top+this.result_highlight.outerHeight(),high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(visible_top>high_top)return this.search_results.scrollTop(high_top)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.search_field.attr("aria-expanded",!0),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},Chosen.prototype.update_results_content=function(content){return this.search_results.html(content)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.search_field.attr("aria-expanded",!1),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(el){var ti;return this.form_field.tabIndex?(ti=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=ti):void 0},Chosen.prototype.set_label_behavior=function(){var _this=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=$("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(evt){return _this.is_multiple?_this.container_mousedown(evt):_this.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target.length?(this.result_highlight=target,this.result_select(evt),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target?this.result_do_highlight(target):void 0},Chosen.prototype.search_results_mouseout=function(evt){return $(evt.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;return choice=$("<li />",{"class":"search-choice"}).html("<span>"+item.html+"</span>"),item.disabled?choice.addClass("search-choice-disabled"):(close_link=$("<a />",{"class":"search-choice-close","data-option-array-index":item.array_index}),close_link.bind("click.chosen",function(evt){return _this.choice_destroy_link_click(evt)}),choice.append(close_link)),this.search_container.before(choice)},Chosen.prototype.choice_destroy_link_click=function(evt){return evt.preventDefault(),evt.stopPropagation(),this.is_disabled?void 0:this.choice_destroy($(evt.target))},Chosen.prototype.choice_destroy=function(link){return this.result_deselect(link[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),link.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(evt){var high,item;return this.result_highlight?(high=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?high.removeClass("active-result"):this.reset_single_select_options(),item=this.results_data[high[0].getAttribute("data-option-array-index")],item.selected=!0,this.form_field.options[item.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(item):this.single_set_selected_text(item.text),(evt.metaKey||evt.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[item.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},Chosen.prototype.single_set_selected_text=function(text){return null==text&&(text=this.default_text),text===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(text)},Chosen.prototype.result_deselect=function(pos){var result_data;return result_data=this.results_data[pos],this.form_field.options[result_data.options_index].disabled?!1:(result_data.selected=!1,this.form_field.options[result_data.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),
this.selected_item.addClass("chosen-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":$("<div/>").text($.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;return selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first(),null!=do_high?this.result_do_highlight(do_high):void 0},Chosen.prototype.no_results=function(terms){var no_results_html;return no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),no_results_html.find("span").first().html(terms),this.search_results.append(no_results_html),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var next_sib;return this.results_showing&&this.result_highlight?(next_sib=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(next_sib):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var prev_sibs;return this.results_showing||this.is_multiple?this.result_highlight?(prev_sibs=this.result_highlight.prevAll("li.active-result"),prev_sibs.length?this.result_do_highlight(prev_sibs.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(next_available_destroy=this.search_container.siblings("li.search-choice").last(),next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")?(this.pending_backstroke=next_available_destroy,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;switch(stroke=null!=(_ref1=evt.which)?_ref1:evt.keyCode,this.search_field_scale(),8!==stroke&&this.pending_backstroke&&this.clear_backstroke(),stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:this.results_showing&&evt.preventDefault();break;case 32:this.disable_search&&evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:evt.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){for(h=0,w=0,style_block="position:absolute; left: -1000px; top: -1000px; display:none;",styles=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],_i=0,_len=styles.length;_len>_i;_i++)style=styles[_i],style_block+=style+":"+this.search_field.css(style)+";";return div=$("<div />",{style:style_block}),div.text(this.search_field.val()),$("body").append(div),w=div.width()+25,div.remove(),f_width=this.container.outerWidth(),w>f_width-10&&(w=f_width-10),this.search_field.css({width:w+"px"})}},Chosen}(AbstractChosen)}.call(this),function($){$.fn.extend({customselect:function(method){var $this=$(this),prefix="";"undefined"!=typeof $this.data("prefix")&&(prefix=$this.data("prefix"));var methods={_init:function(){var self=$(this);if(!self.attr("multiple")){var container=$('<div class="custom-select"><span class="value"/></div>');container.insertAfter(self),self.appendTo(container),classes=self[0].className.split(/\s+/);for(var i=0;i<classes.length;++i){var it=classes[i];"js-"!=it.substring(0,3)&&container.addClass(it)}$.each(methods._events,function(k,v){self.on(k.replace("_"," "),methods._events[k])}),methods._events.change_keyup.call(self)}},_events:{change_keyup:function(){$(this).parent().find(".value").html(prefix+$(this).find("option:selected").text()+"&nbsp;")},focus:function(){$(this).parent().addClass("focus")},blur:function(){$(this).parent().removeClass("focus")}},destroy:function(){var self=$(this);if(self.is(".custom-select select")){var container=self.closest(".custom-select");self.insertAfter(container),container.remove(),$.each(methods._events,function(k,v){self.off(k.replace("_"," "),methods._events[k])})}}};return $this.each(function(){var self=$(this);"undefined"!=typeof methods[method]?methods[method].call(self):methods._init.call(self)}),$this}})}(jQuery);var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,h,g=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return 10>a?"0"+a:a}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,p=function(s,l){return l||(l=2),("000"+s).slice(-1*l)};$P.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},$P.setTimeToNow=function(){var n=new Date;return this.setHours(n.getHours()),this.setMinutes(n.getMinutes()),this.setSeconds(n.getSeconds()),this.setMilliseconds(n.getMilliseconds()),this},$D.today=function(){return(new Date).clearTime()},$D.compare=function(date1,date2){if(isNaN(date1)||isNaN(date2))throw new Error(date1+" - "+date2);if(date1 instanceof Date&&date2 instanceof Date)return date2>date1?-1:date1>date2?1:0;throw new TypeError(date1+" - "+date2)},$D.equals=function(date1,date2){return 0===date1.compareTo(date2)},$D.getDayNumberFromName=function(name){for(var n=$C.dayNames,m=$C.abbreviatedDayNames,o=$C.shortestDayNames,s=name.toLowerCase(),i=0;i<n.length;i++)if(n[i].toLowerCase()==s||m[i].toLowerCase()==s||o[i].toLowerCase()==s)return i;return-1},$D.getMonthNumberFromName=function(name){for(var n=$C.monthNames,m=$C.abbreviatedMonthNames,s=name.toLowerCase(),i=0;i<n.length;i++)if(n[i].toLowerCase()==s||m[i].toLowerCase()==s)return i;return-1},$D.isLeapYear=function(year){return year%4===0&&year%100!==0||year%400===0},$D.getDaysInMonth=function(year,month){return[31,$D.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},$D.getTimezoneAbbreviation=function(offset){for(var z=$C.timezones,i=0;i<z.length;i++)if(z[i].offset===offset)return z[i].name;return null},$D.getTimezoneOffset=function(name){for(var z=$C.timezones,i=0;i<z.length;i++)if(z[i].name===name.toUpperCase())return z[i].offset;return null},$P.clone=function(){return new Date(this.getTime())},$P.compareTo=function(date){return Date.compare(this,date)},$P.equals=function(date){return Date.equals(this,date||new Date)},$P.between=function(start,end){return this.getTime()>=start.getTime()&&this.getTime()<=end.getTime()},$P.isAfter=function(date){return 1===this.compareTo(date||new Date)},$P.isBefore=function(date){return-1===this.compareTo(date||new Date)},$P.isToday=function(){return this.isSameDay(new Date)},$P.isSameDay=function(date){return this.clone().clearTime().equals(date.clone().clearTime())},$P.addMilliseconds=function(value){return this.setMilliseconds(this.getMilliseconds()+value),this},$P.addSeconds=function(value){return this.addMilliseconds(1e3*value)},$P.addMinutes=function(value){return this.addMilliseconds(6e4*value)},$P.addHours=function(value){return this.addMilliseconds(36e5*value)},$P.addDays=function(value){return this.setDate(this.getDate()+value),this},$P.addWeeks=function(value){return this.addDays(7*value)},$P.addMonths=function(value){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+value),this.setDate(Math.min(n,$D.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},$P.addYears=function(value){return this.addMonths(12*value)},$P.add=function(config){if("number"==typeof config)return this._orient=config,this;var x=config;return x.milliseconds&&this.addMilliseconds(x.milliseconds),x.seconds&&this.addSeconds(x.seconds),x.minutes&&this.addMinutes(x.minutes),x.hours&&this.addHours(x.hours),x.weeks&&this.addWeeks(x.weeks),x.months&&this.addMonths(x.months),x.years&&this.addYears(x.years),x.days&&this.addDays(x.days),this};var $y,$m,$d;$P.getWeek=function(){var a,b,c,d,e,f,g,n,s,w;return $y=$y?$y:this.getFullYear(),$m=$m?$m:this.getMonth()+1,$d=$d?$d:this.getDate(),2>=$m?(a=$y-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),s=b-c,e=0,f=$d-1+31*($m-1)):(a=$y,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),s=b-c,e=s+1,f=$d+(153*($m-3)+2)/5+58+s),g=(a+b)%7,d=(f+g-e)%7,n=f+3-d|0,w=0>n?53-((g-s)/5|0):n>364+s?1:(n/7|0)+1,$y=$m=$d=null,w},$P.getISOWeek=function(){return $y=this.getUTCFullYear(),$m=this.getUTCMonth()+1,$d=this.getUTCDate(),p(this.getWeek())},$P.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek())},$D._validate=function(n,min,max,name){if("undefined"==typeof n)return!1;if("number"!=typeof n)throw new TypeError(n+" is not a Number.");if(min>n||n>max)throw new RangeError(n+" is not a valid value for "+name+".");return!0},$D.validateMillisecond=function(value){return $D._validate(value,0,999,"millisecond")},$D.validateSecond=function(value){return $D._validate(value,0,59,"second")},$D.validateMinute=function(value){return $D._validate(value,0,59,"minute")},$D.validateHour=function(value){return $D._validate(value,0,23,"hour")},$D.validateDay=function(value,year,month){return $D._validate(value,1,$D.getDaysInMonth(year,month),"day")},$D.validateMonth=function(value){return $D._validate(value,0,11,"month")},$D.validateYear=function(value){return $D._validate(value,0,9999,"year")},$P.set=function(config){return $D.validateMillisecond(config.millisecond)&&this.addMilliseconds(config.millisecond-this.getMilliseconds()),$D.validateSecond(config.second)&&this.addSeconds(config.second-this.getSeconds()),$D.validateMinute(config.minute)&&this.addMinutes(config.minute-this.getMinutes()),$D.validateHour(config.hour)&&this.addHours(config.hour-this.getHours()),$D.validateMonth(config.month)&&this.addMonths(config.month-this.getMonth()),$D.validateYear(config.year)&&this.addYears(config.year-this.getFullYear()),$D.validateDay(config.day,this.getFullYear(),this.getMonth())&&this.addDays(config.day-this.getDate()),config.timezone&&this.setTimezone(config.timezone),config.timezoneOffset&&this.setTimezoneOffset(config.timezoneOffset),config.week&&$D._validate(config.week,0,53,"week")&&this.setWeek(config.week),this},$P.moveToFirstDayOfMonth=function(){return this.set({day:1})},$P.moveToLastDayOfMonth=function(){return this.set({day:$D.getDaysInMonth(this.getFullYear(),this.getMonth())})},$P.moveToNthOccurrence=function(dayOfWeek,occurrence){var shift=0;if(occurrence>0)shift=occurrence-1;else if(-1===occurrence)return this.moveToLastDayOfMonth(),this.getDay()!==dayOfWeek&&this.moveToDayOfWeek(dayOfWeek,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(dayOfWeek,1).addWeeks(shift)},$P.moveToDayOfWeek=function(dayOfWeek,orient){var diff=(dayOfWeek-this.getDay()+7*(orient||1))%7;return this.addDays(0===diff?diff+=7*(orient||1):diff)},$P.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||1))%12;return this.addMonths(0===diff?diff+=12*(orient||1):diff)},$P.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},$P.getTimezone=function(){return $D.getTimezoneAbbreviation(this.getUTCOffset())},$P.setTimezoneOffset=function(offset){var here=this.getTimezoneOffset(),there=-6*Number(offset)/10;return this.addMinutes(there-here)},$P.setTimezone=function(offset){return this.setTimezoneOffset($D.getTimezoneOffset(offset))},$P.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},$P.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},$P.getUTCOffset=function(){var r,n=-10*this.getTimezoneOffset()/6;return 0>n?(r=(n-1e4).toString(),r.charAt(0)+r.substr(2)):(r=(n+1e4).toString(),"+"+r.substr(1))},$P.getElapsed=function(date){return(date||new Date)-this},$P.toISOString||($P.toISOString=function(){function f(n){return 10>n?"0"+n:n}return'"'+this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+'Z"'}),$P._toString=$P.toString,$P.toString=function(format){var x=this;if(format&&1==format.length){var c=$C.formatPatterns;switch(x.t=x.toString,format){case"d":return x.t(c.shortDate);case"D":return x.t(c.longDate);case"F":return x.t(c.fullDateTime);case"m":return x.t(c.monthDay);case"r":return x.t(c.rfc1123);case"s":return x.t(c.sortableDateTime);case"t":return x.t(c.shortTime);case"T":return x.t(c.longTime);case"u":return x.t(c.universalSortableDateTime);case"y":return x.t(c.yearMonth)}}var ord=function(n){switch(1*n){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return format?format.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(m){if("\\"===m.charAt(0))return m.replace("\\","");switch(x.h=x.getHours,m){case"hh":return p(x.h()<13?0===x.h()?12:x.h():x.h()-12);case"h":return x.h()<13?0===x.h()?12:x.h():x.h()-12;case"HH":return p(x.h());case"H":return x.h();case"mm":return p(x.getMinutes());case"m":return x.getMinutes();case"ss":return p(x.getSeconds());case"s":return x.getSeconds();case"yyyy":return p(x.getFullYear(),4);case"yy":return p(x.getFullYear());case"dddd":return $C.dayNames[x.getDay()];case"ddd":return $C.abbreviatedDayNames[x.getDay()];case"dd":return p(x.getDate());case"d":return x.getDate();case"MMMM":return $C.monthNames[x.getMonth()];case"MMM":return $C.abbreviatedMonthNames[x.getMonth()];case"MM":return p(x.getMonth()+1);case"M":return x.getMonth()+1;case"t":return x.h()<12?$C.amDesignator.substring(0,1):$C.pmDesignator.substring(0,1);case"tt":return x.h()<12?$C.amDesignator:$C.pmDesignator;case"S":return ord(x.getDate());default:return m}}):this._toString()}}(),function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$N=Number.prototype;$P._orient=1,$P._nth=null,$P._is=!1,$P._same=!1,$P._isSecond=!1,$N._dateElement="day",$P.next=function(){return this._orient=1,this},$D.next=function(){return $D.today().next()},$P.last=$P.prev=$P.previous=function(){return this._orient=-1,this},$D.last=$D.prev=$D.previous=function(){return $D.today().last()},$P.is=function(){return this._is=!0,this},$P.same=function(){return this._same=!0,this._isSecond=!1,this},$P.today=function(){return this.same().day()},$P.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},$P.at=function(time){return"string"==typeof time?$D.parse(this.toString("d")+" "+time):this.set(time)},$N.fromNow=$N.after=function(date){var c={};return c[this._dateElement]=this,(date?date.clone():new Date).add(c)},$N.ago=$N.before=function(date){var c={};return c[this._dateElement]=-1*this,(date?date.clone():new Date).add(c)};var de,dx="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),mx="january february march april may june july august september october november december".split(/\s/),px="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),pxf="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),nth="final first second third fourth fifth".split(/\s/);$P.toObject=function(){for(var o={},i=0;i<px.length;i++)o[px[i].toLowerCase()]=this["get"+pxf[i]]();return o},$D.fromObject=function(config){return config.week=null,Date.today().set(config)};for(var df=function(n){return function(){if(this._is)return this._is=!1,this.getDay()==n;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var ntemp=this._nth;this._nth=null;var temp=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(n,ntemp),this>temp)throw new RangeError($D.getDayName(n)+" does not occur "+ntemp+" times in the month of "+$D.getMonthName(temp.getMonth())+" "+temp.getFullYear()+".");return this}return this.moveToDayOfWeek(n,this._orient)}},sdf=function(n){return function(){var t=$D.today(),shift=n-t.getDay();return 0===n&&1===$C.firstDayOfWeek&&0!==t.getDay()&&(shift+=7),t.addDays(shift)}},i=0;i<dx.length;i++)$D[dx[i].toUpperCase()]=$D[dx[i].toUpperCase().substring(0,3)]=i,$D[dx[i]]=$D[dx[i].substring(0,3)]=sdf(i),$P[dx[i]]=$P[dx[i].substring(0,3)]=df(i);for(var mf=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},smf=function(n){return function(){return $D.today().set({month:n,day:1})}},j=0;j<mx.length;j++)$D[mx[j].toUpperCase()]=$D[mx[j].toUpperCase().substring(0,3)]=j,$D[mx[j]]=$D[mx[j].substring(0,3)]=smf(j),$P[mx[j]]=$P[mx[j].substring(0,3)]=mf(j);for(var ef=function(j){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var o1=this.toObject(),o2=(arguments[0]||new Date).toObject(),v="",k=j.toLowerCase(),m=px.length-1;m>-1;m--){if(v=px[m].toLowerCase(),o1[v]!=o2[v])return!1;if(k==v)break}return!0}return"s"!=j.substring(j.length-1)&&(j+="s"),this["add"+j](this._orient)}},nf=function(n){return function(){return this._dateElement=n,this}},k=0;k<px.length;k++)de=px[k].toLowerCase(),$P[de]=$P[de+"s"]=ef(px[k]),$N[de]=$N[de+"s"]=nf(de);$P._ss=ef("Second");for(var nthfn=function(n){return function(dayOfWeek){return this._same?this._ss(arguments[0]):dayOfWeek||0===dayOfWeek?this.moveToNthOccurrence(dayOfWeek,n):(this._nth=n,2!==n||void 0!==dayOfWeek&&null!==dayOfWeek?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},l=0;l<nth.length;l++)$P[nth[l]]=nthfn(0===l?-1:l)}(),function(){Date.Parsing={Exception:function(s){this.message="Parse error at '"+s.substring(0,10)+" ...'"}};for(var $P=Date.Parsing,_=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx)return[mx[0],s.substring(mx[0].length)];throw new $P.Exception(s)}},token:function(s){return function(s){return _.rtoken(new RegExp("^s*"+s+"s*"))(s)}},stoken:function(s){return _.rtoken(new RegExp("^"+s))},until:function(p){return function(s){for(var qx=[],rx=null;s.length;){try{rx=p.call(this,s)}catch(e){qx.push(rx[0]),s=rx[1];continue}break}return[qx,s]}},many:function(p){return function(s){for(var rx=[],r=null;s.length;){try{r=p.call(this,s)}catch(e){return[rx,s]}rx.push(r[0]),s=r[1]}return[rx,s]}},optional:function(p){return function(s){var r=null;try{r=p.call(this,s)}catch(e){return[null,s]}return[r[0],r[1]]}},not:function(p){return function(s){try{p.call(this,s)}catch(e){return[null,s]}throw new $P.Exception(s)}},ignore:function(p){return p?function(s){var r=null;return r=p.call(this,s),[null,r[1]]}:null},product:function(){for(var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[],i=0;i<px.length;i++)rx.push(_.each(px[i],qx));return rx},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=cache[s]||rule.call(this,s)}catch(e){r=cache[s]=e}if(r instanceof $P.Exception)throw r;return r}},any:function(){var px=arguments;return function(s){for(var r=null,i=0;i<px.length;i++)if(null!=px[i]){try{r=px[i].call(this,s)}catch(e){r=null}if(r)return r}throw new $P.Exception(s)}},each:function(){var px=arguments;return function(s){for(var rx=[],r=null,i=0;i<px.length;i++)if(null!=px[i]){try{r=px[i].call(this,s)}catch(e){throw new $P.Exception(s)}rx.push(r[0]),s=r[1]}return[rx,s]}},all:function(){var px=arguments,_=_;return _.each(_.optional(px))},sequence:function(px,d,c){return d=d||_.rtoken(/^\s*/),c=c||null,1==px.length?px[0]:function(s){for(var r=null,q=null,rx=[],i=0;i<px.length;i++){try{r=px[i].call(this,s)}catch(e){break}rx.push(r[0]);try{q=d.call(this,r[1])}catch(ex){q=null;break}s=q[1]}if(!r)throw new $P.Exception(s);if(q)throw new $P.Exception(q[1]);if(c)try{r=c.call(this,r[1])}catch(ey){throw new $P.Exception(r[1])}return[rx,r?r[1]:s]}},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]]}},list:function(p,d,c){return d=d||_.rtoken(/^\s*/),c=c||null,p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c))},set:function(px,d,c){return d=d||_.rtoken(/^\s*/),c=c||null,function(s){for(var r=null,p=null,q=null,rx=null,best=[[],s],last=!1,i=0;i<px.length;i++){q=null,p=null,r=null,last=1==px.length;try{r=px[i].call(this,s)}catch(e){continue}if(rx=[[r[0]],r[1]],r[1].length>0&&!last)try{q=d.call(this,r[1])}catch(ex){last=!0}else last=!0;if(last||0!==q[1].length||(last=!0),!last){for(var qx=[],j=0;j<px.length;j++)i!=j&&qx.push(px[j]);p=_.set(qx,d).call(this,q[1]),p[0].length>0&&(rx[0]=rx[0].concat(p[0]),rx[1]=p[1])}if(rx[1].length<best[1].length&&(best=rx),0===best[1].length)break}if(0===best[0].length)return best;if(c){try{q=c.call(this,best[1])}catch(ey){throw new $P.Exception(best[1])}best[1]=q[1]}return best}},forward:function(gr,fname){return function(s){return gr[fname].call(this,s)}},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]]}},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]]}},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min)throw new $P.Exception(s);return rx}}},_generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1?args=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(args=arguments[0]),!args)return op.apply(null,arguments);for(var i=0,px=args.shift();i<px.length;i++)return args.unshift(px[i]),rx.push(op.apply(null,args)),args.shift(),rx}},gx="optional not ignore cache".split(/\s/),i=0;i<gx.length;i++)_[gx[i]]=_generator(_[gx[i]]);for(var _vector=function(op){return function(){return arguments[0]instanceof Array?op.apply(null,arguments[0]):op.apply(null,arguments)}},vx="each any all".split(/\s/),j=0;j<vx.length;j++)_[vx[j]]=_vector(_[vx[j]])}(),function(){var $D=Date,$C=($D.prototype,$D.CultureInfo),flattenAndCompact=function(ax){for(var rx=[],i=0;i<ax.length;i++)ax[i]instanceof Array?rx=rx.concat(flattenAndCompact(ax[i])):ax[i]&&rx.push(ax[i]);return rx};$D.Grammar={},$D.Translator={hour:function(s){return function(){this.hour=Number(s)}},minute:function(s){return function(){this.minute=Number(s)}},second:function(s){return function(){this.second=Number(s)}},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase()}},timezone:function(s){return function(){var n=s.replace(/[^\d\+\-]/g,"");n.length?this.timezoneOffset=Number(n):this.timezone=s.toLowerCase()}},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\d+/)[0])}},month:function(s){return function(){this.month=3==s.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(s)/4:Number(s)-1}},year:function(s){return function(){var n=Number(s);this.year=s.length>2?n:n+(n+2e3<$C.twoDigitYearMax?2e3:1900)}},rday:function(s){return function(){switch(s){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(x){x=x instanceof Array?x:[x];for(var i=0;i<x.length;i++)x[i]&&x[i].call(this);var now=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=now.getDate()),this.year||(this.year=now.getFullYear()),this.month||0===this.month||(this.month=now.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>$D.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(x){if(x=x instanceof Array?flattenAndCompact(x):[x],0===x.length)return null;for(var i=0;i<x.length;i++)"function"==typeof x[i]&&x[i].call(this);var today=$D.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(today=new Date);var gap,mod,orient,expression=!!(this.days&&null!==this.days||this.orient||this.operator);if(orient="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||today.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,expression=!0),!expression&&this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate(),this.month||(this.month=temp.getMonth()),this.year=temp.getFullYear()}if(expression&&this.weekday&&"month"!=this.unit&&(this.unit="day",gap=$D.getDayNumberFromName(this.weekday)-today.getDay(),mod=7,this.days=gap?(gap+orient*mod)%mod:orient*mod),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(today.set({day:1*this.value}),expression||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,expression=!0),expression&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",gap=this.month-today.getMonth(),mod=12,this.months=gap?(gap+orient*mod)%mod:orient*mod,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*orient:null!=this[this.unit+"s"]&&null==this.operator||(this.value||(this.value=1),this[this.unit+"s"]=this.value*orient),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate(),temp.getMonth()!==today.getMonth()&&(this.month=temp.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(expression&&this.timezone&&this.day&&this.days&&(this.day=this.days),expression?today.add(this):today.set(this)):Date.today().setWeek(this.value)}};var _fn,_=$D.Parsing.Operators,g=$D.Grammar,t=$D.Translator;g.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/),g.timePartDelimiter=_.stoken(":"),g.whiteSpace=_.rtoken(/^\s*/),
g.generalDelimiter=_.rtoken(/^(([\s\,]|at|@|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){for(var c=$C.regexPatterns,kx=keys.split(/\s+/),px=[],i=0;i<kx.length;i++)px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));fn=_C[keys]=_.any.apply(null,px)}return fn},g.ctoken2=function(key){return _.rtoken($C.regexPatterns[key])},g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour)),g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour)),g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour)),g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour)),g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute)),g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute)),g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second)),g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second)),g.hms=_.cache(_.sequence([g.H,g.m,g.s],g.timePartDelimiter)),g.t=_.cache(_.process(g.ctoken2("shortMeridian"),t.meridian)),g.tt=_.cache(_.process(g.ctoken2("longMeridian"),t.meridian)),g.z=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone)),g.zz=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone)),g.zzz=_.cache(_.process(g.ctoken2("timezone"),t.timezone)),g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz])),g.time=_.each(_.optional(_.ignore(_.stoken("T"))),g.hms,g.timeSuffix),g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(g.ctoken2("ordinalSuffix"))),t.day)),g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(g.ctoken2("ordinalSuffix"))),t.day)),g.ddd=g.dddd=_.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"),function(s){return function(){this.weekday=s}})),g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),t.month)),g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),t.month)),g.MMM=g.MMMM=_.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month)),g.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),t.year)),g.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),t.year)),g.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),t.year)),g.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),t.year)),_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2("timeContext")))},g.day=_fn(g.d,g.dd),g.month=_fn(g.M,g.MMM),g.year=_fn(g.yyyy,g.yy),g.orientation=_.process(g.ctoken("past future"),function(s){return function(){this.orient=s}}),g.operator=_.process(g.ctoken("add subtract"),function(s){return function(){this.operator=s}}),g.rday=_.process(g.ctoken("yesterday tomorrow today now"),t.rday),g.unit=_.process(g.ctoken("second minute hour day week month year"),function(s){return function(){this.unit=s}}),g.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\D/g,"")}}),g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]),_fn=function(){return _.set(arguments,g.datePartDelimiter)},g.mdy=_fn(g.ddd,g.month,g.day,g.year),g.ymd=_fn(g.ddd,g.year,g.month,g.day),g.dmy=_fn(g.ddd,g.day,g.month,g.year),g.date=function(s){return(g[$C.dateElementOrder]||g.mdy).call(this,s)},g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt])return g[fmt];throw $D.Parsing.Exception(fmt)}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s))}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact)});var _F={},_get=function(f){return _F[f]=_F[f]||g.format(f)[0]};g.formats=function(fx){if(fx instanceof Array){for(var rx=[],i=0;i<fx.length;i++)rx.push(_get(fx[i]));return _.any.apply(null,rx)}return _get(fx)},g._formats=g.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish),g.start=function(s){try{var r=g._formats.call({},s);if(0===r[1].length)return r}catch(e){}return g._start.call({},s)},$D._parse=$D.parse,$D.parse=function(s){var r=null;if(!s)return null;if(s instanceof Date)return s;try{r=$D.Grammar.start.call({},s.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return 0===r[1].length?r[0]:null},$D.getParseFunction=function(fx){var fn=$D.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s)}catch(e){return null}return 0===r[1].length?r[0]:null}},$D.parseExact=function(s,fx){return $D.getParseFunction(fx)(s)}}(),function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().andSelf().filter(function(){return"hidden"===$.css(this,"visibility")}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{},$.ui.version||($.extend($.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;return scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));div.offsetHeight,$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=100===div.offsetHeight,$.support.selectstart="onselectstart"in div,body.removeChild(div).style.display="none"}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),function(){var uaMatch=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];$.ui.ie=!!uaMatch.length,$.ui.ie6=6===parseFloat(uaMatch[1],10)}(),$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var i,set=instance.plugins[name];if(set&&instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType)for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},contains:$.contains,hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)},isOverAxis:function(x,reference,size){return x>reference&&reference+size>x},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)}}))}(jQuery),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){$.isFunction(value)&&(prototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}())}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},prototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetBaseClass:fullName,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):this.each(function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetName,this),$.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&($.effects.effect[effectName]||$.uiBackCompat!==!1&&$.effects[effectName])?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}}),$.uiBackCompat!==!1&&($.Widget.prototype._getCreateOptions=function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function($,undefined){var mouseHandled=!1;$(document).mouseup(function(e){mouseHandled=!1}),$.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){return!$.ui.ie||document.documentMode>=9||event.button?this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted):this._mouseUp(event)},_mouseUp:function(event){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(event){return this.mouseDelayMet},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return!0}})}(jQuery),function($,undefined){function getOffsets(offsets,width,height){return[parseInt(offsets[0],10)*(rpercent.test(offsets[0])?width/100:1),parseInt(offsets[1],10)*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowX?$.position.scrollbarWidth():0,height:hasOverflowY?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),targetElem=target[0],collision=(options.collision||"flip").split(" "),offsets={};return 9===targetElem.nodeType?(targetWidth=target.width(),targetHeight=target.height(),targetOffset={top:0,left:0}):$.isWindow(targetElem)?(targetWidth=target.width(),targetHeight=target.height(),targetOffset={top:target.scrollTop(),left:target.scrollLeft()}):targetElem.preventDefault?(options.at="left top",targetWidth=targetHeight=0,targetOffset={top:targetElem.pageY,left:targetElem.pageX}):(targetWidth=target.outerWidth(),targetHeight=target.outerHeight(),targetOffset=target.offset()),basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],$.support.offsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),$.fn.bgiframe&&elem.bgiframe(),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:0>right?"left":left>0?"right":"center",vertical:0>bottom?"top":top>0?"bottom":"middle"};elemWidth>targetWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),elemHeight>targetHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&0>=overRight?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):overRight>0&&0>=overLeft?position.left=withinOffset:overLeft>overRight?position.left=withinOffset+outerWidth-data.collisionWidth:position.left=withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&0>=overBottom?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):overBottom>0&&0>=overTop?position.top=withinOffset:overTop>overBottom?position.top=withinOffset+outerHeight-data.collisionHeight:position.top=withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];0>overLeft?(newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset,(0>newOverRight||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)):overRight>0&&(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft,(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset))},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];0>overTop?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,position.top+myOffset+atOffset+offset>overTop&&(0>newOverBottom||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset));
}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,$.support.offsetFractions=offsetLeft>10&&11>offsetLeft,testElement.innerHTML="",testElementParent.removeChild(testElement)}(),$.uiBackCompat!==!1&&!function($){var _position=$.fn.position;$.fn.position=function(options){if(!options||!options.offset)return _position.call(this,options);var offset=options.offset.split(" "),at=options.at.split(" ");return 1===offset.length&&(offset[1]=offset[0]),/^\d/.test(offset[0])&&(offset[0]="+"+offset[0]),/^\d/.test(offset[1])&&(offset[1]="+"+offset[1]),1===at.length&&(/left|center|right/.test(at[0])?at[1]="center":(at[1]=at[0],at[0]="center")),_position.call(this,$.extend(options,{at:at[0]+offset[0]+" "+at[1]+offset[1],offset:undefined}))}}(jQuery)}(jQuery),function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;return this.helper||o.disabled||$(event.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(event),this.handle?($(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),o.containment&&this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){if(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var dropped=!1;$.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1);for(var element=this.element[0],elementInDom=!1;element&&(element=element.parentNode);)element==document&&(elementInDom=!0);if(!elementInDom&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!dropped||"valid"==this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)){var that=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()})}else this._trigger("stop",event)!==!1&&this._clear();return!1},_mouseUp:function(event){return $("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length;return $(this.options.handle,this.element).find("*").andSelf().each(function(){this==event.target&&(handle=!0)}),handle},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):"clone"==o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"==o.appendTo?this.element[0].parentNode:o.appendTo),helper[0]==this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;if("parent"==o.containment&&(o.containment=this.helper[0].parentNode),"document"!=o.containment&&"window"!=o.containment||(this.containment=["document"==o.containment?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==o.containment?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==o.containment?0:$(window).scrollLeft())+$("document"==o.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==o.containment?0:$(window).scrollTop())+($("document"==o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||o.containment.constructor==Array)o.containment.constructor==Array&&(this.containment=o.containment);else{var c=$(o.containment),ce=c[0];if(!ce)return;var over=(c.offset(),"hidden"!=$(ce).css("overflow"));this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"==d?1:-1,scroll=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var o=this.options,scroll="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName),pageX=event.pageX,pageY=event.pageY;if(this.originalPosition){var containment;if(this.containment){if(this.relative_container){var co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]}else containment=this.containment;event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)}if(o.grid){var top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment&&(top-this.offset.click.top<containment[1]||top-this.offset.click.top>containment[3])?top-this.offset.click.top<containment[1]?top+o.grid[1]:top-o.grid[1]:top;var left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment&&(left-this.offset.click.left<containment[0]||left-this.offset.click.left>containment[2])?left-this.offset.click.left<containment[0]?left+o.grid[0]:left-o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui]),"drag"==type&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$.data(this,"sortable");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,"original"==inst.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui){var inst=$(this).data("draggable"),that=this;$.each(inst.sortables,function(i){var innermostIntersecting=!1,thisSortable=this;this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(innermostIntersecting=!0,$.each(inst.sortables,function(){return this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this!=thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.ui.contains(thisSortable.instance.element[0],this.instance.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$("body"),o=$(this).data("draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui){var o=$(this).data("draggable").options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("draggable").options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(o.axis&&"x"==o.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"==o.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"==o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"==o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[],$(o.snap.constructor!=String?o.snap.items||":data(draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){for(var inst=$(this).data("draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height,i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(x1>l-d&&r+d>x1&&y1>t-d&&b+d>y1||x1>l-d&&r+d>x1&&y2>t-d&&b+d>y2||x2>l-d&&r+d>x2&&y1>t-d&&b+d>y1||x2>l-d&&r+d>x2&&y2>t-d&&b+d>y2){if("inner"!=o.snapMode){var ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d;ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)}var first=ts||bs||ls||rs;if("outer"!=o.snapMode){var ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d;ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)}!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first}else inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1}}}),$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(group.length){var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i}),this[0].style.zIndex=min+group.length}}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("draggable").options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery),function($,undefined){$.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var o=this.options,accept=o.accept;this.isover=0,this.isout=1,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[],$.ui.ddmanager.droppables[o.scope].push(this),o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var drop=$.ui.ddmanager.droppables[this.options.scope],i=0;i<drop.length;i++)drop[i]==this&&drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){"accept"==key&&(this.accept=$.isFunction(value)?value:function(d){return d.is(value)}),$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!=this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!=this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return!1;var childrenIntersection=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"droppable");return inst.options.greedy&&!inst.options.disabled&&inst.options.scope==draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)?(childrenIntersection=!0,!1):void 0}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return!1;var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case"fit":return x1>=l&&r>=x2&&y1>=t&&b>=y2;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":var draggableLeft=(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left,draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top,isOver=$.ui.isOver(draggableTop,draggableLeft,t,l,droppable.proportions.height,droppable.proportions.width);return isOver;case"touch":return(y1>=t&&b>=y1||y2>=t&&b>=y2||t>y1&&y2>b)&&(x1>=l&&r>=x1||x2>=l&&r>=x2||l>x1&&x2>r);default:return!1}},$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(droppable)").andSelf();droppablesLoop:for(var i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(var j=0;j<list.length;j++)if(list[j]==m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop}m[i].visible="none"!=m[i].element.css("display"),m[i].visible&&("mousedown"==type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight})}},drop:function(draggable,event){var dropped=!1;return $.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=intersects||1!=this.isover?intersects&&0==this.isover?"isover":null:"isout";if(c){var parentInstance;if(this.options.greedy){var scope=this.options.scope,parent=this.element.parents(":data(droppable)").filter(function(){return $.data(this,"droppable").options.scope===scope});parent.length&&(parentInstance=$.data(parent[0],"droppable"),parentInstance.greedyChild="isover"==c?1:0)}parentInstance&&"isover"==c&&(parentInstance.isover=0,parentInstance.isout=1,parentInstance._out.call(parentInstance,event)),this[c]=1,this["isout"==c?"isover":"isout"]=0,this["isover"==c?"_over":"_out"].call(this,event),parentInstance&&"isout"==c&&(parentInstance.isout=0,parentInstance.isover=1,parentInstance._over.call(parentInstance,event))}}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}}}(jQuery),function($,undefined){$.widget("ui.resizable",$.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var that=this,o=this.options;if(this.element.addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap($('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname="ui-resizable-"+handle,axis=$('<div class="ui-resizable-handle '+hname+'"></div>');axis.css({zIndex:o.zIndex}),"se"==handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[handle]=".ui-resizable-"+handle,this.element.append(axis)}}this._renderAxis=function(target){target=target||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=$(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper),this._proportionallyResize()}$(this.handles[i]).length}},this._renderAxis(this.element),this._handles=$(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!that.resizing){if(this.className)var axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);that.axis=axis&&axis[1]?axis[1]:"se"}}),o.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||($(this).removeClass("ui-resizable-autohide"),that._handles.show())}).mouseleave(function(){o.disabled||that.resizing||($(this).addClass("ui-resizable-autohide"),that._handles.hide())})),this._mouseInit();
},_destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper),wrapper.remove()}return this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_mouseCapture:function(event){var handle=!1;for(var i in this.handles)$(this.handles[i])[0]==event.target&&(handle=!0);return!this.options.disabled&&handle},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=!0,this.documentScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()},(el.is(".ui-draggable")||/absolute/.test(el.css("position")))&&el.css({position:"absolute",top:iniPos.top,left:iniPos.left}),this._renderProxy();var curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top"));o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalPosition={left:curleft,top:curtop},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;var cursor=$(".ui-resizable-"+this.axis).css("cursor");return $("body").css("cursor","auto"==cursor?this.axis+"-resize":cursor),el.addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var el=this.helper,smp=(this.options,this.originalMousePosition),a=this.axis,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];if(!trigger)return!1;var data=trigger.apply(this,[event,dx,dy]);return this._updateVirtualBoundaries(event.shiftKey),(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event)),data=this._respectSize(data,event),this._propagate("resize",event),el.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(data),this._trigger("resize",event,this.ui()),!1},_mouseStop:function(event){this.resizing=!1;var o=this.options,that=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()}return $("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||forceAspectRatio)&&(pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)),this._vBoundaries=b},_updateCache:function(data){this.options;this.offset=this.helper.offset(),isNumber(data.left)&&(this.position.left=data.left),isNumber(data.top)&&(this.position.top=data.top),isNumber(data.height)&&(this.size.height=data.height),isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data,event){var cpos=(this.options,this.position),csize=this.size,a=this.axis;return isNumber(data.height)?data.width=data.height*this.aspectRatio:isNumber(data.width)&&(data.height=data.width/this.aspectRatio),"sw"==a&&(data.left=cpos.left+(csize.width-data.width),data.top=null),"nw"==a&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data,event){var o=(this.helper,this._vBoundaries),a=(this._aspectRatio||event.shiftKey,this.axis),ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height;isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight);var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight);var isNotwh=!data.width&&!data.height;return isNotwh&&!data.left&&data.top?data.top=null:isNotwh&&!data.top&&data.left&&(data.left=null),data},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var element=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],p=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];this.borderDif=$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding})}prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var el=this.element,o=this.options;if(this.elementOffset=el.offset(),this._helper){this.helper=this.helper||$('<div style="overflow:hidden;"></div>');var ie6offset=$.ui.ie6?1:0,pxyoffset=$.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:"absolute",left:this.elementOffset.left-ie6offset+"px",top:this.elementOffset.top-ie6offset+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx}},w:function(event,dx,dy){var cs=(this.options,this.originalSize),sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=(this.options,this.originalSize),sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]),"resize"!=n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ui.plugin.add("resizable","alsoResize",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};"object"!=typeof o.alsoResize||o.alsoResize.parentNode?_store(o.alsoResize):o.alsoResize.length?(o.alsoResize=o.alsoResize[0],_store(o.alsoResize)):$.each(o.alsoResize,function(exp){_store(exp)})},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?_alsoResize(o.alsoResize):$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)})},stop:function(event,ui){$(this).removeData("resizable-alsoresize")}}),$.ui.plugin.add("resizable","animate",{stop:function(event,ui){var that=$(this).data("resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ui.plugin.add("resizable","containment",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;if(ce)if(that.containerElement=$(ce),/document/.test(oc)||oc==document)that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};else{var element=$(ce),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]};var co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw,height=$.ui.hasScroll(ce)?ce.scrollHeight:ch;that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}}},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,co=(that.containerSize,that.containerOffset),cp=(that.size,that.position),pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;ce[0]!=document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio),that.position.top=that._helper?co.top:0),that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top;var woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width),hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height),isParent=that.containerElement.get(0)==that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));isParent&&isOffsetRelative&&(woset-=that.parentData.left),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio))},stop:function(event,ui){var that=$(this).data("resizable"),o=that.options,co=(that.position,that.containerOffset),cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ui.plugin.add("resizable","ghost",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),that.ghost.appendTo(that.helper)},resize:function(event,ui){var that=$(this).data("resizable");that.options;that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(event,ui){var that=$(this).data("resizable");that.options;that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ui.plugin.add("resizable","grid",{resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis;o._aspectRatio||event.shiftKey;o.grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);/^(se|s|e)$/.test(a)?(that.size.width=os.width+ox,that.size.height=os.height+oy):/^(ne)$/.test(a)?(that.size.width=os.width+ox,that.size.height=os.height+oy,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=os.width+ox,that.size.height=os.height+oy,that.position.left=op.left-ox):(that.size.width=os.width+ox,that.size.height=os.height+oy,that.position.top=op.top-oy,that.position.left=op.left-ox)}});var num=function(v){return parseInt(v,10)||0},isNumber=function(value){return!isNaN(parseInt(value,10))}}(jQuery),function($,undefined){$.widget("ui.selectable",$.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var that=this;this.element.addClass("ui-selectable"),this.dragged=!1;var selectees;this.refresh=function(){selectees=$(that.options.filter,that.element[0]),selectees.addClass("ui-selectee"),selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=selectees.addClass("ui-selectee"),this._mouseInit(),this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(event){var that=this;if(this.opos=[event.pageX,event.pageY],!this.options.disabled){var options=this.options;this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.clientX,top:event.clientY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,event.metaKey||event.ctrlKey||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))}),$(event.target).parents().andSelf().each(function(){var selectee=$.data(this,"selectable-item");if(selectee){var doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected");return selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1}})}},_mouseDrag:function(event){var that=this;if(this.dragged=!0,!this.options.disabled){var options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){var tmp=x2;x2=x1,x1=tmp}if(y1>y2){var tmp=y2;y2=y1,y1=tmp}return this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each(function(){var selectee=$.data(this,"selectable-item");if(selectee&&selectee.element!=that.element[0]){var hit=!1;"touch"==options.tolerance?hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1):"fit"==options.tolerance&&(hit=selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2),hit?(selectee.selected&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1),selectee.unselecting&&(selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(selectee.$element.addClass("ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.$element.addClass("ui-selected"),selectee.selected=!0):(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.startselected&&(selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&(event.metaKey||event.ctrlKey||selectee.startselected||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))))}}),!1}},_mouseStop:function(event){var that=this;this.dragged=!1;this.options;return $(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})}),$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})}),this._trigger("stop",event),this.helper.remove(),!1}})}(jQuery),function($,undefined){$.widget("ui.sortable",$.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var o=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===o.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){"disabled"===key?(this.options[key]=value,this.widget().toggleClass("ui-sortable-disabled",!!value)):$.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(event,overrideHandle){var that=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(event);var currentItem=null;$(event.target).parents().each(function(){return $.data(this,that.widgetName+"-item")==that?(currentItem=$(this),!1):void 0});if($.data(event.target,that.widgetName+"-item")==that&&(currentItem=$(event.target)),!currentItem)return!1;if(this.options.handle&&!overrideHandle){var validHandle=!1;if($(this.options.handle,currentItem).find("*").andSelf().each(function(){this==event.target&&(validHandle=!0)}),!validHandle)return!1}return this.currentItem=currentItem,this._removeCurrentsFromItems(),!0},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&($("body").css("cursor")&&(this._storedCursor=$("body").css("cursor")),$("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){if(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var o=this.options,scrolled=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed)),event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(intersection&&item.instance===this.currentContainer&&itemElement!=this.currentItem[0]&&this.placeholder[1==intersection?"next":"prev"]()[0]!=itemElement&&!$.contains(this.placeholder[0],itemElement)&&("semi-dynamic"==this.options.type?!$.contains(this.element[0],itemElement):!0)){if(this.direction=1==intersection?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset();this.reverting=!0,$(this.helper).animate({left:cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElement=y1+dyClick>t&&b>y1+dyClick&&x1+dxClick>l&&r>x1+dxClick;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight="x"===this.options.axis||$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return isOverElement?this.floating?horizontalDirection&&"right"==horizontalDirection||"down"==verticalDirection?2:1:verticalDirection&&("down"==verticalDirection?2:1):!1},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"==horizontalDirection&&isOverRightHalf||"left"==horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"==verticalDirection&&isOverBottomHalf||"up"==verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!=delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!=delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(var i=connectWith.length-1;i>=0;i--)for(var cur=$(connectWith[i]),j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);inst&&inst!=this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst])}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{
options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]==item.item[0])return!1;return!0})},_refreshItems:function(event){this.items=[],this.containers=[this];var items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(var i=connectWith.length-1;i>=0;i--)for(var cur=$(connectWith[i]),j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);inst&&inst!=this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst))}for(var i=queries.length-1;i>=0;i--)for(var targetData=queries[i][1],_queries=queries[i][0],j=0,queriesLength=_queries.length;queriesLength>j;j++){var item=$(_queries[j]);item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})}},refreshPositions:function(fast){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];if(item.instance==this.currentContainer||!this.currentContainer||item.item[0]==this.currentItem[0]){var t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;fast||(item.width=t.outerWidth(),item.height=t.outerHeight());var p=t.offset();item.left=p.left,item.top=p.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(that){that=that||this;var o=that.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(that.currentItem[0].nodeName)).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return className||(el.style.visibility="hidden"),el},update:function(container,p){className&&!o.forcePlaceholderSize||(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){for(var innermostContainer=null,innermostIndex=null,i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1;else{for(var dist=1e4,itemWithLeastDistance=null,posProperty=this.containers[innermostIndex].floating?"left":"top",sizeProperty=this.containers[innermostIndex].floating?"width":"height",base=this.positionAbs[posProperty]+this.offset.click[posProperty],j=this.items.length-1;j>=0;j--)if($.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!=this.currentItem[0]){var cur=this.items[j].item.offset()[posProperty],nearBottom=!1;Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)&&(nearBottom=!0,cur+=this.items[j][sizeProperty]),Math.abs(cur-base)<dist&&(dist=Math.abs(cur-base),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down")}if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[innermostIndex],itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"==o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!=o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==helper[0].style.width||o.forceHelperSize)&&helper.width(this.currentItem.width()),(""==helper[0].style.height||o.forceHelperSize)&&helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;if("parent"==o.containment&&(o.containment=this.helper[0].parentNode),"document"!=o.containment&&"window"!=o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$("document"==o.containment?document:window).width()-this.helperProportions.width-this.margins.left,($("document"==o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(o.containment)){var ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!=$(ce).css("overflow");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"==d?1:-1,scroll=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var o=this.options,scroll="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var pageX=event.pageX,pageY=event.pageY;if(this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid)){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment&&(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top-this.offset.click.top<this.containment[1]?top+o.grid[1]:top-o.grid[1]:top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment&&(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left-this.offset.click.left<this.containment[0]?left+o.grid[0]:left-o.grid[0]:left}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter==this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=!1;var delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)"auto"!=this._storedCSS[i]&&"static"!=this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||noPropagation||delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())}),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())}),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedCursor&&$("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!1}if(noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!noPropagation){for(var i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}(jQuery),function($,undefined){var uid=0,hideProps={},showProps={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide",showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show",$.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var accordionId=this.accordionId="ui-accordion-"+(this.element.attr("id")||++uid),options=this.options;this.prevShow=this.prevHide=$(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),options.collapsible||options.active!==!1&&null!=options.active||(options.active=0),options.active<0&&(options.active+=this.headers.length),this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=header.next(),panelId=panel.attr("id");headerId||(headerId=accordionId+"-header-"+i,header.attr("id",headerId)),panelId||(panelId=accordionId+"-panel-"+i,panel.attr("id",panelId)),header.attr("aria-controls",panelId),panel.attr("aria-labelledby",headerId)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(options.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():$()}},_createIcons:function(){var icons=this.options.icons;icons&&($("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&contents.css("height","")},_setOption:function(key,value){return"active"===key?void this._activate(value):("event"===key&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(value)),this._super(key,value),"collapsible"!==key||value||this.options.active!==!1||this._activate(0),"icons"===key&&(this._destroyIcons(),value&&this._createIcons()),void("disabled"===key&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value)))},_keydown:function(event){if(!event.altKey&&!event.ctrlKey){var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=!1;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1]}toFocus&&($(event.target).attr("tabIndex",-1),$(toFocus).attr("tabIndex",0),toFocus.focus(),event.preventDefault())}},_panelKeyDown:function(event){event.keyCode===$.ui.keyCode.UP&&event.ctrlKey&&$(event.currentTarget).prev().focus()},refresh:function(){var maxHeight,overflow,heightStyle=this.options.heightStyle,parent=this.element.parent();"fill"===heightStyle?($.support.minHeight||(overflow=parent.css("overflow"),parent.css("overflow","hidden")),maxHeight=parent.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),overflow&&parent.css("overflow",overflow),this.headers.each(function(){maxHeight-=$(this).outerHeight(!0)}),this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height())}).height(maxHeight))},_activate:function(index){var active=this._findActive(index)[0];active!==this.active[0]&&(active=active||this.active[0],this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop}))},_findActive:function(selector){return"number"==typeof selector?this.headers.eq(selector):$()},_setupEvents:function(event){var events={};event&&($.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._on(this.headers,events))},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault(),clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.headers.index(clicked),this.active=clickedIsActive?$():clicked,this._toggle(eventData),active.removeClass("ui-accordion-header-active ui-state-active"),options.icons&&active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header),clickedIsActive||(clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),options.icons&&clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader),clicked.next().addClass("ui-accordion-content-active")))},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=toShow,this.prevHide=toHide,this.options.animate?this._animate(toShow,toHide,data):(toHide.hide(),toShow.show(),this._toggleComplete(data)),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),toHide.prev().attr("aria-selected","false"),toShow.length&&toHide.length?toHide.prev().attr("tabIndex",-1):toShow.length&&this.headers.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||toShow.index()<toHide.index()),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data)};return"number"==typeof options&&(duration=options),"string"==typeof options&&(easing=options),easing=easing||options.easing||animate.easing,duration=duration||options.duration||animate.duration,toHide.length?toShow.length?(total=toShow.show().outerHeight(),toHide.animate(hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now)}}),void toShow.hide().animate(showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now),"height"!==fx.prop?adjust+=fx.now:"content"!==that.options.heightStyle&&(fx.now=Math.round(total-toHide.outerHeight()-adjust),adjust=0)}})):toHide.animate(hideProps,duration,easing,complete):toShow.animate(showProps,duration,easing,complete)},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),toHide.length&&(toHide.parent()[0].className=toHide.parent()[0].className),this._trigger("activate",null,data)}}),$.uiBackCompat!==!1&&(!function($,prototype){$.extend(prototype.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var _create=prototype._create;prototype._create=function(){if(this.options.navigation){var that=this,headers=this.element.find(this.options.header),content=headers.next(),current=headers.add(content).find("a").filter(this.options.navigationFilter)[0];current&&headers.add(content).each(function(index){return $.contains(this,current)?(that.options.active=Math.floor(index/2),!1):void 0})}_create.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){$.extend(prototype.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var _create=prototype._create,_setOption=prototype._setOption;$.extend(prototype,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),_create.call(this)},_setOption:function(key){"autoHeight"!==key&&"clearStyle"!==key&&"fillSpace"!==key||(this.options.heightStyle=this._mergeHeightStyle()),_setOption.apply(this,arguments)},_mergeHeightStyle:function(){var options=this.options;return options.fillSpace?"fill":options.clearStyle?"content":options.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){$.extend(prototype.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var _createIcons=prototype._createIcons;prototype._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),_createIcons.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){prototype.activate=prototype._activate;var _findActive=prototype._findActive;prototype._findActive=function(index){return-1===index&&(index=!1),index&&"number"!=typeof index&&(index=this.headers.index(this.headers.filter(index)),-1===index&&(index=!1)),_findActive.call(this,index)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function($,prototype){$.extend(prototype.options,{change:null,changestart:null});var _trigger=prototype._trigger;prototype._trigger=function(type,event,data){var ret=_trigger.apply(this,arguments);return ret?("beforeActivate"===type?ret=_trigger.call(this,"changestart",event,{oldHeader:data.oldHeader,oldContent:data.oldPanel,newHeader:data.newHeader,newContent:data.newPanel}):"activate"===type&&(ret=_trigger.call(this,"change",event,{oldHeader:data.oldHeader,oldContent:data.oldPanel,newHeader:data.newHeader,newContent:data.newPanel})),ret):!1}}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){$.extend(prototype.options,{animate:null,animated:"slide"});var _create=prototype._create;prototype._create=function(){var options=this.options;null===options.animate&&(options.animated?"slide"===options.animated?options.animate=300:"bounceslide"===options.animated?options.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:options.animate=options.animated:options.animate=!1),_create.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly"))return suppressKeyPress=!0,suppressInput=!0,void(suppressKeyPressRepeat=!0);suppressKeyPress=!1,suppressInput=!1,suppressKeyPressRepeat=!1;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=!0,this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=!0,this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=!0,this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=!0,this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:this.menu.active&&(suppressKeyPress=!0,event.preventDefault(),this.menu.select(event));break;case keyCode.TAB:this.menu.active&&this.menu.select(event);break;case keyCode.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(event),event.preventDefault());break;default:suppressKeyPressRepeat=!0,this._searchTimeout(event)}},keypress:function(event){if(suppressKeyPress)return suppressKeyPress=!1,void event.preventDefault();if(!suppressKeyPressRepeat){var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event)}}},input:function(event){return suppressInput?(suppressInput=!1,void event.preventDefault()):void this._searchTimeout(event)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(event){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(event),void this._change(event))}}),this._initSource(),this.menu=$("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:$(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(event){event.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];$(event.target).closest(".ui-menu-item").length||this._delay(function(){var that=this;this.document.one("mousedown",function(event){event.target===that.element[0]||event.target===menuElement||$.contains(menuElement,event.target)||that.close()})})},menufocus:function(event,ui){if(this.isNewMenu&&(this.isNewMenu=!1,event.originalEvent&&/^mouse/.test(event.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)});var item=ui.item.data("ui-autocomplete-item")||ui.item.data("item.autocomplete");!1!==this._trigger("focus",event,{item:item})?event.originalEvent&&/^key/.test(event.originalEvent.type)&&this._value(item.value):this.liveRegion.text(item.value)},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item")||ui.item.data("item.autocomplete"),previous=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous,this.selectedItem=item})),!1!==this._trigger("select",event,{item:item})&&this._value(item.value),this.term=this._value(),this.close(event),this.selectedItem=item}}),this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),$.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value),"source"===key&&this._initSource(),"appendTo"===key&&this.menu.element.appendTo(this.document.find(value||"body")[0]),"disabled"===key&&value&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable");
},_initSource:function(){var array,url,that=this;$.isArray(this.options.source)?(array=this.options.source,this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}):"string"==typeof this.options.source?(url=this.options.source,this.source=function(request,response){that.xhr&&that.xhr.abort(),that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}):this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,event))},this.options.delay)},search:function(value,event){return value=null!=value?value:this._value(),this.term=this._value(),value.length<this.options.minLength?this.close(event):this._trigger("search",event)!==!1?this._search(value):void 0},_search:function(value){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:value},this._response())},_response:function(){var that=this,index=++requestIndex;return function(content){index===requestIndex&&that.__response(content),that.pending--,that.pending||that.element.removeClass("ui-autocomplete-loading")}},__response:function(content){content&&(content=this._normalize(content)),this._trigger("response",null,{content:content}),!this.options.disabled&&content&&content.length&&!this.cancelSearch?(this._suggest(content),this._trigger("open")):this._close()},close:function(event){this.cancelSearch=!0,this._close(event)},_close:function(event){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",event))},_change:function(event){this.previous!==this._value()&&this._trigger("change",event,{item:this.selectedItem})},_normalize:function(items){return items.length&&items[0].label&&items[0].value?items:$.map(items,function(item){return"string"==typeof item?{label:item,value:item}:$.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items),this.menu.refresh(),ul.show(),this._resizeMenu(),ul.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul)},_move:function(direction,event){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)?(this._value(this.term),void this.menu.blur()):void this.menu[direction](event):void this.search(null,event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(keyEvent,event),event.preventDefault())}}),$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments),this.options.disabled||this.cancelSearch||(message=content&&content.length?this.options.messages.results(content.length):this.options.messages.noResults,this.liveRegion.text(message))}})}(jQuery),function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);return name&&(radios=form?$(form).find("[name='"+name+"']"):$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})),radios};$.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton="checkbox"===this.type||"radio"===this.type,activeClass=toggleButton?"":"ui-state-active",focusClass="ui-state-focus";null===options.label&&(options.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){options.disabled||this===lastActive&&$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){options.disabled||$(this).removeClass(activeClass)}).bind("click"+this.eventNamespace,function(event){options.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass)}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass)}),toggleButton&&(this.element.bind("change"+this.eventNamespace,function(){clickDragged||that.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){options.disabled||(clickDragged=!1,startXPos=event.pageX,startYPos=event.pageY)}).bind("mouseup"+this.eventNamespace,function(event){options.disabled||startXPos===event.pageX&&startYPos===event.pageY||(clickDragged=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return options.disabled||clickDragged?!1:($(this).toggleClass("ui-state-active"),void that.buttonElement.attr("aria-pressed",that.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return!1;$(this).addClass("ui-state-active"),that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return options.disabled?!1:($(this).addClass("ui-state-active"),lastActive=this,void that.document.one("mouseup",function(){lastActive=null}))}).bind("mouseup"+this.eventNamespace,function(){return options.disabled?!1:void $(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){return options.disabled?!1:void(event.keyCode!==$.ui.keyCode.SPACE&&event.keyCode!==$.ui.keyCode.ENTER||$(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(event){event.keyCode===$.ui.keyCode.SPACE&&$(this).click()})),this._setOption("disabled",options.disabled),this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(ancestor=this.element.parents().last(),labelSelector="label[for='"+this.element.attr("id")+"']",this.buttonElement=ancestor.find(labelSelector),this.buttonElement.length||(ancestor=ancestor.length?ancestor.siblings():this.element.siblings(),this.buttonElement=ancestor.filter(labelSelector),this.buttonElement.length||(this.buttonElement=ancestor.find(labelSelector))),this.element.addClass("ui-helper-hidden-accessible"),checked=this.element.is(":checked"),checked&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",checked)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(key,value){return this._super(key,value),"disabled"===key?void(value?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");isDisabled!==this.options.disabled&&this._setOption("disabled",isDisabled),"radio"===this.type?radioGroup(this.element[0]).each(function(){$(this).is(":checked")?$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];icons.primary||icons.secondary?(this.options.text&&buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary")),icons.primary&&buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>"),icons.secondary&&buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>"),this.options.text||(buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||buttonElement.attr("title",$.trim(buttonText)))):buttonClasses.push("ui-button-text-only"),buttonElement.addClass(buttonClasses.join(" "))}}),$.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){"disabled"===key&&this.buttons.button("option",key,value),this._super(key,value)},refresh:function(){var rtl="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(target,props){$.extend(target,props);for(var name in props)null!=props[name]&&props[name]!=undefined||(target[name]=props[name]);return target}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:inline?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]),input.hasClass(this.markerClassName)||(this._attachments(input,inst),input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)}),this._autoSize(inst),$.data(target,PROP_NAME,inst),inst.settings.disabled&&this._disableDatepicker(target))},_attachments:function(input,inst){var appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),input.unbind("focus",this._showDatepicker),inst.trigger&&inst.trigger.remove();var showOn=this._get(inst,"showOn");if("focus"!=showOn&&"both"!=showOn||input.focus(this._showDatepicker),"button"==showOn||"both"==showOn){var buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}))),input[isRTL?"before":"after"](inst.trigger),inst.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(input[0])):$.datepicker._showDatepicker(input[0]),!1})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,11,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){for(var max=0,maxI=0,i=0;i<names.length;i++)names[i].length>max&&(max=names[i].length,maxI=i);return maxI};date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))),date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);divSpan.hasClass(this.markerClassName)||(divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)}),$.data(target,PROP_NAME,inst),this._setDate(inst,this._getDefaultDate(inst),!0),this._updateDatepicker(inst),this._updateAlternate(inst),inst.settings.disabled&&this._disableDatepicker(target),inst.dpDiv.css("display","block"))},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),inst=this._dialogInst=this._newInst(this._dialogInput,!1),inst.settings={},$.data(this._dialogInput[0],PROP_NAME,inst)}if(extendRemove(inst.settings,settings||{}),date=date&&date.constructor==Date?this._formatDate(inst,date):date,this._dialogInput.val(date),this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null,!this._pos){var browserWidth=document.documentElement.clientWidth,browserHeight=document.documentElement.clientHeight,scrollX=document.documentElement.scrollLeft||document.body.scrollLeft,scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),inst.settings.onSelect=onSelect,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,inst),this},_destroyDatepicker:function(target){var $target=$(target),inst=$.data(target,PROP_NAME);if($target.hasClass(this.markerClassName)){var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME),"input"==nodeName?(inst.append.remove(),inst.trigger.remove(),$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=nodeName&&"span"!=nodeName||$target.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(target){var $target=$(target),inst=$.data(target,PROP_NAME);if($target.hasClass(this.markerClassName)){var nodeName=target.nodeName.toLowerCase();if("input"==nodeName)target.disabled=!1,inst.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==nodeName||"span"==nodeName){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value==target?null:value})}},_disableDatepicker:function(target){var $target=$(target),inst=$.data(target,PROP_NAME);if($target.hasClass(this.markerClassName)){var nodeName=target.nodeName.toLowerCase();if("input"==nodeName)target.disabled=!0,inst.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==nodeName||"span"==nodeName){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value==target?null:value}),this._disabledInputs[this._disabledInputs.length]=target}},_isDisabledDatepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]==target)return!0;return!1},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(2==arguments.length&&"string"==typeof name)return"defaults"==name?$.extend({},$.datepicker._defaults):inst?"all"==name?$.extend({},inst.settings):this._get(inst,name):null;var settings=name||{};if("string"==typeof name&&(settings={},settings[name]=value),inst){this._curInst==inst&&this._hideDatepicker();var date=this._getDateDatepicker(target,!0),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings),null!==minDate&&settings.dateFormat!==undefined&&settings.minDate===undefined&&(inst.settings.minDate=this._formatDate(inst,minDate)),null!==maxDate&&settings.dateFormat!==undefined&&settings.maxDate===undefined&&(inst.settings.maxDate=this._formatDate(inst,maxDate)),this._attachments($(target),inst),this._autoSize(inst),this._setDate(inst,date),this._updateAlternate(inst),this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);inst&&this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);inst&&(this._setDate(inst,date),this._updateDatepicker(inst),this._updateAlternate(inst))},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);return inst&&!inst.inline&&this._setDateFromField(inst,noDefault),inst?this._getDate(inst):null},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target),handled=!0,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");if(inst._keyEvent=!0,$.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker(),handled=!1;break;case 13:var sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);sel[0]&&$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);var onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){var dateStr=$.datepicker._formatDate(inst);onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:(event.ctrlKey||event.metaKey)&&$.datepicker._clearDate(event.target),handled=event.ctrlKey||event.metaKey;break;case 36:(event.ctrlKey||event.metaKey)&&$.datepicker._gotoToday(event.target),handled=event.ctrlKey||event.metaKey;break;case 37:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?1:-1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,-7,"D"),handled=event.ctrlKey||event.metaKey;break;case 39:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?-1:1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,7,"D"),handled=event.ctrlKey||event.metaKey;break;default:handled=!1}else 36==event.keyCode&&event.ctrlKey?$.datepicker._showDatepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||" ">chr||!chars||chars.indexOf(chr)>-1}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal)try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));date&&($.datepicker._setDateFromField(inst),$.datepicker._updateAlternate(inst),$.datepicker._updateDatepicker(inst))}catch(err){$.datepicker.log(err)}return!0},_showDatepicker:function(input){if(input=input.target||input,"input"!=input.nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),!$.datepicker._isDisabledDatepicker(input)&&$.datepicker._lastInput!=input){var inst=$.datepicker._getInst(input);$.datepicker._curInst&&$.datepicker._curInst!=inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var beforeShow=$.datepicker._get(inst,"beforeShow"),beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings!==!1){extendRemove(inst.settings,beforeShowSettings),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight);var isFixed=!1;$(input).parents().each(function(){return isFixed|="fixed"==$(this).css("position"),!isFixed});var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),offset=$.datepicker._checkOffset(inst,offset,isFixed),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"}),!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),postProcess=function(){var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}};inst.dpDiv.zIndex($(input).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv[showAnim||"show"](showAnim?duration:null,postProcess),showAnim&&duration||postProcess(),inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input.focus(),$.datepicker._curInst=inst}}}},_updateDatepicker:function(inst){this.maxRows=4;var borders=$.datepicker._getBorders(inst.dpDiv);instActive=inst,inst.dpDiv.empty().append(this._generateHTML(inst)),this._attachHandlers(inst);var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");cover.length&&cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()}),inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;if(inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),cols>1&&inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em"),inst.dpDiv[(1!=numMonths[0]||1!=numMonths[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement&&inst.input.focus(),inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){origyearshtml===inst.yearshtml&&inst.yearshtml&&inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());return offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0,offset.left-=isFixed&&offset.left==inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top==inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0),
offset},_findPos:function(obj){for(var inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");obj&&("hidden"==obj.type||1!=obj.nodeType||$.expr.filters.hidden(obj));)obj=obj[isRTL?"previousSibling":"nextSibling"];var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(inst&&(!input||inst==$.data(input,PROP_NAME))&&this._datepickerShowing){var showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.datepicker._tidyDialog(inst)};$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv["slideDown"==showAnim?"slideUp":"fadeIn"==showAnim?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess(),this._datepickerShowing=!1;var onClose=this._get(inst,"onClose");onClose&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if($.datepicker._curInst){var $target=$(event.target),inst=$.datepicker._getInst($target[0]);($target[0].id==$.datepicker._mainDivId||0!=$target.parents("#"+$.datepicker._mainDivId).length||$target.hasClass($.datepicker.markerClassName)||$target.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)&&(!$target.hasClass($.datepicker.markerClassName)||$.datepicker._curInst==inst)||$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);this._isDisabledDatepicker(target[0])||(this._adjustInstDate(inst,offset+("M"==period?this._get(inst,"showCurrentAtPos"):0),period),this._updateDatepicker(inst))},_gotoToday:function(id){var target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay)inst.selectedDay=inst.currentDay,inst.drawMonth=inst.selectedMonth=inst.currentMonth,inst.drawYear=inst.selectedYear=inst.currentYear;else{var date=new Date;inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst),this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+("M"==period?"Month":"Year")]=inst["draw"+("M"==period?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10),this._notifyChange(inst),this._adjustDate(target)},_selectDay:function(id,month,year,td){var target=$(id);if(!$(td).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(target[0])){var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))}},_clearDate:function(id){var target=$(id);this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id),inst=this._getInst(target[0]);dateStr=null!=dateStr?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");onSelect?onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],"object"!=typeof inst.input[0]&&inst.input.focus(),this._lastInput=null)},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat"),date=this._getDate(inst),dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[day>0&&6>day,""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(null==format||null==value)throw"Invalid arguments";if(value="object"==typeof value?value.toString():value+"",""==value)return null;var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff="string"!=typeof shortYearCutoff?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);for(var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;return matches&&iFormat++,matches},getNumber=function(match){var isDoubled=lookAhead(match),size="@"==match?14:"!"==match?20:"y"==match&&isDoubled?4:"o"==match?3:2,digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;return iValue+=num[0].length,parseInt(num[0],10)},getName=function(match,shortNames,longNames){var names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),index=-1;if($.each(names,function(i,pair){var name=pair[1];return value.substr(iValue,name.length).toLowerCase()==name.toLowerCase()?(index=pair[0],iValue+=name.length,!1):void 0}),-1!=index)return index+1;throw"Unknown name at position "+iValue},checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++},iValue=0,iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!=format.charAt(iFormat)||lookAhead("'")?checkLiteral():literal=!1;else switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/1e4);year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"'":lookAhead("'")?checkLiteral():literal=!0;break;default:checkLiteral()}if(iValue<value.length){var extra=value.substr(iValue);if(!/^\s+/.test(extra))throw"Extra/unparsed characters found in date: "+extra}if(-1==year?year=(new Date).getFullYear():100>year&&(year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(shortYearCutoff>=year?0:-100)),doy>-1)for(month=1,day=doy;;){var dim=this._getDaysInMonth(year,month-1);if(dim>=day)break;month++,day-=dim}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(format,date,settings){if(!date)return"";var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;return matches&&iFormat++,matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))for(;num.length<len;)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=!1;if(date)for(var iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!=format.charAt(iFormat)||lookAhead("'")?output+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=1e4*date.getTime()+this._ticksTo1970;break;case"'":lookAhead("'")?output+="'":literal=!0;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){for(var chars="",literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;return matches&&iFormat++,matches},iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!=format.charAt(iFormat)||lookAhead("'")?chars+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?chars+="'":literal=!0;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()!=inst.lastVal){var date,defaultDate,dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event),dates=noDefault?"":dates}inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),inst.currentDay=dates?date.getDate():0,inst.currentMonth=dates?date.getMonth():0,inst.currentYear=dates?date.getFullYear():0,this._adjustInstDate(inst)}},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;return date.setDate(date.getDate()+offset),date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}for(var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=7*parseInt(matches[1],10);break;case"m":case"M":month+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=null==date||""===date?defaultDate:"string"==typeof date?offsetString(date):"number"==typeof date?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());return newDate=newDate&&"Invalid Date"==newDate.toString()?defaultDate:newDate,newDate&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate(),inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth(),inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear(),origMonth==inst.selectedMonth&&origYear==inst.selectedYear||noChange||this._notifyChange(inst),this._adjustInstDate(inst),inst.input&&inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&""==inst.input.val()?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var today=new Date;today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=1!=numMonths[0]||1!=numMonths[1],currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(0>drawMonth&&(drawMonth+=12,drawYear--),maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));for(maxDraw=minDate&&minDate>maxDraw?minDate:maxDraw;this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw;)drawMonth--,0>drawMonth&&(drawMonth=11,drawYear--)}inst.drawMonth=drawMonth,inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=navigationAsDateFormat?this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)):prevText;var prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>",nextText=this._get(inst,"nextText");nextText=navigationAsDateFormat?this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)):nextText;var next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>",currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=navigationAsDateFormat?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText;var controls=inst.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(inst,"closeText")+"</button>",buttonPanel=showButtonPanel?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"",firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;for(var showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),dayNamesMin=(this._get(inst,"dayNamesShort"),this._get(inst,"dayNamesMin")),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),defaultDate=(this._get(inst,"calculateWeek")||this.iso8601Week,this._getDefaultDate(inst)),html="",row=0;row<numMonths[0];row++){var group="";this.maxRows=4;for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),cornerClass=" ui-corner-all",calender="";if(isMultiMonth){if(calender+='<div class="ui-datepicker-group',numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first",cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",cornerClass=""}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&0==row?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&0==row?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var thead=showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"",dow=0;7>dow;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,daysInMonth));var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+daysInMonth)/7),numRows=isMultiMonth&&this.maxRows>curRows?this.maxRows:curRows;this.maxRows=numRows;for(var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays)),dRow=0;numRows>dRow;dRow++){calender+="<tr>";for(var tbody=showWeek?'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>":"",dow=0;7>dow;dow++){var daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],otherMonth=printDate.getMonth()!=drawMonth,unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&minDate>printDate||maxDate&&printDate>maxDate;tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+(otherMonth&&!showOtherMonths||!daySettings[2]?"":' title="'+daySettings[2]+'"')+(unselectable?"":' data-handler="selectDay" data-event="click" data-month="'+printDate.getMonth()+'" data-year="'+printDate.getFullYear()+'"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++,drawMonth>11&&(drawMonth=0,drawYear++),calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col==numMonths[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),group+=calender}html+=group}return html+=buttonPanel+($.ui.ie6&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),inst._keyEvent=!1,html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html='<div class="ui-datepicker-title">',monthHtml="";if(secondary||!changeMonth)monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>";else{var inMinYear=minDate&&minDate.getFullYear()==drawYear,inMaxYear=maxDate&&maxDate.getFullYear()==drawYear;monthHtml+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var month=0;12>month;month++)(!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())&&(monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>");monthHtml+="</select>"}if(showMonthAfterYear||(html+=monthHtml+(!secondary&&changeMonth&&changeYear?"":"&#xa0;")),!inst.yearshtml)if(inst.yearshtml="",secondary||!changeYear)html+='<span class="ui-datepicker-year">'+drawYear+"</span>";else{var years=this._get(inst,"yearRange").split(":"),thisYear=(new Date).getFullYear(),determineYear=function(value){var year=value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year},year=determineYear(years[0]),endYear=Math.max(year,determineYear(years[1]||""));for(year=minDate?Math.max(year,minDate.getFullYear()):year,endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear,inst.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';endYear>=year;year++)inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>";inst.yearshtml+="</select>",html+=inst.yearshtml,inst.yearshtml=null}return html+=this._get(inst,"yearSuffix"),showMonthAfterYear&&(html+=(!secondary&&changeMonth&&changeYear?"":"&#xa0;")+monthHtml),html+="</div>"},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+("Y"==period?offset:0),month=inst.drawMonth+("M"==period?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+("D"==period?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),"M"!=period&&"Y"!=period||this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&minDate>date?minDate:date;return newDate=maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");onChange&&onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return null==numMonths?[1,1]:"number"==typeof numMonths?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(0>offset?offset:numMonths[0]*numMonths[1]),1));return 0>offset&&date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth())),this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max");return(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");return shortYearCutoff="string"!=typeof shortYearCutoff?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10),{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){day||(inst.currentDay=inst.selectedDay,inst.currentMonth=inst.selectedMonth,inst.currentYear=inst.selectedYear);var date=day?"object"==typeof day?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}}),$.fn.datepicker=function(options){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var otherArgs=Array.prototype.slice.call(arguments,1);return"string"!=typeof options||"isDisabled"!=options&&"getDate"!=options&&"widget"!=options?"option"==options&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs)):this.each(function(){"string"==typeof options?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)}):$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function($,undefined){var uiDialogClasses="ui-dialog ui-widget ui-widget-content ui-corner-all ",sizeRelatedOptions={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};$.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;0>topOffset&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var uiDialog,uiDialogTitlebar,uiDialogTitlebarClose,uiDialogTitle,uiDialogButtonPane,that=this,options=this.options,title=options.title||"&#160;";uiDialog=(this.uiDialog=$("<div>")).addClass(uiDialogClasses+options.dialogClass).css({display:"none",outline:0,zIndex:options.zIndex}).attr("tabIndex",-1).keydown(function(event){options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(that.close(event),event.preventDefault())}).mousedown(function(event){that.moveToTop(!1,event)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(uiDialog),uiDialogTitlebar=(this.uiDialogTitlebar=$("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){uiDialog.focus()}).prependTo(uiDialog),uiDialogTitlebarClose=$("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(event){event.preventDefault(),that.close(event)}).appendTo(uiDialogTitlebar),(this.uiDialogTitlebarCloseText=$("<span>")).addClass("ui-icon ui-icon-closethick").text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").html(title).prependTo(uiDialogTitlebar),uiDialogButtonPane=(this.uiDialogButtonPane=$("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=$("<div>")).addClass("ui-dialog-buttonset").appendTo(uiDialogButtonPane),uiDialog.attr({role:"dialog","aria-labelledby":uiDialogTitle.attr("id")}),uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection(),this._hoverable(uiDialogTitlebarClose),this._focusable(uiDialogTitlebarClose),options.draggable&&$.fn.draggable&&this._makeDraggable(),options.resizable&&$.fn.resizable&&this._makeResizable(),this._createButtons(options.buttons),this._isOpen=!1,$.fn.bgiframe&&uiDialog.bgiframe(),this._on(uiDialog,{keydown:function(event){if(options.modal&&event.keyCode===$.ui.keyCode.TAB){var tabbables=$(":tabbable",uiDialog),first=tabbables.filter(":first"),last=tabbables.filter(":last");return event.target!==last[0]||event.shiftKey?event.target===first[0]&&event.shiftKey?(last.focus(1),!1):void 0:(first.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var next,oldPosition=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=oldPosition.parent.children().eq(oldPosition.index),next.length&&next[0]!==this.element[0]?next.before(this.element):oldPosition.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(event){var maxZ,thisZ,that=this;if(this._isOpen&&!1!==this._trigger("beforeClose",event))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event)}):(this.uiDialog.hide(),this._trigger("close",event)),$.ui.dialog.overlay.resize(),this.options.modal&&(maxZ=0,$(".ui-dialog").each(function(){this!==that.uiDialog[0]&&(thisZ=$(this).css("z-index"),isNaN(thisZ)||(maxZ=Math.max(maxZ,thisZ)));
}),$.ui.dialog.maxZ=maxZ),this},isOpen:function(){return this._isOpen},moveToTop:function(force,event){var saveScroll,options=this.options;return options.modal&&!force||!options.stack&&!options.modal?this._trigger("focus",event):(options.zIndex>$.ui.dialog.maxZ&&($.ui.dialog.maxZ=options.zIndex),this.overlay&&($.ui.dialog.maxZ+=1,$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ,this.overlay.$el.css("z-index",$.ui.dialog.overlay.maxZ)),saveScroll={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},$.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",$.ui.dialog.maxZ),this.element.attr(saveScroll),this._trigger("focus",event),this)},open:function(){if(!this._isOpen){var hasFocus,options=this.options,uiDialog=this.uiDialog;return this._size(),this._position(options.position),uiDialog.show(options.show),this.overlay=options.modal?new $.ui.dialog.overlay(this):null,this.moveToTop(!0),hasFocus=this.element.find(":tabbable"),hasFocus.length||(hasFocus=this.uiDialogButtonPane.find(":tabbable"),hasFocus.length||(hasFocus=uiDialog)),hasFocus.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(buttons){var that=this,hasButtons=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof buttons&&null!==buttons&&$.each(buttons,function(){return!(hasButtons=!0)}),hasButtons?($.each(buttons,function(name,props){var button,click;props=$.isFunction(props)?{click:props,text:name}:props,props=$.extend({type:"button"},props),click=props.click,props.click=function(){click.apply(that.element[0],arguments)},button=$("<button></button>",props).appendTo(that.uiButtonSet),$.fn.button&&button.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this,options=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()],$(this).removeClass("ui-dialog-dragging"),that._trigger("dragStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()}})},_makeResizable:function(handles){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}handles=handles===undefined?this.options.resizable:handles;var that=this,options=this.options,position=this.uiDialog.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing"),options.height=$(this).height(),options.width=$(this).width(),that._trigger("resizeStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()}}).css("position",position).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(position){var isVisible,myAt=[],offset=[0,0];position?(("string"==typeof position||"object"==typeof position&&"0"in position)&&(myAt=position.split?position.split(" "):[position[0],position[1]],1===myAt.length&&(myAt[1]=myAt[0]),$.each(["left","top"],function(i,offsetPosition){+myAt[i]===myAt[i]&&(offset[i]=myAt[i],myAt[i]=offsetPosition)}),position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")}),position=$.extend({},$.ui.dialog.prototype.options.position,position)):position=$.ui.dialog.prototype.options.position,isVisible=this.uiDialog.is(":visible"),isVisible||this.uiDialog.show(),this.uiDialog.position(position),isVisible||this.uiDialog.hide()},_setOptions:function(options){var that=this,resizableOptions={},resize=!1;$.each(options,function(key,value){that._setOption(key,value),key in sizeRelatedOptions&&(resize=!0),key in resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;switch(key){case"buttons":this._createButtons(value);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+value);break;case"dialogClass":uiDialog.removeClass(this.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":value?uiDialog.addClass("ui-dialog-disabled"):uiDialog.removeClass("ui-dialog-disabled");break;case"draggable":isDraggable=uiDialog.is(":data(draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable();break;case"position":this._position(value);break;case"resizable":isResizable=uiDialog.is(":data(resizable)"),isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||this._makeResizable(value);break;case"title":$(".ui-dialog-title",this.uiDialogTitlebar).html(""+(value||"&#160;"))}this._super(key,value)},_size:function(){var nonContentHeight,minContentHeight,autoHeight,options=this.options,isVisible=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),"auto"===options.height?$.support.minHeight?this.element.css({minHeight:minContentHeight,height:"auto"}):(this.uiDialog.show(),autoHeight=this.element.css("height","auto").height(),isVisible||this.uiDialog.hide(),this.element.height(Math.max(autoHeight,minContentHeight))):this.element.height(Math.max(options.height-nonContentHeight,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),$.extend($.ui.dialog,{uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr("id");return id||(this.uuid+=1,id=this.uuid),"ui-dialog-title-"+id},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog)}}),$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(event){return event+".dialog-overlay"}).join(" "),create:function(dialog){0===this.instances.length&&(setTimeout(function(){$.ui.dialog.overlay.instances.length&&$(document).bind($.ui.dialog.overlay.events,function(event){return $(event.target).zIndex()<$.ui.dialog.overlay.maxZ?!1:void 0})},1),$(window).bind("resize.dialog-overlay",$.ui.dialog.overlay.resize));var $el=this.oldInstances.pop()||$("<div>").addClass("ui-widget-overlay");return $(document).bind("keydown.dialog-overlay",function(event){var instances=$.ui.dialog.overlay.instances;0!==instances.length&&instances[instances.length-1]===$el&&dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(dialog.close(event),event.preventDefault())}),$el.appendTo(document.body).css({width:this.width(),height:this.height()}),$.fn.bgiframe&&$el.bgiframe(),this.instances.push($el),$el},destroy:function($el){var indexOf=$.inArray($el,this.instances),maxZ=0;-1!==indexOf&&this.oldInstances.push(this.instances.splice(indexOf,1)[0]),0===this.instances.length&&$([document,window]).unbind(".dialog-overlay"),$el.height(0).width(0).remove(),$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css("z-index"))}),this.maxZ=maxZ},height:function(){var scrollHeight,offsetHeight;return $.ui.ie?(scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),offsetHeight>scrollHeight?$(window).height()+"px":scrollHeight+"px"):$(document).height()+"px"},width:function(){var scrollWidth,offsetWidth;return $.ui.ie?(scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),offsetWidth>scrollWidth?$(window).width()+"px":scrollWidth+"px"):$(document).width()+"px"},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this)}),$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()})}}),$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function($,undefined){var mouseHandled=!1;$.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){this.options.disabled&&event.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault()},"click .ui-state-disabled > a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");!mouseHandled&&target.not(".ui-state-disabled").length&&(mouseHandled=!0,this.select(event),target.has(".ui-menu").length?this.expand(event):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);keepActiveItem||this.focus(event,item)},blur:function(event){this._delay(function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(event)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(event){$(event.target).closest(".ui-menu").length||this.collapseAll(event),mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);elem.data("ui-menu-submenu-carat")&&elem.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var match,prev,character,skip,regex,preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=!1,prev=this.previousFilter||"",character=String.fromCharCode(event.keyCode),skip=!1,clearTimeout(this.filterTimer),character===prev?skip=!0:character=prev+character,regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())}),match=skip&&-1!==match.index(this.active.next())?this.active.nextAll(".ui-menu-item"):match,match.length||(character=String.fromCharCode(event.keyCode),regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())})),match.length?(this.focus(event,match),match.length>1?(this.previousFilter=character,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}preventDefault&&event.preventDefault()},_activate:function(event){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(event):this.select(event))},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",!0);item.attr("aria-haspopup","true").prepend(submenuCarat),menu.attr("aria-labelledby",item.attr("id"))}),menus=submenus.add(this.element),menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);/[^\-—–\s]/.test(item.text())||item.addClass("ui-widget-content ui-menu-divider")}),menus.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(event,item){var nested,focused;this.blur(event,event&&"focus"===event.type),this._scrollIntoView(item),this.active=item.first(),focused=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",focused.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),event&&"keydown"===event.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),nested=item.children(".ui-menu"),nested.length&&/^mouse/.test(event.type)&&this._startOpening(nested),this.activeMenu=item.parent(),this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;this._hasScroll()&&(borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop,scroll=this.activeMenu.scrollTop(),elementHeight=this.activeMenu.height(),itemHeight=item.height(),0>offset?this.activeMenu.scrollTop(scroll+offset):offset+itemHeight>elementHeight&&this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight))},blur:function(event,fromFocus){fromFocus||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",event,{item:this.active}))},_startOpening:function(submenu){clearTimeout(this.timer),"true"===submenu.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(submenu)},this.delay))},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true"),submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer),this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));currentMenu.length||(currentMenu=this.element),this._close(currentMenu),this.blur(event),this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){startMenu||(startMenu=this.active?this.active.parent():this.element),startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);newItem&&newItem.length&&(this._close(),this.focus(event,newItem))},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();newItem&&newItem.length&&(this._open(newItem.parent()),this._delay(function(){this.focus(event,newItem)}))},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;this.active&&(next="first"===direction||"last"===direction?this.active["first"===direction?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[direction+"All"](".ui-menu-item").eq(0)),next&&next.length&&this.active||(next=this.activeMenu.children(".ui-menu-item")[filter]()),this.focus(event,next)},nextPage:function(event){var item,base,height;return this.active?void(this.isLastItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base-height<0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(event)},previousPage:function(event){var item,base,height;return this.active?void(this.isFirstItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base+height>0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item").first()))):void this.next(event)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(event,!0),this._trigger("select",event,ui)}})}(jQuery),function($,undefined){$.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(newValue){return newValue===undefined?this._value():(this._setOption("value",newValue),this)},_setOption:function(key,value){"value"===key&&(this.options.value=value,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(key,value)},_value:function(){var val=this.options.value;return"number"!=typeof val&&(val=0),Math.min(this.options.max,Math.max(this.min,val))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var value=this.value(),percentage=this._percentage();this.oldValue!==value&&(this.oldValue=value,this._trigger("change")),this.valueDiv.toggle(value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%"),this.element.attr("aria-valuenow",value)}})}(jQuery),function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i,handleCount,o=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handles=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(o.disabled?" ui-slider-disabled ui-disabled":"")),this.range=$([]),o.range&&(o.range===!0&&(o.values||(o.values=[this._valueMin(),this._valueMin()]),o.values.length&&2!==o.values.length&&(o.values=[o.values[0],o.values[0]])),this.range=$("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===o.range||"max"===o.range?" ui-slider-range-"+o.range:""))),handleCount=o.values&&o.values.length||1,i=existingHandles.length;handleCount>i;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(event){event.preventDefault()}).mouseenter(function(){o.disabled||$(this).addClass("ui-state-hover")}).mouseleave(function(){$(this).removeClass("ui-state-hover")}).focus(function(){o.disabled?$(this).blur():($(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),$(this).addClass("ui-state-focus"))}).blur(function(){$(this).removeClass("ui-state-focus")}),this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)}),this._on(this.handles,{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(event.preventDefault(),!this._keySliding&&(this._keySliding=!0,$(event.target).addClass("ui-state-active"),allowed=this._start(event,index),allowed===!1))return}switch(step=this.options.step,curVal=newVal=this.options.values&&this.options.values.length?this.values(index):this.value(),event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step)}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(event,index),this._change(event,index),$(event.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position),distance=this._valueMax()-this._valueMin()+1,this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));distance>thisDistance&&(distance=thisDistance,closestHandle=$(this),index=i)}),o.range===!0&&this.values(1)===o.min&&(index+=1,closestHandle=$(this.handles[index])),allowed=this._start(event,index),allowed===!1?!1:(this._mouseSliding=!0,this._handleIndex=index,closestHandle.addClass("ui-state-active").focus(),offset=closestHandle.offset(),mouseOverHandle=!$(event.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);return this._slide(event,this._handleIndex,normValue),!1},_mouseStop:function(event){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(event,this._handleIndex),this._change(event,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;return"horizontal"===this.orientation?(pixelTotal=this.elementSize.width,pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(pixelTotal=this.elementSize.height,pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),percentMouse=pixelMouse/pixelTotal,percentMouse>1&&(percentMouse=1),0>percentMouse&&(percentMouse=0),"vertical"===this.orientation&&(percentMouse=1-percentMouse),valueTotal=this._valueMax()-this._valueMin(),valueMouse=this._valueMin()+percentMouse*valueTotal,this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};return this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;this.options.values&&this.options.values.length?(otherVal=this.values(index?0:1),2===this.options.values.length&&this.options.range===!0&&(0===index&&newVal>otherVal||1===index&&otherVal>newVal)&&(newVal=otherVal),newVal!==this.values(index)&&(newValues=this.values(),newValues[index]=newVal,allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues}),otherVal=this.values(index?0:1),allowed!==!1&&this.values(index,newVal,!0))):newVal!==this.value()&&(allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal}),allowed!==!1&&this.value(newVal))},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("change",event,uiHash)}},value:function(newValue){return arguments.length?(this.options.value=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,0)):this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1)return this.options.values[index]=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,index);if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();for(vals=this.options.values,newValues=arguments[0],i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(newValues[i]),this._change(null,i);this._refreshValue()},_setOption:function(key,value){var i,valsLength=0;switch($.isArray(this.options.values)&&(valsLength=this.options.values.length),$.Widget.prototype._setOption.apply(this,arguments),key){case"disabled":value?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;valsLength>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var val=this.options.value;return val=this._trimAlignValue(val)},_values:function(index){var val,vals,i;if(arguments.length)return val=this.options.values[index],val=this._trimAlignValue(val);for(vals=this.options.values.slice(),i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;return 2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=this._animateOff?!1:o.animate,_set={};this.options.values&&this.options.values.length?this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100,_set["horizontal"===that.orientation?"left":"bottom"]=valPercent+"%",$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate),that.options.range===!0&&("horizontal"===that.orientation?(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})):(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate}))),
lastValPercent=valPercent}):(value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0,_set["horizontal"===this.orientation?"left":"bottom"]=valPercent+"%",this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate),"min"===oRange&&"horizontal"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate),"max"===oRange&&"horizontal"===this.orientation&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate}),"min"===oRange&&"vertical"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate),"max"===oRange&&"vertical"===this.orientation&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate}))}})}(jQuery),function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments),this._refresh(),previous!==this.element.val()&&this._trigger("change")}}$.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var options={},element=this.element;return $.each(["min","max","step"],function(i,option){var value=element.attr(option);void 0!==value&&value.length&&(options[option]=value)}),options},_events:{keydown:function(event){this._start(event)&&this._keydown(event)&&event.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(event){return this.cancelBlur?void delete this.cancelBlur:(this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",event)))},mousewheel:function(event,delta){if(delta){if(!this.spinning&&!this._start(event))return!1;this._spin((delta>0?1:-1)*this.options.step,event),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(event)},100),event.preventDefault()}},"mousedown .ui-spinner-button":function(event){function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;isActive||(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous}))}var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),event.preventDefault(),checkFocus.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,checkFocus.call(this)}),this._start(event)!==!1&&this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){return $(event.currentTarget).hasClass("ui-state-active")?this._start(event)===!1?!1:void this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*uiSpinner.height())&&uiSpinner.height()>0&&uiSpinner.height(uiSpinner.height()),this.options.disabled&&this.disable()},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:return this._repeat(null,1,event),!0;case keyCode.DOWN:return this._repeat(null,-1,event),!0;case keyCode.PAGE_UP:return this._repeat(null,options.page,event),!0;case keyCode.PAGE_DOWN:return this._repeat(null,-options.page,event),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(event){return this.spinning||this._trigger("start",event)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(i,steps,event){i=i||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,steps,event)},i),this._spin(steps*this.options.step,event)},_spin:function(step,event){var value=this.value()||0;this.counter||(this.counter=1),value=this._adjustValue(value+step*this._increment(this.counter)),this.spinning&&this._trigger("spin",event,{value:value})===!1||(this._value(value),this.counter++)},_increment:function(i){var incremental=this.options.incremental;return incremental?$.isFunction(incremental)?incremental(i):Math.floor(i*i*i/5e4-i*i/500+17*i/200+1):1},_precision:function(){var precision=this._precisionOf(this.options.step);return null!==this.options.min&&(precision=Math.max(precision,this._precisionOf(this.options.min))),precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return-1===decimal?0:str.length-decimal-1},_adjustValue:function(value){var base,aboveMin,options=this.options;return base=null!==options.min?options.min:0,aboveMin=value-base,aboveMin=Math.round(aboveMin/options.step)*options.step,value=base+aboveMin,value=parseFloat(value.toFixed(this._precision())),null!==options.max&&value>options.max?options.max:null!==options.min&&value<options.min?options.min:value},_stop:function(event){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",event))},_setOption:function(key,value){if("culture"===key||"numberFormat"===key){var prevValue=this._parse(this.element.val());return this.options[key]=value,void this.element.val(this._format(prevValue))}"max"!==key&&"min"!==key&&"step"!==key||"string"==typeof value&&(value=this._parse(value)),this._super(key,value),"disabled"===key&&(value?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:modifier(function(options){this._super(options),this._value(this.element.val())}),_parse:function(val){return"string"==typeof val&&""!==val&&(val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val),""===val||isNaN(val)?null:val},_format:function(value){return""===value?"":window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(value,allowAny){var parsed;""!==value&&(parsed=this._parse(value),null!==parsed&&(allowAny||(parsed=this._adjustValue(parsed)),value=this._format(parsed))),this.element.val(value),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:modifier(function(steps){this._stepUp(steps)}),_stepUp:function(steps){this._spin((steps||1)*this.options.step)},stepDown:modifier(function(steps){this._stepDown(steps)}),_stepDown:function(steps){this._spin((steps||1)*-this.options.step)},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page)}),value:function(newVal){return arguments.length?void modifier(this._value).call(this,newVal):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function($,undefined){function getNextTabId(){return++tabId}function isLocal(anchor){return anchor.hash.length>1&&anchor.href.replace(rhash,"")===location.href.replace(rhash,"").replace(/\s/g,"%20")}var tabId=0,rhash=/#.*$/;$.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var that=this,options=this.options,active=options.active,locationHash=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){$(this).is(".ui-state-disabled")&&event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){$(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===active&&(locationHash&&this.tabs.each(function(i,tab){return $(tab).attr("aria-controls")===locationHash?(active=i,!1):void 0}),null===active&&(active=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==active&&-1!==active||(active=this.tabs.length?0:!1)),active!==!1&&(active=this.tabs.index(this.tabs.eq(active)),-1===active&&(active=options.collapsible?!1:0)),options.active=active,!options.collapsible&&options.active===!1&&this.anchors.length&&(options.active=0),$.isArray(options.disabled)&&(options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=$(),this._refresh(),this.active.length&&this.load(options.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):$()}},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=!0;if(!this._handlePageNav(event)){switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=!1,selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex);case $.ui.keyCode.ENTER:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex===this.options.active?!1:selectedIndex);default:return}event.preventDefault(),clearTimeout(this.activating),selectedIndex=this._focusNextTab(selectedIndex,goingForward),event.ctrlKey||(focusedTab.attr("aria-selected","false"),this.tabs.eq(selectedIndex).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",selectedIndex)},this.delay))}},_panelKeydown:function(event){this._handlePageNav(event)||event.ctrlKey&&event.keyCode===$.ui.keyCode.UP&&(event.preventDefault(),this.active.focus())},_handlePageNav:function(event){return event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(index,goingForward){function constrain(){return index>lastTabIndex&&(index=0),0>index&&(index=lastTabIndex),index}for(var lastTabIndex=this.tabs.length-1;-1!==$.inArray(constrain(),this.options.disabled);)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){return index=this._findNextTab(index,goingForward),this.tabs.eq(index).focus(),index},_setOption:function(key,value){return"active"===key?void this._activate(value):"disabled"===key?void this._setupDisabled(value):(this._super(key,value),"collapsible"===key&&(this.element.toggleClass("ui-tabs-collapsible",value),value||this.options.active!==!1||this._activate(0)),"event"===key&&this._setupEvents(value),void("heightStyle"===key&&this._setupHeightStyle(value)))},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)}),this._processTabs(),options.active!==!1&&this.anchors.length?this.active.length&&!$.contains(this.tablist[0],this.active[0])?this.tabs.length===options.disabled.length?(options.active=!1,this.active=$()):this._activate(this._findNextTab(Math.max(0,options.active-1),!1)):options.active=this.tabs.index(this.active):(options.active=!1,this.active=$()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=$(),this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");isLocal(anchor)?(selector=anchor.hash,panel=that.element.find(that._sanitizeSelector(selector))):(panelId=that._tabId(tab),selector="#"+panelId,panel=that.element.find(selector),panel.length||(panel=that._createPanel(panelId),panel.insertAfter(that.panels[i-1]||that.tablist)),panel.attr("aria-live","polite")),panel.length&&(that.panels=that.panels.add(panel)),originalAriaControls&&tab.data("ui-tabs-aria-controls",originalAriaControls),tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId}),panel.attr("aria-labelledby",anchorId)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(disabled){$.isArray(disabled)&&(disabled.length?disabled.length===this.anchors.length&&(disabled=!0):disabled=!1);for(var li,i=0;li=this.tabs[i];i++)disabled===!0||-1!==$.inArray(i,disabled)?$(li).addClass("ui-state-disabled").attr("aria-disabled","true"):$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,events),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,overflow,parent=this.element.parent();"fill"===heightStyle?($.support.minHeight||(overflow=parent.css("overflow"),parent.css("overflow","hidden")),maxHeight=parent.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),overflow&&parent.css("overflow",overflow),this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(!0)}),this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight))},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=active.length?this._getPanelForTab(active):$(),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault(),tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.tabs.index(tab),this.active=clickedIsActive?$():tab,this.xhr&&this.xhr.abort(),toHide.length||toShow.length||$.error("jQuery UI Tabs: Mismatching fragment identifier."),toShow.length&&this.load(this.tabs.index(tab),event),this._toggle(event,eventData))},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&that.options.show?that._show(toShow,that.options.show,complete):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=!0,toHide.length&&this.options.hide?this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show()),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),eventData.oldTab.attr("aria-selected","false"),toShow.length&&toHide.length?eventData.oldTab.attr("tabIndex",-1):toShow.length&&this.tabs.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}),eventData.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);active[0]!==this.active[0]&&(active.length||(active=this.active),anchor=active.find(".ui-tabs-anchor")[0],this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop}))},_findActive:function(index){return index===!1?$():this.tabs.eq(index)},_getIndex:function(index){return"string"==typeof index&&(index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"))),index},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){$.data(this,"ui-tabs-destroy")?$(this).remove():$(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");prev?li.attr("aria-controls",prev):li.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;disabled!==!1&&(index===undefined?disabled=!1:(index=this._getIndex(index),disabled=$.isArray(disabled)?$.map(disabled,function(num){return num!==index?num:null}):$.map(this.tabs,function(li,num){return num!==index?num:null})),this._setupDisabled(disabled))},disable:function(index){var disabled=this.options.disabled;if(disabled!==!0){if(index===undefined)disabled=!0;else{if(index=this._getIndex(index),-1!==$.inArray(index,disabled))return;disabled=$.isArray(disabled)?$.merge([index],disabled).sort():[index]}this._setupDisabled(disabled)}},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};isLocal(anchor[0])||(this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData)),this.xhr&&"canceled"!==this.xhr.statusText&&(tab.addClass("ui-tabs-loading"),panel.attr("aria-busy","true"),this.xhr.success(function(response){setTimeout(function(){panel.html(response),that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){"abort"===status&&that.panels.stop(!1,!0),tab.removeClass("ui-tabs-loading"),panel.removeAttr("aria-busy"),jqXHR===that.xhr&&delete that.xhr},1)})))},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}}),$.uiBackCompat!==!1&&($.ui.tabs.prototype._ui=function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)}},$.widget("ui.tabs",$.ui.tabs,{url:function(index,url){this.anchors.eq(index).attr("href",url)}}),$.widget("ui.tabs",$.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var that=this;this._on({tabsbeforeload:function(event,ui){return $.data(ui.tab[0],"cache.tabs")?void event.preventDefault():void ui.jqXHR.success(function(){that.options.cache&&$.data(ui.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(anchor,event,ui){var ajaxOptions=this.options.ajaxOptions;return $.extend({},ajaxOptions,{error:function(xhr,status){try{ajaxOptions.error(xhr,status,ui.tab.closest("li").index(),ui.tab[0])}catch(error){}}},this._superApply(arguments))},_setOption:function(key,value){"cache"===key&&value===!1&&this.anchors.removeData("cache.tabs"),this._super(key,value)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(index){this.anchors.eq(index).removeData("cache.tabs"),this._superApply(arguments)}}),$.widget("ui.tabs",$.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),$.widget("ui.tabs",$.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(event,ui){if(event.target===this.element[0]&&this.options.spinner){var span=ui.tab.find("span"),html=span.html();span.html(this.options.spinner),ui.jqXHR.complete(function(){span.html(html)})}}})}}),$.widget("ui.tabs",$.ui.tabs,{options:{enable:null,disable:null},enable:function(index){var trigger,options=this.options;(index&&options.disabled===!0||$.isArray(options.disabled)&&-1!==$.inArray(index,options.disabled))&&(trigger=!0),this._superApply(arguments),trigger&&this._trigger("enable",null,this._ui(this.anchors[index],this.panels[index]))},disable:function(index){var trigger,options=this.options;(index&&options.disabled===!1||$.isArray(options.disabled)&&-1===$.inArray(index,options.disabled))&&(trigger=!0),this._superApply(arguments),trigger&&this._trigger("disable",null,this._ui(this.anchors[index],this.panels[index]))}}),$.widget("ui.tabs",$.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(url,label,index){index===undefined&&(index=this.anchors.length);var doInsertAfter,panel,options=this.options,li=$(options.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=url.indexOf("#")?this._tabId(li):url.replace("#","");return li.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),li.attr("aria-controls",id),doInsertAfter=index>=this.tabs.length,panel=this.element.find("#"+id),panel.length||(panel=this._createPanel(id),doInsertAfter?index>0?panel.insertAfter(this.panels.eq(-1)):panel.appendTo(this.element):panel.insertBefore(this.panels[index])),panel.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),doInsertAfter?li.appendTo(this.tablist):li.insertBefore(this.tabs[index]),options.disabled=$.map(options.disabled,function(n){return n>=index?++n:n}),this.refresh(),1===this.tabs.length&&options.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[index],this.panels[index])),this},remove:function(index){index=this._getIndex(index);var options=this.options,tab=this.tabs.eq(index).remove(),panel=this._getPanelForTab(tab).remove();return tab.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(index+(index+1<this.anchors.length?1:-1)),options.disabled=$.map($.grep(options.disabled,function(n){return n!==index}),function(n){return n>=index?--n:n}),this.refresh(),this._trigger("remove",null,this._ui(tab.find("a")[0],panel[0])),this}}),$.widget("ui.tabs",$.ui.tabs,{length:function(){return this.anchors.length}}),$.widget("ui.tabs",$.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(tab){var a=tab.is("li")?tab.find("a[href]"):tab;return a=a[0],$(a).closest("li").attr("aria-controls")||a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+getNextTabId()}}),$.widget("ui.tabs",$.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(id){return $(this.options.panelTemplate).attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),$.widget("ui.tabs",$.ui.tabs,{_create:function(){var options=this.options;null===options.active&&options.selected!==undefined&&(options.active=-1===options.selected?!1:options.selected),this._super(),options.selected=options.active,options.selected===!1&&(options.selected=-1)},_setOption:function(key,value){if("selected"!==key)return this._super(key,value);var options=this.options;this._super("active",-1===value?!1:value),options.selected=options.active,options.selected===!1&&(options.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),$.widget("ui.tabs",$.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(type,event,data){var tab,panel,ret=this._superApply(arguments);return ret?("beforeActivate"===type?(tab=data.newTab.length?data.newTab:data.oldTab,panel=data.newPanel.length?data.newPanel:data.oldPanel,ret=this._super("select",event,{tab:tab.find(".ui-tabs-anchor")[0],panel:panel[0],index:tab.closest("li").index()})):"activate"===type&&data.newTab.length&&(ret=this._super("show",event,{tab:data.newTab.find(".ui-tabs-anchor")[0],panel:data.newPanel[0],index:data.newTab.closest("li").index()})),ret):!1}}),$.widget("ui.tabs",$.ui.tabs,{select:function(index){if(index=this._getIndex(index),-1===index){if(!this.options.collapsible||-1===this.options.selected)return;index=this.options.selected}this.anchors.eq(index).trigger(this.options.event+this.eventNamespace)}}),function(){var listId=0;$.widget("ui.tabs",$.ui.tabs,{options:{cookie:null},_create:function(){var active,options=this.options;null==options.active&&options.cookie&&(active=parseInt(this._cookie(),10),-1===active&&(active=!1),options.active=active),this._super()},_cookie:function(active){var cookie=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++listId)];return arguments.length&&(cookie.push(active===!1?-1:active),cookie.push(this.options.cookie)),$.cookie.apply(null,cookie)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),$.widget("ui.tabs",$.ui.tabs,{_trigger:function(type,event,data){var _data=$.extend({},data);return"load"===type&&(_data.panel=_data.panel[0],_data.tab=_data.tab.find(".ui-tabs-anchor")[0]),this._super(type,event,_data)}}),$.widget("ui.tabs",$.ui.tabs,{options:{fx:null},_getFx:function(){var hide,show,fx=this.options.fx;return fx&&($.isArray(fx)?(hide=fx[0],show=fx[1]):hide=show=fx),fx?{show:show,hide:hide}:null},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&fx.show?toShow.animate(fx.show,fx.show.duration,function(){complete()}):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel,fx=this._getFx();return fx?(that.running=!0,void(toHide.length&&fx.hide?toHide.animate(fx.hide,fx.hide.duration,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show()))):this._super(event,eventData)}}))}(jQuery),function($){function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id),elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);-1!==index&&describedby.splice(index,1),elem.removeData("ui-tooltip-id"),describedby=$.trim(describedby.join(" ")),describedby?elem.attr("aria-describedby",describedby):elem.removeAttr("aria-describedby")}var increments=0;$.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return $(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(key,value){var that=this;return"disabled"===key?(this[value?"_disable":"_enable"](),void(this.options[key]=value)):(this._super(key,value),void("content"===key&&$.each(this.tooltips,function(id,element){that._updateContent(element)})))},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0)}),this.element.find(this.options.items).andSelf().each(function(){var element=$(this);element.is("[title]")&&element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var element=$(this);element.data("ui-tooltip-title")&&element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);target.length&&!target.data("ui-tooltip-id")&&(target.attr("title")&&target.data("ui-tooltip-title",target.attr("title")),
target.data("ui-tooltip-open",!0),event&&"mouseover"===event.type&&target.parents().each(function(){var blurEvent,parent=$(this);parent.data("ui-tooltip-open")&&(blurEvent=$.Event("blur"),blurEvent.target=blurEvent.currentTarget=this,that.close(blurEvent,!0)),parent.attr("title")&&(parent.uniqueId(),that.parents[this.id]={element:this,title:parent.attr("title")},parent.attr("title",""))}),this._updateContent(target,event))},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;return"string"==typeof contentOption?this._open(event,target,contentOption):(content=contentOption.call(target[0],function(response){target.data("ui-tooltip-open")&&that._delay(function(){event&&(event.type=eventType),this._open(event,target,response)})}),void(content&&this._open(event,target,content)))},_open:function(event,target,content){function position(event){positionOption.of=event,tooltip.is(":hidden")||tooltip.position(positionOption)}var tooltip,events,delayedShow,positionOption=$.extend({},this.options.position);if(content){if(tooltip=this._find(target),tooltip.length)return void tooltip.find(".ui-tooltip-content").html(content);target.is("[title]")&&(event&&"mouseover"===event.type?target.attr("title",""):target.removeAttr("title")),tooltip=this._tooltip(target),addDescribedBy(target,tooltip.attr("id")),tooltip.find(".ui-tooltip-content").html(content),this.options.track&&event&&/^mouse/.test(event.type)?(this._on(this.document,{mousemove:position}),position(event)):tooltip.position($.extend({of:target},this.options.position)),tooltip.hide(),this._show(tooltip,this.options.show),this.options.show&&this.options.show.delay&&(delayedShow=setInterval(function(){tooltip.is(":visible")&&(position(positionOption.of),clearInterval(delayedShow))},$.fx.interval)),this._trigger("open",event,{tooltip:tooltip}),events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0],this.close(fakeEvent,!0)}},remove:function(){this._removeTooltip(tooltip)}},event&&"mouseover"!==event.type||(events.mouseleave="close"),event&&"focusin"!==event.type||(events.focusout="close"),this._on(!0,target,events)}},close:function(event){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);this.closing||(target.data("ui-tooltip-title")&&target.attr("title",target.data("ui-tooltip-title")),removeDescribedBy(target),tooltip.stop(!0),this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))}),target.removeData("ui-tooltip-open"),this._off(target,"mouseleave focusout keyup"),target[0]!==this.element[0]&&this._off(target,"remove"),this._off(this.document,"mousemove"),event&&"mouseleave"===event.type&&$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title),delete that.parents[id]}),this.closing=!0,this._trigger("close",event,{tooltip:tooltip}),this.closing=!1)},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return $("<div>").addClass("ui-tooltip-content").appendTo(tooltip),tooltip.appendTo(this.document[0].body),$.fn.bgiframe&&tooltip.bgiframe(),this.tooltips[id]=element,tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_removeTooltip:function(tooltip){tooltip.remove(),delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0),$("#"+id).remove(),element.data("ui-tooltip-title")&&(element.attr("title",element.data("ui-tooltip-title")),element.removeData("ui-tooltip-title"))})}})}(jQuery),jQuery.effects||function($,undefined){var backCompat=$.uiBackCompat!==!1,dataSpace="ui-effects-";$.effects={effect:{}},function(jQuery,undefined){function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};return null==value?allowEmpty||!prop.def?null:prop.def:(value=type.floor?~~value:parseFloat(value),isNaN(value)?prop.def:type.mod?(value+type.mod)%type.mod:0>value?0:type.max<value?type.max:value)}function stringParse(string){var inst=color(),rgba=inst._rgba=[];return string=string.toLowerCase(),each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";return values?(parsed=inst[spaceName](values),inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache],rgba=inst._rgba=parsed._rgba,!1):void 0}),rgba.length?("0,0,0,0"===rgba.join()&&jQuery.extend(rgba,colors.transparent),inst):colors[string]}function hue2rgb(p,q,h){return h=(h+1)%1,1>6*h?p+(q-p)*h*6:1>2*h?q:2>3*h?p+(q-p)*(2/3-h)*6:p}var colors,stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]]}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha)},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},support=color.support={},supportElem=jQuery("<p>")[0],each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)",support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1,each(spaces,function(spaceName,space){space.cache="_"+spaceName,space.props.alpha={idx:3,type:"percent",def:1}}),color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined)return this._rgba=[null,null,null,null],this;(red.jquery||red.nodeType)&&(red=jQuery(red).css(green),green=undefined);var inst=this,type=jQuery.type(red),rgba=this._rgba=[];return green!==undefined&&(red=[red,green,blue,alpha],type="array"),"string"===type?this.parse(stringParse(red)||colors._default):"array"===type?(each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop)}),this):"object"===type?(red instanceof color?each(spaces,function(spaceName,space){red[space.cache]&&(inst[space.cache]=red[space.cache].slice())}):each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if("alpha"===key||null==red[key])return;inst[cache]=space.to(inst._rgba)}inst[cache][prop.idx]=clamp(red[key],prop,!0)}),inst[cache]&&$.inArray(null,inst[cache].slice(0,3))<0&&(inst[cache][3]=1,space.from&&(inst._rgba=space.from(inst[cache])))}),this):void 0},is:function(compare){var is=color(compare),same=!0,inst=this;return each(spaces,function(_,space){var localCache,isCache=is[space.cache];return isCache&&(localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[],each(space.props,function(_,prop){return null!=isCache[prop.idx]?same=isCache[prop.idx]===localCache[prop.idx]:void 0})),same}),same},_space:function(){var used=[],inst=this;return each(spaces,function(spaceName,space){inst[space.cache]&&used.push(spaceName)}),used.pop()},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=0===this.alpha()?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();return end=end[space.cache],each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};null!==endValue&&(null===startValue?result[index]=endValue:(type.mod&&(endValue-startValue>type.mod/2?startValue+=type.mod:startValue-endValue>type.mod/2&&(startValue-=type.mod)),result[index]=clamp((endValue-startValue)*distance+startValue,prop)))}),this[spaceName](result)},blend:function(opaque){if(1===this._rgba[3])return this;var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v}))},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return null==v?i>2?1:0:v});return 1===rgba[3]&&(rgba.pop(),prefix="rgb("),prefix+rgba.join()+")"},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){return null==v&&(v=i>2?1:0),i&&3>i&&(v=Math.round(100*v)+"%"),v});return 1===hsla[3]&&(hsla.pop(),prefix="hsl("),prefix+hsla.join()+")"},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();return includeAlpha&&rgba.push(~~(255*alpha)),"#"+jQuery.map(rgba,function(v){return v=(v||0).toString(16),1===v.length?"0"+v:v}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),color.fn.parse.prototype=color.fn,spaces.hsla.to=function(rgba){if(null==rgba[0]||null==rgba[1]||null==rgba[2])return[null,null,null,rgba[3]];var h,s,r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=.5*add;return h=min===max?0:r===max?60*(g-b)/diff+360:g===max?60*(b-r)/diff+120:60*(r-g)/diff+240,s=0===l||1===l?l:.5>=l?diff/add:diff/(2-add),[Math.round(h)%360,s,l,null==a?1:a]},spaces.hsla.from=function(hsla){if(null==hsla[0]||null==hsla[1]||null==hsla[2])return[null,null,null,hsla[3]];var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=.5>=l?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(255*hue2rgb(p,q,h+1/3)),Math.round(255*hue2rgb(p,q,h)),Math.round(255*hue2rgb(p,q,h-1/3)),a]},each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]&&(this[cache]=to(this._rgba)),value===undefined)return this[cache].slice();var ret,type=jQuery.type(value),arr="array"===type||"object"===type?value:arguments,local=this[cache].slice();return each(props,function(key,prop){var val=arr["object"===type?key:prop.idx];null==val&&(val=local[prop.idx]),local[prop.idx]=clamp(val,prop)}),from?(ret=color(from(local)),ret[cache]=local,ret):color(local)},each(props,function(key,prop){color.fn[key]||(color.fn[key]=function(value){var match,vtype=jQuery.type(value),fn="alpha"===key?this._hsla?"hsla":"rgba":spaceName,local=this[fn](),cur=local[prop.idx];return"undefined"===vtype?cur:("function"===vtype&&(value=value.call(this,cur),vtype=jQuery.type(value)),null==value&&prop.empty?this:("string"===vtype&&(match=rplusequals.exec(value),match&&(value=cur+parseFloat(match[2])*("+"===match[1]?1:-1))),local[prop.idx]=value,this[fn](local)))})})}),each(stepHooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if("string"!==jQuery.type(value)||(parsed=stringParse(value))){if(value=color(parsed||value),!support.rgba&&1!==value._rgba[3]){for(curElem="backgroundColor"===hook?elem.parentNode:elem;(""===backgroundColor||"transparent"===backgroundColor)&&curElem&&curElem.style;)try{backgroundColor=jQuery.css(curElem,"backgroundColor"),curElem=curElem.parentNode}catch(e){}value=value.blend(backgroundColor&&"transparent"!==backgroundColor?backgroundColor:"_default")}value=value.toRgbaString()}try{elem.style[hook]=value}catch(error){}}},jQuery.fx.step[hook]=function(fx){fx.colorInit||(fx.start=color(fx.elem,hook),fx.end=color(fx.end),fx.colorInit=!0),jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos))}}),jQuery.cssHooks.borderColor={expand:function(value){var expanded={};return each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value}),expanded}},colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function getElementStyles(){var key,len,style=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={};if(style&&style.length&&style[0]&&style[style[0]])for(len=style.length;len--;)key=style[len],"string"==typeof style[key]&&(newStyle[$.camelCase(key)]=style[key]);else for(key in style)"string"==typeof style[key]&&(newStyle[key]=style[key]);return newStyle}function styleDifference(oldStyle,newStyle){var name,value,diff={};for(name in newStyle)value=newStyle[name],oldStyle[name]!==value&&(shorthandStyles[name]||!$.fx.step[name]&&isNaN(parseFloat(value))||(diff[name]=value));return diff}var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){("none"!==fx.end&&!fx.setAttr||1===fx.pos&&!fx.setAttr)&&(jQuery.style(fx.elem,prop,fx.end),fx.setAttr=!0)}}),$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var applyClassChange,animated=$(this),baseClass=animated.attr("class")||"",allAnimations=o.children?animated.find("*").andSelf():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles.call(this)}}),applyClassChange=function(){$.each(classAnimationActions,function(i,action){value[action]&&animated[action+"Class"](value[action])})},applyClassChange(),allAnimations=allAnimations.map(function(){return this.end=getElementStyles.call(this.el[0]),this.diff=styleDifference(this.start,this.end),this}),animated.attr("class",baseClass),allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=jQuery.extend({},o,{queue:!1,complete:function(){dfd.resolve(styleInfo)}});return this.el.animate(this.diff,opts),dfd.promise()}),$.when.apply($,allAnimations.get()).done(function(){applyClassChange(),$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"")})}),o.complete.call(animated[0])})})},$.fn.extend({_addClass:$.fn.addClass,addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):this._addClass(classNames)},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):this._removeClass(classNames)},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){return"boolean"==typeof force||force===undefined?speed?$.effects.animateClass.call(this,force?{add:classNames}:{remove:classNames},speed,easing,callback):this._toggleClass(classNames,force):$.effects.animateClass.call(this,{toggle:classNames},force,speed,easing)},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback)}})}(),function(){function _normalizeArguments(effect,options,speed,callback){return $.isPlainObject(effect)&&(options=effect,effect=effect.effect),effect={effect:effect},null==options&&(options={}),$.isFunction(options)&&(callback=options,speed=null,options={}),("number"==typeof options||$.fx.speeds[options])&&(callback=speed,speed=options,options={}),$.isFunction(speed)&&(callback=speed,speed=null),options&&$.extend(effect,options),speed=speed||options.duration,effect.duration=$.fx.off?0:"number"==typeof speed?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default,effect.complete=callback||options.complete,effect}function standardSpeed(speed){return!speed||"number"==typeof speed||$.fx.speeds[speed]?!0:"string"!=typeof speed||$.effects.effect[speed]?!1:!backCompat||!$.effects[speed]}$.extend($.effects,{version:"1.9.2",save:function(element,set){for(var i=0;i<set.length;i++)null!==set[i]&&element.data(dataSpace+set[i],element[0].style[set[i]])},restore:function(element,set){var val,i;for(i=0;i<set.length;i++)null!==set[i]&&(val=element.data(dataSpace+set[i]),val===undefined&&(val=""),element.css(set[i],val))},setMode:function(el,mode){return"toggle"===mode&&(mode=el.is(":hidden")?"show":"hide"),mode},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height}switch(origin[1]){case"left":x=0;break;case"center":x=.5;break;case"right":x=1;break;default:x=origin[1]/original.width}return{x:x,y:y}},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper"))return element.parent();var props={width:element.outerWidth(!0),height:element.outerHeight(!0),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id}catch(e){active=document.body}return element.wrap(wrapper),(element[0]===active||$.contains(element[0],active))&&$(active).focus(),wrapper=element.parent(),"static"===element.css("position")?(wrapper.css({position:"relative"}),element.css({position:"relative"})):($.extend(props,{position:element.css("position"),zIndex:element.css("z-index")}),$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos),isNaN(parseInt(props[pos],10))&&(props[pos]="auto")}),element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),element.css(size),wrapper.css(props).show()},removeWrapper:function(element){var active=document.activeElement;return element.parent().is(".ui-effects-wrapper")&&(element.parent().replaceWith(element),(element[0]===active||$.contains(element[0],active))&&$(active).focus()),element},setTransition:function(element,list,factor,value){return value=value||{},$.each(list,function(i,x){var unit=element.cssUnit(x);unit[0]>0&&(value[x]=unit[0]*factor+unit[1])}),value}}),$.fn.extend({effect:function(){function run(next){function done(){$.isFunction(complete)&&complete.call(elem[0]),$.isFunction(next)&&next()}var elem=$(this),complete=args.complete,mode=args.mode;(elem.is(":hidden")?"hide"===mode:"show"===mode)?done():effectMethod.call(elem[0],args,done)}var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect],oldEffectMethod=!effectMethod&&backCompat&&$.effects[args.effect];return $.fx.off||!effectMethod&&!oldEffectMethod?mode?this[mode](args.duration,args.complete):this.each(function(){args.complete&&args.complete.call(this)}):effectMethod?queue===!1?this.each(run):this.queue(queue||"fx",run):oldEffectMethod.call(this,{options:args,duration:args.duration,callback:args.complete,mode:args.mode})},_show:$.fn.show,show:function(speed){if(standardSpeed(speed))return this._show.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="show",this.effect.call(this,args)},_hide:$.fn.hide,hide:function(speed){if(standardSpeed(speed))return this._hide.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="hide",this.effect.call(this,args)},__toggle:$.fn.toggle,toggle:function(speed){if(standardSpeed(speed)||"boolean"==typeof speed||$.isFunction(speed))return this.__toggle.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="toggle",this.effect.call(this,args)},cssUnit:function(key){var style=this.css(key),val=[];return $.each(["em","px","%","pt"],function(i,unit){style.indexOf(unit)>0&&(val=[parseFloat(style),unit])}),val}})}(),function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2)}}),$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2)},Circ:function(p){return 1-Math.sqrt(1-p*p)},Elastic:function(p){return 0===p||1===p?p:-Math.pow(2,8*(p-1))*Math.sin((80*(p-1)-7.5)*Math.PI/15)},Back:function(p){return p*p*(3*p-2)},Bounce:function(p){for(var pow2,bounce=4;p<((pow2=Math.pow(2,--bounce))-1)/11;);return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((3*pow2-2)/22-p,2)}}),$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn,$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p)},$.easing["easeInOut"+name]=function(p){return.5>p?easeIn(2*p)/2:1-easeIn(-2*p+2)/2}})}()}(jQuery),function($,undefined){var rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/;$.effects.effect.blind=function(o,done){var wrapper,distance,margin,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show="show"===mode;el.parent().is(".ui-effects-wrapper")?$.effects.save(el.parent(),props):$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=wrapper[ref](),margin=parseFloat(wrapper.css(ref2))||0,animation[ref]=show?distance:0,motion||(el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"}),animation[ref2]=show?margin:distance+margin),show&&(wrapper.css(ref,0),motion||wrapper.css(ref2,margin+distance)),wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:!1,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.bounce=function(o,done){var i,upAnim,downAnim,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide="hide"===mode,show="show"===mode,direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=2*times+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref="up"===direction||"down"===direction?"top":"left",motion="up"===direction||"left"===direction,queue=el.queue(),queuelen=queue.length;for((show||hide)&&props.push("opacity"),$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance||(distance=el["top"===ref?"outerHeight":"outerWidth"]()/3),show&&(downAnim={opacity:1},downAnim[ref]=0,el.css("opacity",0).css(ref,motion?2*-distance:2*distance).animate(downAnim,speed,easing)),hide&&(distance/=Math.pow(2,times-1)),downAnim={},downAnim[ref]=0,i=0;times>i;i++)upAnim={},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing).animate(downAnim,speed,easing),distance=hide?2*distance:distance/2;hide&&(upAnim={opacity:0},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing)),el.queue(function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()}}(jQuery),function($,undefined){$.effects.effect.clip=function(o,done){var wrapper,animate,distance,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,direction=o.direction||"vertical",vert="vertical"===direction,size=vert?"height":"width",position=vert?"top":"left",animation={};$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),animate="IMG"===el[0].tagName?wrapper:el,distance=animate[size](),show&&(animate.css(size,0),animate.css(position,distance/2)),animation[size]=show?distance:0,animation[position]=show?0:distance/2,animate.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){show||el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.drop=function(o,done){var distance,el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,direction=o.direction||"left",ref="up"===direction||"down"===direction?"top":"left",motion="up"===direction||"left"===direction?"pos":"neg",animation={opacity:show?1:0};$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance=o.distance||el["top"===ref?"outerHeight":"outerWidth"](!0)/2,show&&el.css("opacity",0).css(ref,"pos"===motion?-distance:distance),animation[ref]=(show?"pos"===motion?"+=":"-=":"pos"===motion?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.explode=function(o,done){function childComplete(){pieces.push(this),pieces.length===rows*cells&&animComplete()}function animComplete(){el.css({visibility:"visible"}),$(pieces).remove(),show||el.hide(),done()}var i,j,left,top,mx,my,rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[];for(i=0;rows>i;i++)for(top=offset.top+i*height,my=i-(rows-1)/2,j=0;cells>j;j++)left=offset.left+j*width,mx=j-(cells-1)/2,el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete)}}(jQuery),function($,undefined){$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:!1,duration:o.duration,easing:o.easing,complete:done})}}(jQuery),function($,undefined){$.effects.effect.fold=function(o,done){var wrapper,distance,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,hide="hide"===mode,size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,animation1={},animation2={};$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()],percent&&(size=parseInt(percent[1],10)/100*distance[hide?0:1]),show&&wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0}),animation1[ref[0]]=show?distance[0]:size,animation2[ref[1]]=show?distance[1]:0,wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()})}}(jQuery),function($,undefined){$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};"hide"===mode&&(animation.opacity=0),$.effects.save(elem,props),elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&elem.hide(),$.effects.restore(elem,props),done()}})}}(jQuery),function($,undefined){$.effects.effect.pulsate=function(o,done){var i,elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show="show"===mode,hide="hide"===mode,showhide=show||"hide"===mode,anims=2*(o.times||5)+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length;for(!show&&elem.is(":visible")||(elem.css("opacity",0).show(),animateTo=1),i=1;anims>i;i++)elem.animate({opacity:animateTo},duration,o.easing),animateTo=1-animateTo;elem.animate({opacity:animateTo},duration,o.easing),elem.queue(function(){hide&&elem.hide(),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),elem.dequeue()}}(jQuery),function($,undefined){$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide="hide"===mode,percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width(),outerHeight:elem.outerHeight(),outerWidth:elem.outerWidth()};$.extend(o,{effect:"scale",queue:!1,fade:!0,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor,outerHeight:original.outerHeight*factor,outerWidth:original.outerWidth*factor}}),elem.effect(o)},$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(!0,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(0===parseInt(o.percent,10)?0:"hide"===mode?0:100),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:"horizontal"!==direction?percent/100:1,x:"vertical"!==direction?percent/100:1};options.effect="size",options.queue=!1,options.complete=done,"effect"!==mode&&(options.origin=origin||["middle","center"],options.restore=!0),options.from=o.from||("show"===mode?{height:0,width:0,outerHeight:0,outerWidth:0}:original),options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x},options.fade&&("show"===mode&&(options.from.opacity=0,options.to.opacity=1),"hide"===mode&&(options.from.opacity=1,options.to.opacity=0)),el.effect(options)},$.effects.effect.size=function(o,done){var original,baseline,factor,el=$(this),props0=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,o.mode||"effect"),restore=o.restore||"effect"!==mode,scale=o.scale||"both",origin=o.origin||["middle","center"],position=el.css("position"),props=restore?props0:props1,zero={height:0,width:0,outerHeight:0,outerWidth:0};"show"===mode&&el.show(),original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},"toggle"===o.mode&&"show"===mode?(el.from=o.to||zero,el.to=o.from||original):(el.from=o.from||("show"===mode?zero:original),el.to=o.to||("hide"===mode?zero:original)),factor={from:{y:el.from.height/original.height,x:el.from.width/original.width
},to:{y:el.to.height/original.height,x:el.to.width/original.width}},"box"!==scale&&"both"!==scale||(factor.from.y!==factor.to.y&&(props=props.concat(vProps),el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to)),factor.from.x!==factor.to.x&&(props=props.concat(hProps),el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from),el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to))),"content"!==scale&&"both"!==scale||factor.from.y!==factor.to.y&&(props=props.concat(cProps).concat(props2),el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to)),$.effects.save(el,props),el.show(),$.effects.createWrapper(el),el.css("overflow","hidden").css(el.from),origin&&(baseline=$.effects.getBaseline(origin,original),el.from.top=(original.outerHeight-el.outerHeight())*baseline.y,el.from.left=(original.outerWidth-el.outerWidth())*baseline.x,el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y,el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x),el.css(el.from),"content"!==scale&&"both"!==scale||(vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps),hProps=hProps.concat(["marginLeft","marginRight"]),props2=props0.concat(vProps).concat(hProps),el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width(),outerHeight:child.outerHeight(),outerWidth:child.outerWidth()};restore&&$.effects.save(child,props2),child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x,outerHeight:c_original.outerHeight*factor.from.y,outerWidth:c_original.outerWidth*factor.from.x},child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x,outerHeight:c_original.height*factor.to.y,outerWidth:c_original.width*factor.to.x},factor.from.y!==factor.to.y&&(child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from),child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to)),factor.from.x!==factor.to.x&&(child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from),child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to)),child.css(child.from),child.animate(child.to,o.duration,o.easing,function(){restore&&$.effects.restore(child,props2)})})),el.animate(el.to,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){0===el.to.opacity&&el.css("opacity",el.from.opacity),"hide"===mode&&el.hide(),$.effects.restore(el,props),restore||("static"===position?el.css({position:"relative",top:el.to.top,left:el.to.left}):$.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;return"auto"===str?toRef+"px":val+toRef+"px"})})),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.shake=function(o,done){var i,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=2*times+1,speed=Math.round(o.duration/anims),ref="up"===direction||"down"===direction?"top":"left",positiveMotion="up"===direction||"left"===direction,animation={},animation1={},animation2={},queue=el.queue(),queuelen=queue.length;for($.effects.save(el,props),el.show(),$.effects.createWrapper(el),animation[ref]=(positiveMotion?"-=":"+=")+distance,animation1[ref]=(positiveMotion?"+=":"-=")+2*distance,animation2[ref]=(positiveMotion?"-=":"+=")+2*distance,el.animate(animation,speed,o.easing),i=1;times>i;i++)el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()}}(jQuery),function($,undefined){$.effects.effect.slide=function(o,done){var distance,el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show="show"===mode,direction=o.direction||"left",ref="up"===direction||"down"===direction?"top":"left",positiveMotion="up"===direction||"left"===direction,animation={};$.effects.save(el,props),el.show(),distance=o.distance||el["top"===ref?"outerHeight":"outerWidth"](!0),$.effects.createWrapper(el).css({overflow:"hidden"}),show&&el.css(ref,positiveMotion?isNaN(distance)?"-"+distance:-distance:distance),animation[ref]=(show?positiveMotion?"+=":"-=":positiveMotion?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed="fixed"===target.css("position"),body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(o.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove(),done()})}}(jQuery),function($){function doAjaxSubmit(e){var options=e.data;e.isDefaultPrevented()||(e.preventDefault(),$(this).ajaxSubmit(options))}function captureSubmittingElement(e){var target=e.target,$el=$(target);if(!$el.is(":submit,input:image")){var t=$el.closest(":submit");if(0==t.length)return;target=t[0]}var form=this;if(form.clk=target,"image"==target.type)if(void 0!=e.offsetX)form.clk_x=e.offsetX,form.clk_y=e.offsetY;else if("function"==typeof $.fn.offset){var offset=$el.offset();form.clk_x=e.pageX-offset.left,form.clk_y=e.pageY-offset.top}else form.clk_x=e.pageX-target.offsetLeft,form.clk_y=e.pageY-target.offsetTop;setTimeout(function(){form.clk=form.clk_x=form.clk_y=null},100)}function log(){if($.fn.ajaxSubmit.debug){var msg="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(msg):window.opera&&window.opera.postError&&window.opera.postError(msg)}}$.fn.ajaxSubmit=function(options){function fileUploadXhr(a){for(var formdata=new FormData,i=0;i<a.length;i++)"file"!=a[i].type&&formdata.append(a[i].name,a[i].value);if($form.find("input:file:enabled").each(function(){var name=$(this).attr("name"),files=this.files;if(name)for(var i=0;i<files.length;i++)formdata.append(name,files[i])}),options.extraData)for(var k in options.extraData)formdata.append(k,options.extraData[k]);options.data=null;var s=$.extend(!0,{},$.ajaxSettings,options,{contentType:!1,processData:!1,cache:!1,type:"POST"});s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){o.data=formdata,xhr.upload&&(xhr.upload.onprogress=function(event){o.progress(event.position,event.total)}),beforeSend&&beforeSend.call(o,xhr,options)},$.ajax(s)}function fileUploadIframe(a){function getDoc(frame){var doc=frame.contentWindow?frame.contentWindow.document:frame.contentDocument?frame.contentDocument:frame.document;return doc}function doSubmit(){function checkState(){try{var state=getDoc(io).readyState;log("state = "+state),"uninitialized"==state.toLowerCase()&&setTimeout(checkState,50)}catch(e){log("Server abort: ",e," (",e.name,")"),cb(SERVER_ABORT),timeoutHandle&&clearTimeout(timeoutHandle),timeoutHandle=void 0}}var t=$form.attr("target"),a=$form.attr("action");form.setAttribute("target",id),method||form.setAttribute("method","POST"),a!=s.url&&form.setAttribute("action",s.url),s.skipEncodingOverride||method&&!/post/i.test(method)||$form.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&(timeoutHandle=setTimeout(function(){timedOut=!0,cb(CLIENT_TIMEOUT_ABORT)},s.timeout));var extraInputs=[];try{if(s.extraData)for(var n in s.extraData)extraInputs.push($('<input type="hidden" name="'+n+'">').attr("value",s.extraData[n]).appendTo(form)[0]);s.iframeTarget||($io.appendTo("body"),io.attachEvent?io.attachEvent("onload",cb):io.addEventListener("load",cb,!1)),setTimeout(checkState,15),form.submit()}finally{form.setAttribute("action",a),t?form.setAttribute("target",t):$form.removeAttr("target"),$(extraInputs).remove()}}function cb(e){if(!xhr.aborted&&!callbackProcessed){try{doc=getDoc(io)}catch(ex){log("cannot access response document: ",ex),e=SERVER_ABORT}if(e===CLIENT_TIMEOUT_ABORT&&xhr)return void xhr.abort("timeout");if(e==SERVER_ABORT&&xhr)return void xhr.abort("server abort");if(doc&&doc.location.href!=s.iframeSrc||timedOut){io.detachEvent?io.detachEvent("onload",cb):io.removeEventListener("load",cb,!1);var errMsg,status="success";try{if(timedOut)throw"timeout";var isXml="xml"==s.dataType||doc.XMLDocument||$.isXMLDoc(doc);if(log("isXml="+isXml),!isXml&&window.opera&&(null==doc.body||""==doc.body.innerHTML)&&--domCheckCount)return log("requeing onLoad callback, DOM not available"),void setTimeout(cb,250);var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null,xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc,isXml&&(s.dataType="xml"),xhr.getResponseHeader=function(header){var headers={"content-type":s.dataType};return headers[header]},docRoot&&(xhr.status=Number(docRoot.getAttribute("status"))||xhr.status,xhr.statusText=docRoot.getAttribute("statusText")||xhr.statusText);var dt=(s.dataType||"").toLowerCase(),scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName("textarea")[0];if(ta)xhr.responseText=ta.value,xhr.status=Number(ta.getAttribute("status"))||xhr.status,xhr.statusText=ta.getAttribute("statusText")||xhr.statusText;else if(scr){var pre=doc.getElementsByTagName("pre")[0],b=doc.getElementsByTagName("body")[0];pre?xhr.responseText=pre.textContent?pre.textContent:pre.innerText:b&&(xhr.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"!=dt||xhr.responseXML||null==xhr.responseText||(xhr.responseXML=toXml(xhr.responseText));try{data=httpData(xhr,dt,s)}catch(e){status="parsererror",xhr.error=errMsg=e||status}}catch(e){log("error caught: ",e),status="error",xhr.error=errMsg=e||status}xhr.aborted&&(log("upload aborted"),status=null),xhr.status&&(status=xhr.status>=200&&xhr.status<300||304===xhr.status?"success":"error"),"success"===status?(s.success&&s.success.call(s.context,data,"success",xhr),g&&$.event.trigger("ajaxSuccess",[xhr,s])):status&&(void 0==errMsg&&(errMsg=xhr.statusText),s.error&&s.error.call(s.context,xhr,status,errMsg),g&&$.event.trigger("ajaxError",[xhr,s,errMsg])),g&&$.event.trigger("ajaxComplete",[xhr,s]),g&&!--$.active&&$.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,xhr,status),callbackProcessed=!0,s.timeout&&clearTimeout(timeoutHandle),setTimeout(function(){s.iframeTarget||$io.remove(),xhr.responseXML=null},100)}}}var el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle,form=$form[0],useProp=!!$.fn.prop;if(a)if(useProp)for(i=0;i<a.length;i++)el=$(form[a[i].name]),el.prop("disabled",!1);else for(i=0;i<a.length;i++)el=$(form[a[i].name]),el.removeAttr("disabled");if($(":input[name=submit],:input[id=submit]",form).length)return void alert('Error: Form elements must not have name or id of "submit".');if(s=$.extend(!0,{},$.ajaxSettings,options),s.context=s.context||s,id="jqFormIO"+(new Date).getTime(),s.iframeTarget?($io=$(s.iframeTarget),n=$io.attr("name"),null==n?$io.attr("name",id):id=n):($io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />'),$io.css({position:"absolute",top:"-1000px",left:"-1000px"})),io=$io[0],xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e="timeout"===status?"timeout":"aborted";log("aborting upload... "+e),this.aborted=1,$io.attr("src",s.iframeSrc),xhr.error=e,s.error&&s.error.call(s.context,xhr,e,status),g&&$.event.trigger("ajaxError",[xhr,s,e]),s.complete&&s.complete.call(s.context,xhr,e)}},g=s.global,g&&!$.active++&&$.event.trigger("ajaxStart"),g&&$.event.trigger("ajaxSend",[xhr,s]),s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===!1)return void(s.global&&$.active--);if(!xhr.aborted){sub=form.clk,sub&&(n=sub.name,n&&!sub.disabled&&(s.extraData=s.extraData||{},s.extraData[n]=sub.value,"image"==sub.type&&(s.extraData[n+".x"]=form.clk_x,s.extraData[n+".y"]=form.clk_y)));var CLIENT_TIMEOUT_ABORT=1,SERVER_ABORT=2,csrf_token=$("meta[name=csrf-token]").attr("content"),csrf_param=$("meta[name=csrf-param]").attr("content");csrf_param&&csrf_token&&(s.extraData=s.extraData||{},s.extraData[csrf_param]=csrf_token),s.forceSync?doSubmit():setTimeout(doSubmit,10);var data,doc,callbackProcessed,domCheckCount=50,toXml=$.parseXML||function(s,doc){return window.ActiveXObject?(doc=new ActiveXObject("Microsoft.XMLDOM"),doc.async="false",doc.loadXML(s)):doc=(new DOMParser).parseFromString(s,"text/xml"),doc&&doc.documentElement&&"parsererror"!=doc.documentElement.nodeName?doc:null},parseJSON=$.parseJSON||function(s){return window.eval("("+s+")")},httpData=function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml="xml"===type||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;return xml&&"parsererror"===data.documentElement.nodeName&&$.error&&$.error("parsererror"),s&&s.dataFilter&&(data=s.dataFilter(data,type)),"string"==typeof data&&("json"===type||!type&&ct.indexOf("json")>=0?data=parseJSON(data):("script"===type||!type&&ct.indexOf("javascript")>=0)&&$.globalEval(data)),data}}}if(!this.length)return log("ajaxSubmit: skipping submit process - no element selected"),this;var method,action,url,$form=this;"function"==typeof options&&(options={success:options}),method=this.attr("method"),action=this.attr("action"),url="string"==typeof action?$.trim(action):"",url=url||window.location.href||"",url&&(url=(url.match(/^([^#]+)/)||[])[1]),options=$.extend(!0,{url:url,success:$.ajaxSettings.success,type:method||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},options);var veto={};if(this.trigger("form-pre-serialize",[this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(options.beforeSerialize&&options.beforeSerialize(this,options)===!1)return log("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var traditional=options.traditional;void 0===traditional&&(traditional=$.ajaxSettings.traditional);var qx,a=this.formToArray(options.semantic);if(options.data&&(options.extraData=options.data,qx=$.param(options.data,traditional)),options.beforeSubmit&&options.beforeSubmit(a,this,options)===!1)return log("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[a,this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=$.param(a,traditional);qx&&(q=q?q+"&"+qx:qx),"GET"==options.type.toUpperCase()?(options.url+=(options.url.indexOf("?")>=0?"&":"?")+q,options.data=null):options.data=q;var callbacks=[];if(options.resetForm&&callbacks.push(function(){$form.resetForm()}),options.clearForm&&callbacks.push(function(){$form.clearForm(options.includeHidden)}),!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?"replaceWith":"html";$(options.target)[fn](data).each(oldSuccess,arguments)})}else options.success&&callbacks.push(options.success);options.success=function(data,status,xhr){for(var context=options.context||options,i=0,max=callbacks.length;max>i;i++)callbacks[i].apply(context,[data,status,xhr||$form,$form])};var fileInputs=$("input:file:enabled[value]",this),hasFileInputs=fileInputs.length>0,mp="multipart/form-data",multipart=$form.attr("enctype")==mp||$form.attr("encoding")==mp,fileAPI=!!(hasFileInputs&&fileInputs.get(0).files&&window.FormData);log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;return options.iframe!==!1&&(options.iframe||shouldUseFrame)?options.closeKeepAlive?$.get(options.closeKeepAlive,function(){fileUploadIframe(a)}):fileUploadIframe(a):(hasFileInputs||multipart)&&fileAPI?(options.progress=options.progress||$.noop,fileUploadXhr(a)):$.ajax(options),this.trigger("form-submit-notify",[this,options]),this},$.fn.ajaxForm=function(options){if(options=options||{},options.delegation=options.delegation&&$.isFunction($.fn.on),!options.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!$.isReady&&o.s?(log("DOM not ready, queuing ajaxForm"),$(function(){$(o.s,o.c).ajaxForm(options)}),this):(log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)")),this)}return options.delegation?($(document).off("submit.form-plugin",this.selector,doAjaxSubmit).off("click.form-plugin",this.selector,captureSubmittingElement).on("submit.form-plugin",this.selector,options,doAjaxSubmit).on("click.form-plugin",this.selector,options,captureSubmittingElement),this):this.ajaxFormUnbind().bind("submit.form-plugin",options,doAjaxSubmit).bind("click.form-plugin",options,captureSubmittingElement)},$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},$.fn.formToArray=function(semantic){var a=[];if(0===this.length)return a;var form=this[0],els=semantic?form.getElementsByTagName("*"):form.elements;if(!els)return a;var i,j,n,v,el,max,jmax;for(i=0,max=els.length;max>i;i++)if(el=els[i],n=el.name)if(semantic&&form.clk&&"image"==el.type)el.disabled||form.clk!=el||(a.push({name:n,value:$(el).val(),type:el.type}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}));else if(v=$.fieldValue(el,!0),v&&v.constructor==Array)for(j=0,jmax=v.length;jmax>j;j++)a.push({name:n,value:v[j]});else null!==v&&"undefined"!=typeof v&&a.push({name:n,value:v,type:el.type});if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name,n&&!input.disabled&&"image"==input.type&&(a.push({name:n,value:$input.val()}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}))}return a},$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))},$.fn.fieldSerialize=function(successful){var a=[];return this.each(function(){var n=this.name;if(n){var v=$.fieldValue(this,successful);if(v&&v.constructor==Array)for(var i=0,max=v.length;max>i;i++)a.push({name:n,value:v[i]});else null!==v&&"undefined"!=typeof v&&a.push({name:this.name,value:v})}}),$.param(a)},$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;max>i;i++){var el=this[i],v=$.fieldValue(el,successful);null===v||"undefined"==typeof v||v.constructor==Array&&!v.length||(v.constructor==Array?$.merge(val,v):val.push(v))}return val},$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(void 0===successful&&(successful=!0),successful&&(!n||el.disabled||"reset"==t||"button"==t||("checkbox"==t||"radio"==t)&&!el.checked||("submit"==t||"image"==t)&&el.form&&el.form.clk!=el||"select"==tag&&-1==el.selectedIndex))return null;if("select"==tag){var index=el.selectedIndex;if(0>index)return null;for(var a=[],ops=el.options,one="select-one"==t,max=one?index+1:ops.length,i=one?index:0;max>i;i++){var op=ops[i];if(op.selected){var v=op.value;if(v||(v=op.attributes&&op.attributes.value&&!op.attributes.value.specified?op.text:op.value),one)return v;a.push(v)}}return a}return $(el).val()},$.fn.clearForm=function(includeHidden){return this.each(function(){$("input,select,textarea",this).clearFields(includeHidden)})},$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();re.test(t)||"textarea"==tag||includeHidden&&/hidden/.test(t)?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==tag&&(this.selectedIndex=-1)})},$.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},$.fn.enable=function(b){return void 0===b&&(b=!0),this.each(function(){this.disabled=!b})},$.fn.selected=function(select){return void 0===select&&(select=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=select;else if("option"==this.tagName.toLowerCase()){var $sel=$(this).parent("select");select&&$sel[0]&&"select-one"==$sel[0].type&&$sel.find("option").selected(!1),this.selected=select}})},$.fn.ajaxSubmit.debug=!1}(jQuery),jQuery.cookie=function(name,value,options){if("undefined"==typeof value){var cookieValue=null;if(document.cookie&&""!=document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue}options=options||{},null===value&&(value="",options=jQuery.extend({},options),options.expires=-1);var expires="";if(options.expires&&("number"==typeof options.expires||options.expires.toUTCString)){var date;"number"==typeof options.expires?(date=new Date,date.setTime(date.getTime()+24*options.expires*60*60*1e3)):date=options.expires,expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"",domain=options.domain?"; domain="+options.domain:"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")},function($,window){"$:nomunge";function is_string(arg){return"string"==typeof arg}function curry(func){var args=aps.call(arguments,1);return function(){return func.apply(this,args.concat(aps.call(arguments)))}}function get_fragment(url){return url.replace(/^[^#]*#?(.*)$/,"$1")}function get_querystring(url){return url.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function jq_param_sub(is_fragment,get_func,url,params,merge_mode){var result,qs,matches,url_params,hash;return params!==undefined?(matches=url.match(is_fragment?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),hash=matches[3]||"",2===merge_mode&&is_string(params)?qs=params.replace(is_fragment?re_trim_fragment:re_trim_querystring,""):(url_params=jq_deparam(matches[2]),params=is_string(params)?jq_deparam[is_fragment?str_fragment:str_querystring](params):params,qs=2===merge_mode?params:1===merge_mode?$.extend({},params,url_params):$.extend({},url_params,params),qs=jq_param(qs),is_fragment&&(qs=qs.replace(re_no_escape,decode))),result=matches[1]+(is_fragment?"#":qs||!matches[1]?"?":"")+qs+hash):result=get_func(url!==undefined?url:window[str_location][str_href]),result}function jq_deparam_sub(is_fragment,url_or_params,coerce){return url_or_params===undefined||"boolean"==typeof url_or_params?(coerce=url_or_params,url_or_params=jq_param[is_fragment?str_fragment:str_querystring]()):url_or_params=is_string(url_or_params)?url_or_params.replace(is_fragment?re_trim_fragment:re_trim_querystring,""):url_or_params,jq_deparam(url_or_params,coerce)}function jq_fn_sub(mode,force_attr,params,merge_mode){return is_string(params)||"object"==typeof params||(merge_mode=params,params=force_attr,force_attr=undefined),this.each(function(){var that=$(this),attr=force_attr||jq_elemUrlAttr()[(this.nodeName||"").toLowerCase()]||"",url=attr&&that.attr(attr)||"";that.attr(attr,jq_param[mode](url,params,merge_mode))})}var undefined,jq_param_fragment,jq_deparam,jq_deparam_fragment,jq_bbq_pushState,jq_bbq_getState,jq_elemUrlAttr,re_no_escape,aps=Array.prototype.slice,decode=decodeURIComponent,jq_param=$.param,jq_bbq=$.bbq=$.bbq||{},jq_event_special=$.event.special,str_hashchange="hashchange",str_querystring="querystring",str_fragment="fragment",str_elemUrlAttr="elemUrlAttr",str_location="location",str_href="href",str_src="src",re_trim_querystring=/^.*\?|#.*$/g,re_trim_fragment=/^.*\#/,elemUrlAttr_cache={};jq_param[str_querystring]=curry(jq_param_sub,0,get_querystring),jq_param[str_fragment]=jq_param_fragment=curry(jq_param_sub,1,get_fragment),jq_param_fragment.noEscape=function(chars){chars=chars||"";var arr=$.map(chars.split(""),encodeURIComponent);re_no_escape=new RegExp(arr.join("|"),"g")},jq_param_fragment.noEscape(",/"),$.deparam=jq_deparam=function(params,coerce){var obj={},coerce_types={"true":!0,"false":!1,"null":null};return $.each(params.replace(/\+/g," ").split("&"),function(j,v){var val,param=v.split("="),key=decode(param[0]),cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])?(keys[keys_last]=keys[keys_last].replace(/\]$/,""),keys=keys.shift().split("[").concat(keys),keys_last=keys.length-1):keys_last=0,2===param.length)if(val=decode(param[1]),coerce&&(val=val&&!isNaN(val)?+val:"undefined"===val?undefined:coerce_types[val]!==undefined?coerce_types[val]:val),keys_last)for(;keys_last>=i;i++)key=""===keys[i]?cur.length:keys[i],cur=cur[key]=keys_last>i?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;else $.isArray(obj[key])?obj[key].push(val):obj[key]!==undefined?obj[key]=[obj[key],val]:obj[key]=val;else key&&(obj[key]=coerce?undefined:"")}),obj},jq_deparam[str_querystring]=curry(jq_deparam_sub,0),jq_deparam[str_fragment]=jq_deparam_fragment=curry(jq_deparam_sub,1),$[str_elemUrlAttr]||($[str_elemUrlAttr]=function(obj){return $.extend(elemUrlAttr_cache,obj)})({a:str_href,base:str_href,iframe:str_src,img:str_src,input:str_src,form:"action",link:str_href,script:str_src}),jq_elemUrlAttr=$[str_elemUrlAttr],$.fn[str_querystring]=curry(jq_fn_sub,str_querystring),$.fn[str_fragment]=curry(jq_fn_sub,str_fragment),jq_bbq.pushState=jq_bbq_pushState=function(params,merge_mode){is_string(params)&&/^#/.test(params)&&merge_mode===undefined&&(merge_mode=2);var has_args=params!==undefined,url=jq_param_fragment(window[str_location][str_href],has_args?params:{},has_args?merge_mode:2);window[str_location][str_href]=url+(/#/.test(url)?"":"#")},jq_bbq.getState=jq_bbq_getState=function(key,coerce){return key===undefined||"boolean"==typeof key?jq_deparam_fragment(key):jq_deparam_fragment(coerce)[key]},jq_bbq.removeState=function(arr){var state={};arr!==undefined&&(state=jq_bbq_getState(),$.each($.isArray(arr)?arr:arguments,function(i,v){delete state[v]})),jq_bbq_pushState(state,2)},jq_event_special[str_hashchange]=$.extend(jq_event_special[str_hashchange],{add:function(handleObj){function new_handler(e){var hash=e[str_fragment]=jq_param_fragment();e.getState=function(key,coerce){return key===undefined||"boolean"==typeof key?jq_deparam(hash,key):jq_deparam(hash,coerce)[key]},old_handler.apply(this,arguments)}var old_handler;return $.isFunction(handleObj)?(old_handler=handleObj,new_handler):(old_handler=handleObj.handler,void(handleObj.handler=new_handler))}})}(jQuery,this),function($,window,undefined){"$:nomunge";function get_fragment(url){return url=url||window[str_location][str_href],url.replace(/^[^#]*#?(.*)$/,"$1")}var fake_onhashchange,jq_event_special=$.event.special,str_location="location",str_hashchange="hashchange",str_href="href",browser=$.browser,mode=document.documentMode,is_old_ie=browser.msie&&(mode===undefined||8>mode),supports_onhashchange="on"+str_hashchange in window&&!is_old_ie;$[str_hashchange+"Delay"]=100,jq_event_special[str_hashchange]=$.extend(jq_event_special[str_hashchange],{setup:function(){return supports_onhashchange?!1:void $(fake_onhashchange.start)},teardown:function(){return supports_onhashchange?!1:void $(fake_onhashchange.stop)}}),fake_onhashchange=function(){function init(){set_history=get_history=function(val){return val},is_old_ie&&(iframe=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,get_history=function(){return get_fragment(iframe.document[str_location][str_href])},(set_history=function(hash,history_hash){if(hash!==history_hash){var doc=iframe.document;doc.open().close(),doc[str_location].hash="#"+hash}})(get_fragment()))}var timeout_id,iframe,set_history,get_history,self={};return self.start=function(){if(!timeout_id){var last_hash=get_fragment();set_history||init(),function loopy(){var hash=get_fragment(),history_hash=get_history(last_hash);hash!==last_hash?(set_history(last_hash=hash,history_hash),$(window).trigger(str_hashchange)):history_hash!==last_hash&&(window[str_location][str_href]=window[str_location][str_href].replace(/#.*/,"")+"#"+history_hash),timeout_id=setTimeout(loopy,$[str_hashchange+"Delay"])}()}},self.stop=function(){iframe||(timeout_id&&clearTimeout(timeout_id),timeout_id=0)},self}()}(jQuery,this),function($,window,undefined){"$:nomunge";function get_fragment(url){return url=url||location.href,"#"+url.replace(/^[^#]*#?(.*)$/,"$1")}var fake_onhashchange,str_hashchange="hashchange",doc=document,special=$.event.special,doc_mode=doc.documentMode,supports_onhashchange="on"+str_hashchange in window&&(doc_mode===undefined||doc_mode>7);$.fn[str_hashchange]=function(fn){return fn?this.bind(str_hashchange,fn):this.trigger(str_hashchange)},$.fn[str_hashchange].delay=50,special[str_hashchange]=$.extend(special[str_hashchange],{setup:function(){return supports_onhashchange?!1:void $(fake_onhashchange.start)},teardown:function(){return supports_onhashchange?!1:void $(fake_onhashchange.stop)}}),fake_onhashchange=function(){function poll(){var hash=get_fragment(),history_hash=history_get(last_hash);hash!==last_hash?(history_set(last_hash=hash,history_hash),$(window).trigger(str_hashchange)):history_hash!==last_hash&&(location.href=location.href.replace(/#.*/,"")+history_hash),timeout_id=setTimeout(poll,$.fn[str_hashchange].delay)}var timeout_id,self={},last_hash=get_fragment(),fn_retval=function(val){return val},history_set=fn_retval,history_get=fn_retval;return self.start=function(){timeout_id||poll()},self.stop=function(){timeout_id&&clearTimeout(timeout_id),timeout_id=undefined},$.browser.msie&&!supports_onhashchange&&function(){var iframe,iframe_src;self.start=function(){iframe||(iframe_src=$.fn[str_hashchange].src,iframe_src=iframe_src&&iframe_src+get_fragment(),iframe=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){iframe_src||history_set(get_fragment()),poll()}).attr("src",iframe_src||"javascript:0").insertAfter("body")[0].contentWindow,doc.onpropertychange=function(){try{"title"===event.propertyName&&(iframe.document.title=doc.title)}catch(e){}})},self.stop=fn_retval,history_get=function(){return get_fragment(iframe.location.href)},history_set=function(hash,history_hash){var iframe_doc=iframe.document,domain=$.fn[str_hashchange].domain;hash!==history_hash&&(iframe_doc.title=doc.title,iframe_doc.open(),domain&&iframe_doc.write('<script>document.domain="'+domain+'"</script>'),iframe_doc.close(),iframe.location.hash=hash)}}(),self}()}(jQuery,this),eval(function(p,a,c,k,e,r){if(e=function(c){return(a>c?"":e(parseInt(c/a)))+((c%=a)>35?String.fromCharCode(c+29):c.toString(36))},!"".replace(/^/,String)){for(;c--;)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}],e=function(){return"\\w+"},c=1}for(;c--;)k[c]&&(p=p.replace(new RegExp("\\b"+e(c)+"\\b","g"),k[c]));return p}("(4($){$.R($.7,{3:4(c,b,d){9 e=2,q;5($.O(c))d=b,b=c,c=z;$.h($.3.j,4(i,a){5(e.8==a.8&&e.g==a.g&&c==a.m&&(!b||b.$6==a.7.$6)&&(!d||d.$6==a.o.$6))l(q=a)&&v});q=q||Y $.3(2.8,2.g,c,b,d);q.u=v;$.3.s(q.F);l 2},T:4(c,b,d){9 e=2;5($.O(c))d=b,b=c,c=z;$.h($.3.j,4(i,a){5(e.8==a.8&&e.g==a.g&&(!c||c==a.m)&&(!b||b.$6==a.7.$6)&&(!d||d.$6==a.o.$6)&&!2.u)$.3.y(a.F)});l 2}});$.3=4(e,c,a,b,d){2.8=e;2.g=c||S;2.m=a;2.7=b;2.o=d;2.t=[];2.u=v;2.F=$.3.j.K(2)-1;b.$6=b.$6||$.3.I++;5(d)d.$6=d.$6||$.3.I++;l 2};$.3.p={y:4(){9 b=2;5(2.m)2.t.16(2.m,2.7);E 5(2.o)2.t.h(4(i,a){b.o.x(a)});2.t=[];2.u=Q},s:4(){5(2.u)l;9 b=2;9 c=2.t,w=$(2.8,2.g),H=w.11(c);2.t=w;5(2.m){H.10(2.m,2.7);5(c.C>0)$.h(c,4(i,a){5($.B(a,w)<0)$.Z.P(a,b.m,b.7)})}E{H.h(4(){b.7.x(2)});5(2.o&&c.C>0)$.h(c,4(i,a){5($.B(a,w)<0)b.o.x(a)})}}};$.R($.3,{I:0,j:[],k:[],A:v,D:X,N:4(){5($.3.A&&$.3.k.C){9 a=$.3.k.C;W(a--)$.3.j[$.3.k.V()].s()}},U:4(){$.3.A=v},M:4(){$.3.A=Q;$.3.s()},L:4(){$.h(G,4(i,n){5(!$.7[n])l;9 a=$.7[n];$.7[n]=4(){9 r=a.x(2,G);$.3.s();l r}})},s:4(b){5(b!=z){5($.B(b,$.3.k)<0)$.3.k.K(b)}E $.h($.3.j,4(a){5($.B(a,$.3.k)<0)$.3.k.K(a)});5($.3.D)1j($.3.D);$.3.D=1i($.3.N,1h)},y:4(b){5(b!=z)$.3.j[b].y();E $.h($.3.j,4(a){$.3.j[a].y()})}});$.3.L('1g','1f','1e','1b','1a','19','18','17','1c','15','1d','P');$(4(){$.3.M()});9 f=$.p.J;$.p.J=4(a,c){9 r=f.x(2,G);5(a&&a.8)r.g=a.g,r.8=a.8;5(14 a=='13')r.g=c||S,r.8=a;l r};$.p.J.p=$.p})(12);",62,82,"||this|livequery|function|if|lqguid|fn|selector|var|||||||context|each||queries|queue|return|type||fn2|prototype|||run|elements|stopped|false|els|apply|stop|undefined|running|inArray|length|timeout|else|id|arguments|nEls|guid|init|push|registerPlugin|play|checkQueue|isFunction|remove|true|extend|document|expire|pause|shift|while|null|new|event|bind|not|jQuery|string|typeof|toggleClass|unbind|addClass|removeAttr|attr|wrap|before|removeClass|empty|after|prepend|append|20|setTimeout|clearTimeout".split("|"),0,{})),
function($){$.widget("ss.inlineHelp",{options:{type:"tooltip",title:"Help",icon:'<span class="ui-icon ui-icon-help"></span>',iconPosition:{my:"left top",at:"right top"},showOn:"hover",text:"",link:!1,linkFormat:'<a href="$Link">More information</a>',tooltipClass:"",tooltipPosition:{my:"left top",at:"right top"},tooltipSize:{width:300,height:"auto"},showOn:"hover",tooltipDelay:200,attachWith:"appendTo"},_init:function(){function attachToDom(){var method=widget.options.attachWith;"function"==typeof widget.icon[method]&&widget.icon[method].call(widget.icon,widget.element)}var widget=this,currentDim={position:null,width:null},updateInterval=null,updatePosition=function(){if(!widget.element)return void clearInterval(updateInterval);if(!widget.element[0].parentElement)return clearInterval(updateInterval),void delete widget;try{var newPos=widget.element.position(),newWidth=widget.element.width();if("undefined"==typeof newPos||"undefined"==typeof newWidth)return;if("undefined"==typeof currentDim)return void(currentDim={position:newPos,width:newWidth});if(currentDim&&currentDim.position&&currentDim.position.top==newPos.top&&currentDim.position.left==newPos.left&&currentDim.width==newWidth)return;currentDim.position=newPos,currentDim.width=newWidth,widget&&widget.icon&&widget.icon.position($.extend(widget.options.iconPosition,{of:widget.element}))}catch(e){}};if($(window).scroll(updatePosition),updateInterval=setInterval(updatePosition,1e3),"link"==this.options.type)return this.link=$("<a></a>").addClass("ss-inlinehelp-link").attr("href",this.options.link).attr("title",this.options.title).html(this.options.icon),this.icon=$("<div></div>").addClass("ss-inlinehelp-icon ui-state-default ui-corner-all").addClass("ss-inlinehelp-click").html(this.link).appendTo(this.element.parent()).position($.extend(this.options.iconPosition,{of:this.element})),void attachToDom();if(this.icon=$("<div></div>").addClass("ss-inlinehelp-icon ui-state-default ui-corner-all").html(this.options.icon).position($.extend(this.options.iconPosition,{of:this.element})),attachToDom(),this.tooltip=$("<div></div>").addClass("ss-inlinehelp-tooltip ui-widget ui-widget-content ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide(),this.tooltipHeader=$("<div></div>").addClass("ss-inlinehelp-tooltip-title ui-widget-header ui-corner-top").html(this.options.title).appendTo(this.tooltip),this.tooltipContent=$("<div></div>").addClass("ss-inlinehelp-tooltip-content").html(this.options.text).appendTo(this.tooltip),this.options.link){var linkHTML=this.options.linkFormat.replace("$Link",this.options.link);this.tooltipLink=$("<div></div>").addClass("ss-inlinehelp-tooltip-link ui-widget-header ui-corner-bottom").html(linkHTML).appendTo(this.tooltip)}else this.tooltipContent.addClass("ui-corner-bottom");"click"==this.options.showOn?(this.icon.addClass("ss-inlinehelp-click").click(function(){return widget.openTooltip(),widget.tooltip.addClass("ss-inlinehelp-hideonclick"),!1}),$(document).click(function(){$(".ss-inlinehelp-hideonclick").hide()})):$([this.icon,this.tooltip]).each(function(i,el){el.hover(function(){widget.clearTimeout(),widget.openTooltip()},function(){widget.startTimeout()}).click(function(){return widget.openTooltip(),widget.tooltip.addClass("ss-inlinehelp-hideonclick"),!1})})},openTooltip:function(){if(this.tooltip.is(":hidden")){if(this.tooltip.show().width(this.options.tooltipSize.width).height(this.options.tooltipSize.height).position($.extend(this.options.tooltipPosition,{of:this.icon})),this.tooltipContent.css("top",this.tooltipHeader.outerHeight()),"auto"!=this.options.tooltipSize.height)this.tooltipContent.css({bottom:0,overflow:"auto"});else{var height=this.tooltipHeader.height()+this.tooltipContent.outerHeight();this.tooltipLink&&(height+=this.tooltipLink.height()),this.tooltip.height(height+5)}this.tooltipLink&&this.tooltipContent.css("bottom",this.tooltipLink.outerHeight())}},closeTooltip:function(){this.tooltip.hide()},startTimeout:function(){var self=this;this.timeout=setTimeout(function(){self.closeTooltip()},this.options.tooltipDelay)},clearTimeout:function(){this.timeout&&clearTimeout(this.timeout)}})}(jQuery),function($){$.jGrowl=function(m,o){0==$("#jGrowl").size()&&$('<div id="jGrowl"></div>').addClass(o&&o.position?o.position:$.jGrowl.defaults.position).appendTo("body"),$("#jGrowl").jGrowl(m,o)},$.fn.jGrowl=function(m,o){if($.isFunction(this.each)){var args=arguments;return this.each(function(){void 0==$(this).data("jGrowl.instance")&&($(this).data("jGrowl.instance",$.extend(new $.fn.jGrowl,{notifications:[],element:null,interval:null})),$(this).data("jGrowl.instance").startup(this)),$.isFunction($(this).data("jGrowl.instance")[m])?$(this).data("jGrowl.instance")[m].apply($(this).data("jGrowl.instance"),$.makeArray(args).slice(1)):$(this).data("jGrowl.instance").create(m,o)})}},$.extend($.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(e,m,o){},beforeOpen:function(e,m,o){},afterOpen:function(e,m,o){},open:function(e,m,o){},beforeClose:function(e,m,o){},close:function(e,m,o){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(message,o){var o=$.extend({},this.defaults,o);"undefined"!=typeof o.speed&&(o.openDuration=o.speed,o.closeDuration=o.speed),this.notifications.push({message:message,options:o}),o.log.apply(this.element,[this.element,message,o])},render:function(notification){var self=this,message=notification.message,o=notification.options,notification=$('<div class="jGrowl-notification '+o.themeState+" ui-corner-all"+(void 0!=o.group&&""!=o.group?" "+o.group:"")+'"><div class="jGrowl-close">'+o.closeTemplate+'</div><div class="jGrowl-header">'+o.header+'</div><div class="jGrowl-message">'+message+"</div></div>").data("jGrowl",o).addClass(o.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){$(this).parent().trigger("jGrowl.close")}).parent();$(notification).bind("mouseover.jGrowl",function(){$("div.jGrowl-notification",self.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){$("div.jGrowl-notification",self.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){0!=o.beforeOpen.apply(notification,[notification,message,o,self.element])&&$(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){0!=o.open.apply(notification,[notification,message,o,self.element])&&("after"==o.glue?$("div.jGrowl-notification:last",self.element).after(notification):$("div.jGrowl-notification:first",self.element).before(notification),$(this).animate(o.animateOpen,o.openDuration,o.easing,function(){!$.browser.msie||1!==parseInt($(this).css("opacity"),10)&&0!==parseInt($(this).css("opacity"),10)||this.style.removeAttribute("filter"),null!=$(this).data("jGrowl")&&($(this).data("jGrowl").created=new Date),$(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){o.afterOpen.apply(notification,[notification,message,o,self.element])}).bind("jGrowl.beforeClose",function(){0!=o.beforeClose.apply(notification,[notification,message,o,self.element])&&$(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){$(this).data("jGrowl.pause",!0),$(this).animate(o.animateClose,o.closeDuration,o.easing,function(){$.isFunction(o.close)?o.close.apply(notification,[notification,message,o,self.element])!==!1&&$(this).remove():$(this).remove()})}).trigger("jGrowl.beforeOpen"),""!=o.corners&&void 0!=$.fn.corner&&$(notification).corner(o.corners),$("div.jGrowl-notification:parent",self.element).size()>1&&0==$("div.jGrowl-closer",self.element).size()&&0!=this.defaults.closer&&$(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(self.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){$(this).siblings().trigger("jGrowl.beforeClose"),$.isFunction(self.defaults.closer)&&self.defaults.closer.apply($(this).parent()[0],[$(this).parent()[0]])})},update:function(){$(this.element).find("div.jGrowl-notification:parent").each(function(){void 0!=$(this).data("jGrowl")&&void 0!=$(this).data("jGrowl").created&&$(this).data("jGrowl").created.getTime()+parseInt($(this).data("jGrowl").life)<(new Date).getTime()&&1!=$(this).data("jGrowl").sticky&&(void 0==$(this).data("jGrowl.pause")||1!=$(this).data("jGrowl.pause"))&&$(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0==this.defaults.pool||$(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),$(this.element).find("div.jGrowl-notification:parent").size()<2&&$(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){$(this).remove()})},startup:function(e){this.element=$(e).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){$(e).data("jGrowl.instance").update()},parseInt(this.defaults.check)),$.browser.msie&&parseInt($.browser.version)<7&&!window.XMLHttpRequest&&$(this.element).addClass("ie6")},shutdown:function(){$(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove(),clearInterval(this.interval)},close:function(){$(this.element).find("div.jGrowl-notification").each(function(){$(this).trigger("jGrowl.beforeClose")})}}),$.jGrowl.defaults=$.fn.jGrowl.prototype.defaults}(jQuery),function(jQuery,undefined){function newTmplItem(options,parentItem,fn,data){var newItem={data:data||0===data||data===!1?data:parentItem?parentItem.data:{},_wrap:parentItem?parentItem._wrap:null,tmpl:null,parent:parentItem||null,nodes:[],calls:tiCalls,nest:tiNest,wrap:tiWrap,html:tiHtml,update:tiUpdate};return options&&jQuery.extend(newItem,options,{nodes:[],parent:parentItem}),fn&&(newItem.tmpl=fn,newItem._ctnt=newItem._ctnt||newItem.tmpl(jQuery,newItem),newItem.key=++itemKey,(stack.length?wrappedItems:newTmplItems)[itemKey]=newItem),newItem}function build(tmplItem,nested,content){var frag,ret=content?jQuery.map(content,function(item){return"string"==typeof item?tmplItem.key?item.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+tmplItmAtt+'="'+tmplItem.key+'" $2'):item:build(item,tmplItem,item._ctnt)}):tmplItem;return nested?ret:(ret=ret.join(""),ret.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(all,before,middle,after){frag=jQuery(middle).get(),storeTmplItems(frag),before&&(frag=unencode(before).concat(frag)),after&&(frag=frag.concat(unencode(after)))}),frag?frag:unencode(ret))}function unencode(text){var el=document.createElement("div");return el.innerHTML=text,jQuery.makeArray(el.childNodes)}function buildTmplFn(markup){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+jQuery.trim(markup).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(all,slash,type,fnargs,target,parens,args){var def,expr,exprAutoFnDetect,tag=jQuery.tmpl.tag[type];if(!tag)throw"Unknown template tag: "+type;return def=tag._default||[],parens&&!/\w$/.test(target)&&(target+=parens,parens=""),target?(target=unescape(target),args=args?","+unescape(args)+")":parens?")":"",expr=parens?target.indexOf(".")>-1?target+unescape(parens):"("+target+").call($item"+args:target,exprAutoFnDetect=parens?expr:"(typeof("+target+")==='function'?("+target+").call($item):("+target+"))"):exprAutoFnDetect=expr=def.$1||"null",fnargs=unescape(fnargs),"');"+tag[slash?"close":"open"].split("$notnull_1").join(target?"typeof("+target+")!=='undefined' && ("+target+")!=null":"true").split("$1a").join(exprAutoFnDetect).split("$1").join(expr).split("$2").join(fnargs||def.$2||"")+"__.push('"})+"');}return __;")}function updateWrapped(options,wrapped){options._wrap=build(options,!0,jQuery.isArray(wrapped)?wrapped:[htmlExpr.test(wrapped)?wrapped:jQuery(wrapped).html()]).join("")}function unescape(args){return args?args.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function outerHtml(elem){var div=document.createElement("div");return div.appendChild(elem.cloneNode(!0)),div.innerHTML}function storeTmplItems(content){function processItemKey(el){function cloneTmplItem(key){key+=keySuffix,tmplItem=newClonedItems[key]=newClonedItems[key]||newTmplItem(tmplItem,newTmplItems[tmplItem.parent.key+keySuffix]||tmplItem.parent)}var pntKey,pntItem,tmplItem,key,pntNode=el;if(key=el.getAttribute(tmplItmAtt)){for(;pntNode.parentNode&&1===(pntNode=pntNode.parentNode).nodeType&&!(pntKey=pntNode.getAttribute(tmplItmAtt)););pntKey!==key&&(pntNode=pntNode.parentNode?11===pntNode.nodeType?0:pntNode.getAttribute(tmplItmAtt)||0:0,(tmplItem=newTmplItems[key])||(tmplItem=wrappedItems[key],tmplItem=newTmplItem(tmplItem,newTmplItems[pntNode]||wrappedItems[pntNode]),tmplItem.key=++itemKey,newTmplItems[itemKey]=tmplItem),cloneIndex&&cloneTmplItem(key)),el.removeAttribute(tmplItmAtt)}else cloneIndex&&(tmplItem=jQuery.data(el,"tmplItem"))&&(cloneTmplItem(tmplItem.key),newTmplItems[tmplItem.key]=tmplItem,pntNode=jQuery.data(el.parentNode,"tmplItem"),pntNode=pntNode?pntNode.key:0);if(tmplItem){for(pntItem=tmplItem;pntItem&&pntItem.key!=pntNode;)pntItem.nodes.push(el),pntItem=pntItem.parent;delete tmplItem._ctnt,delete tmplItem._wrap,jQuery.data(el,"tmplItem",tmplItem)}}var elem,elems,i,l,m,keySuffix="_"+cloneIndex,newClonedItems={};for(i=0,l=content.length;l>i;i++)if(1===(elem=content[i]).nodeType){for(elems=elem.getElementsByTagName("*"),m=elems.length-1;m>=0;m--)processItemKey(elems[m]);processItemKey(elem)}}function tiCalls(content,tmpl,data,options){return content?void stack.push({_:content,tmpl:tmpl,item:this,data:data,options:options}):stack.pop()}function tiNest(tmpl,data,options){return jQuery.tmpl(jQuery.template(tmpl),data,options,this)}function tiWrap(call,wrapped){var options=call.options||{};return options.wrapped=wrapped,jQuery.tmpl(jQuery.template(call.tmpl),call.data,options,call.item)}function tiHtml(filter,textOnly){var wrapped=this._wrap;return jQuery.map(jQuery(jQuery.isArray(wrapped)?wrapped.join(""):wrapped).filter(filter||"*"),function(e){return textOnly?e.innerText||e.textContent:e.outerHTML||outerHtml(e)})}function tiUpdate(){var coll=this.nodes;jQuery.tmpl(null,null,null,this).insertBefore(coll[0]),jQuery(coll).remove()}var appendToTmplItems,oldManip=jQuery.fn.domManip,tmplItmAtt="_tmplitem",htmlExpr=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,newTmplItems={},wrappedItems={},topTmplItem={key:0,data:{}},itemKey=0,cloneIndex=0,stack=[];jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i,l,tmplItems,ret=[],insert=jQuery(selector),parent=1===this.length&&this[0].parentNode;if(appendToTmplItems=newTmplItems||{},parent&&11===parent.nodeType&&1===parent.childNodes.length&&1===insert.length)insert[original](this[0]),ret=this;else{for(i=0,l=insert.length;l>i;i++)cloneIndex=i,elems=(i>0?this.clone(!0):this).get(),jQuery(insert[i])[original](elems),ret=ret.concat(elems);cloneIndex=0,ret=this.pushStack(ret,name,insert.selector)}return tmplItems=appendToTmplItems,appendToTmplItems=null,jQuery.tmpl.complete(tmplItems),ret}}),jQuery.fn.extend({tmpl:function(data,options,parentItem){return jQuery.tmpl(this[0],data,options,parentItem)},tmplItem:function(){return jQuery.tmplItem(this[0])},template:function(name){return jQuery.template(name,this[0])},domManip:function(args,table,callback,options){if(args[0]&&jQuery.isArray(args[0])){for(var tmplItem,dmArgs=jQuery.makeArray(arguments),elems=args[0],elemsLength=elems.length,i=0;elemsLength>i&&!(tmplItem=jQuery.data(elems[i++],"tmplItem")););tmplItem&&cloneIndex&&(dmArgs[2]=function(fragClone){jQuery.tmpl.afterManip(this,fragClone,callback)}),oldManip.apply(this,dmArgs)}else oldManip.apply(this,arguments);return cloneIndex=0,appendToTmplItems||jQuery.tmpl.complete(newTmplItems),this}}),jQuery.extend({tmpl:function(tmpl,data,options,parentItem){var ret,topLevel=!parentItem;if(topLevel)parentItem=topTmplItem,tmpl=jQuery.template[tmpl]||jQuery.template(null,tmpl),wrappedItems={};else if(!tmpl)return tmpl=parentItem.tmpl,newTmplItems[parentItem.key]=parentItem,parentItem.nodes=[],parentItem.wrapped&&updateWrapped(parentItem,parentItem.wrapped),jQuery(build(parentItem,null,parentItem.tmpl(jQuery,parentItem)));return tmpl?("function"==typeof data&&(data=data.call(parentItem||{})),options&&options.wrapped&&updateWrapped(options,options.wrapped),ret=jQuery.isArray(data)?jQuery.map(data,function(dataItem){return dataItem?newTmplItem(options,parentItem,tmpl,dataItem):null}):[newTmplItem(options,parentItem,tmpl,data)],topLevel?jQuery(build(parentItem,null,ret)):ret):[]},tmplItem:function(elem){var tmplItem;for(elem instanceof jQuery&&(elem=elem[0]);elem&&1===elem.nodeType&&!(tmplItem=jQuery.data(elem,"tmplItem"))&&(elem=elem.parentNode););return tmplItem||topTmplItem},template:function(name,tmpl){return tmpl?("string"==typeof tmpl?tmpl=buildTmplFn(tmpl):tmpl instanceof jQuery&&(tmpl=tmpl[0]||{}),tmpl.nodeType&&(tmpl=jQuery.data(tmpl,"tmpl")||jQuery.data(tmpl,"tmpl",buildTmplFn(tmpl.innerHTML))),"string"==typeof name?jQuery.template[name]=tmpl:tmpl):name?"string"!=typeof name?jQuery.template(null,name):jQuery.template[name]||jQuery.template(null,htmlExpr.test(name)?name:jQuery(name)):null},encode:function(text){return(""+text).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),jQuery.extend(jQuery.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(items){newTmplItems={}},afterManip:function(elem,fragClone,callback){var content=11===fragClone.nodeType?jQuery.makeArray(fragClone.childNodes):1===fragClone.nodeType?[fragClone]:[];callback.call(elem,fragClone),storeTmplItems(content),cloneIndex++}})}(jQuery),function($){function refresh(){var data=prepareData(this);if(!isNaN(data.datetime)){var words=inWords(data.datetime);$(this).text(words)}return this}function prepareData(element){if(element=$(element),!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());text.length>0&&element.attr("title",text)}return element.data("timeago")}function inWords(date){return $t.inWords(distance(date))}function distance(date){return(new Date).getTime()-date.getTime()}$.timeago=function(timestamp){return inWords(timestamp instanceof Date?timestamp:"string"==typeof timestamp?$.timeago.parse(timestamp):$.timeago.datetime(timestamp))};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(distanceMillis){function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction,value=$l.numbers&&$l.numbers[number]||number;return string.replace(/%d/i,value)}var $l=this.settings.strings,prefix=$l.prefixAgo,suffix=$l.suffixAgo;this.settings.allowFuture&&(0>distanceMillis&&(prefix=$l.prefixFromNow,suffix=$l.suffixFromNow),distanceMillis=Math.abs(distanceMillis));var seconds=distanceMillis/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24,years=days/365,words=45>seconds&&substitute($l.seconds,Math.round(seconds))||90>seconds&&substitute($l.minute,1)||45>minutes&&substitute($l.minutes,Math.round(minutes))||90>minutes&&substitute($l.hour,1)||24>hours&&substitute($l.hours,Math.round(hours))||48>hours&&substitute($l.day,1)||30>days&&substitute($l.days,Math.floor(days))||60>days&&substitute($l.month,1)||365>days&&substitute($l.months,Math.floor(days/30))||2>years&&substitute($l.year,1)||substitute($l.years,Math.floor(years));return $.trim([prefix,words,suffix].join(" "))},parse:function(iso8601){var s=$.trim(iso8601);return s=s.replace(/"/g,""),s=s.replace(/\.\d\d\d+/,""),s=s.replace(/-/,"/").replace(/-/,"/"),s=s.replace(/T/," ").replace(/Z/," UTC"),s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(s)},datetime:function(elem){var isTime="time"===$(elem).get(0).tagName.toLowerCase(),iso8601=isTime?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601)}}),$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;return $s.refreshMillis>0&&setInterval(function(){self.each(refresh)},$s.refreshMillis),self},document.createElement("abbr"),document.createElement("time")}(jQuery),function($){var Metlink=function(){function checkHash(){$.fn.hashchange&&$(window).hashchange()}var modules=[],User=null,inited=!1,init=function(){loadUser();for(var key in modules){var module=modules[key];module.init&&module.init(this)}checkHash(),postInit(),inited=!0},postInit=function(){for(var key in modules){var module=modules[key];module.postInit&&module.postInit.call(module)}},beforeShutdown=function(){for(var key in modules){var module=modules[key];module.beforeShutdown&&module.beforeShutdown.call(module)}},register=function(module){if(!module)throw"Attempted registration of null module";modules.push(module),inited&&module.init&&module.init(this)},loadUser=function(){Metlink.Member&&(User=new Metlink.Member(window.SSUser,window.SECURITY_TOKEN))},getUser=function(){return User||loadUser(),User},log=function(msg,level){level||(level="INFO"),"undefined"!=typeof console&&console.log&&("object"==typeof msg?(console.log("Metlink: "+level),console.log(msg)):console.log("Metlink: ["+level+"] "+msg)),"user"==level&&$.jGrowl&&$.jGrowl(msg)},serverStorage=function(){return!1},actionRecording=!1,recordAction=function(name,params,trigger){trigger||(actionRecording=!0);var obj={};obj[name]=params,$.bbq.pushState(obj)},actionHandlers={};$(window).bind("hashchange",function(e){if(actionRecording)return void(actionRecording=!1);for(var handlerName in actionHandlers){var params=e.getState(handlerName);if(params){var handlers=actionHandlers[handlerName];if(handlers)for(var i in handlers)handlers[i].call(handlers[i],params)}}});var replayAction=function(name,callback){var existing=actionHandlers[name];existing||(existing=[]),existing.push(callback),actionHandlers[name]=existing},popupBlockerChecker={check:function(popup_window,msg){var _scope=this;popup_window?/chrome/.test(navigator.userAgent.toLowerCase())?setTimeout(function(){_scope._is_popup_blocked(_scope,popup_window,msg)},200):popup_window.onload=function(){_scope._is_popup_blocked(_scope,popup_window,msg)}:_scope._displayError()},_is_popup_blocked:function(scope,popup_window,msg){popup_window.innerHeight>0==0&&scope._displayError(msg)},_displayError:function(msg){msg||(msg="Popup Blocker is enabled! Please add this site to your exception list."),alert(msg)}};return $(window).bind("unload",function(){return beforeShutdown(),!0}),{init:init,user:getUser,register:register,recordAction:recordAction,replayAction:replayAction,log:log,serverStorage:serverStorage,popupCheck:popupBlockerChecker,FrameManager:{listenTo:function(){},send:function(){}}}}();$(function(){$.jGrowl&&($.jGrowl.defaults.position="transport-top-right"),$.ajaxSetup({timeout:3e4}),Metlink.init();var $buoop={vs:{i:7,f:3.6,o:10.6,s:4,n:9}};try{$buoop.ol&&$buoop.ol()}catch(e){Metlink.log(e)}var e=document.createElement("script");if(e.setAttribute("type","text/javascript"),e.setAttribute("src","//web.archive.org/web/20180927073653/https://browser-update.org/update.js"),document.body.appendChild(e),"undefined"!=typeof nol_t){var pvar={cid:"vic-metlink",content:"0",server:"secure-au"},trac=nol_t(pvar);trac.record().post()}}),window.Metlink=Metlink}(jQuery),"undefined"!=typeof window.localStorage&&"undefined"!=typeof window.sessionStorage||!function(){var Storage=function(type){function createCookie(name,value,days){var date,expires;days?(date=new Date,date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toGMTString()):expires="",document.cookie=name+"="+value+expires+"; path=/"}function readCookie(name){var i,c,nameEQ=name+"=",ca=document.cookie.split(";");for(i=0;i<ca.length;i++){for(c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function setData(data){data=JSON.stringify(data),createCookie("localStorage",data,365)}function clearData(){createCookie("localStorage","",365)}function getData(){var data="session"==type?window.name:readCookie("localStorage");return data?JSON.parse(data):{}}var data=getData();return{length:0,clear:function(){data={},this.length=0,clearData()},getItem:function(key){return void 0===data[key]?null:data[key]},key:function(i){var ctr=0;for(var k in data){if(ctr==i)return k;ctr++}return null},removeItem:function(key){delete data[key],this.length--,setData(data)},setItem:function(key,value){data[key]=value+"",this.length++,setData(data)}}};"undefined"==typeof window.localStorage&&(window.localStorage=new Storage("local")),"undefined"==typeof window.sessionStorage&&(window.sessionStorage=new Storage("session"))}(),function($){Metlink.Utility=function(){var utilityItems={},menu=null,usageDialog=null,init=function(){utilityItems["Show Local Usage"]=localUsage},addUtilityItem=function(title,callback){if(utilityItems[title]||(utilityItems[title]=callback),menu){var list=menu.find("ul"),li=$("<li>").appendTo(list),action=$('<a href="#"></a>').appendTo(li);action.text(title),action.click(function(e){e.preventDefault();var call=utilityItems[title];call.call(this)})}},escape=function(raw){return raw&&raw.length?raw.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},localUsage=function(){function buildDataPanel(){var dataPanel=usageDialog.find(".usageData");dataPanel.empty();for(var totalStorage=0,i=0;i<localStorage.length;i++){var key=localStorage.key(i),data=localStorage.getItem(key);totalStorage+=data.length,function(k,d){var storageDetails=$('<div><a href="#" class="storageKey">'+k+" ("+d.length+' b)</a> [<a href="#" class="deleteKey">Clear</a>]<p class="storageItem"></p></div>');storageDetails.find("a.storageKey").click(function(e){e.preventDefault(),d=escape(d),"{"===d[0]&&(d=JSON.stringify(JSON.parse(d),null,2),d=d.replace(/ /g,"&nbsp;"),d=d.replace(/\n/g,"<br/>")),storageDetails.find("p.storageItem").html(d)}),storageDetails.find("a.deleteKey").click(function(e){e.preventDefault(),localStorage.removeItem(k),buildDataPanel()}),dataPanel.append(storageDetails)}(key,data)}usageDialog.find("h2").text("Local Data ("+totalStorage+"b used)")}usageDialog||(usageDialog=$('<div id="LocalUsageDialog" class="metlinkDialog"><h2>Local Data</h2><div class="usageData"></div></div>').appendTo("body")),buildDataPanel(),usageDialog.dialog({width:600,height:400,modal:!0,buttons:[{text:"Ok",click:function(){var _this=$(this);_this.dialog("close")}}]})},track=function(category,action,label){window._gaq?window._gaq.push(["_trackEvent",category,action,label]):window.ga&&ga("send",{hitType:"event",eventCategory:category,eventAction:action,eventLabel:label})};return{init:init,showLocalUsage:localUsage,addUtilityItem:addUtilityItem,escape:escape,track:track}}(),Metlink.register(Metlink.Utility)}(jQuery),function($){function Member(data,token){this.data=data?data:{},this.token=token,this.changed=!1}Member.prototype.exists=function(){return!!this.get("ID")},Member.prototype.get=function(key){return this.data[key]},Member.prototype.set=function(key,val){this.data[key]=val,this.changed=!0},Member.prototype.securityId=function(){return this.token},Member.prototype.settings=function(){if(!this.data.settings){var settings=Metlink.MyWay.backend().getData("member_settings");settings||(settings={}),this.data.settings=settings}return this.data.settings},Member.prototype.save=function(){Metlink.MyWay.backend().setData("member_settings",this.data.settings),Metlink.MyWay.backend().save()},Metlink.Member=Member,$(document).on("click","input.filterOption",function(){var name=$(this).attr("name"),val=$(this).attr("value");Metlink.user().settings()[name]=val,Metlink.user().save()})}(jQuery),function($){var GLOBAL_KEY="43",WORD_LENGTH=3,SORT_ALWAYS_ON_TOP=999999,STOP_FINDER_URL="langsing/autocomplete/stopfinder",SEARCH_URL="langsing/autocomplete",inRequest=!1,activeSource=null;$("body").ajaxError(function(){inRequest=!1}),Metlink.Autocomplete=function(){function getFormattedName(value){return""!=value&&(value=value.replace("$XINT$","(x)"),value=value.replace("$N$","(North)"),value=value.replace("$S$","(South)"),value=value.replace("$E$","(East)"),value=value.replace("$W$","(West)"),value=value.replace("$MID$","(Middle)"),value=value.replace("$END$","(End)")),value}function getLabelDescription(anyType,name){if(!anyType)return"";if(anyType.indexOf("-")>0){var bits=anyType.split("-");if(serviceModeMap[bits[1]]){var modeLabel=serviceModeMap[bits[1]];return 10==bits[1]&&name&&(modeLabel="Night bus"),modeLabel+" "+bits[0]}}switch(anyType){case"loc":return"Location";case"locExt":return"Location Extension";case"stop":return"Station / stop";case"poiHierarchy":return"Landmark Heirarchy";case"poi":return"Landmark";case"street":return"Street";case"buildingname":return"Building Name";case"address":return"Address";case"singlehouse":return"Address";case"crossing":return"Crossing";case"postcode":return"Postcode";case"line-2":return"";case"unknown":return"Unknown";default:return""}return""}var currentPosition=null,isMobile=/Android|Mobi|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);isMobile=isMobile||location.hash&&location.hash.indexOf("mobile")>=0;var dialog=null,defaultItems=[],pendingAJAXRequests=[],FilterOption={Stop:2,Address:29,Landmark:32},groups=([{id:"stop",option:FilterOption.Stop,name:"Stops"},{id:"address",option:FilterOption.Address,name:"Addresses"},{id:"landmark",option:FilterOption.Landmark,name:"Landmarks"}],[{id:"",name:""},{id:"user",name:"Recent searches"},{id:"train",name:"Station",classPostfix:"train",hasIcon:!0},{id:"regionaltrain",name:"Regional Station",classPostfix:"regional-train",hasIcon:!0},{id:"regionalcoach",name:"Regional Coach",classPostfix:"regional-train",hasIcon:!0},{id:"tram",name:"Tram",classPostfix:"tram",hasIcon:!0},{id:"bus",name:"Bus",classPostfix:"bus",hasIcon:!0},{id:"efa",name:"Address / Landmark",classPostfix:"addresslandmark"}]),landmarks=["mcg","town","fed"],streetWords=["st","street","road","drive","court","place","boulevard","highway","lane","parkway","pkwy","terrace","promenade","cl","close","av","dr","bv","bvde","ct","rd","rise","pde","pl","rdge"],groupIDLookup={},groupSortLookup={};$.each(groups,function(i,group){groups[i].type="group",groups[i].group=group.id,groups[i].score=SORT_ALWAYS_ON_TOP,groups[i].visible=!1,groups[i].groupIndex=i,groupIDLookup[group.id]=groups[i]});var GroupSort=function(){function updateGroupRecords(){$.each(sortOrder,function(i,groupID){groupSortLookup[groupID]=groups.length-i})}var sortOrder=[];return{resetToDefaults:function(){
sortOrder=[],$.each(groups,function(i,group){sortOrder.push(group.id)}),updateGroupRecords()},setAfter:function(groupID,appendGroupID){var removeIndex=sortOrder.indexOf(groupID);removeIndex>-1&&sortOrder.splice(removeIndex,1);var insertIndex=sortOrder.indexOf(appendGroupID);-1!=insertIndex&&(sortOrder.splice(insertIndex+1,0,groupID),updateGroupRecords())}}}();GroupSort.resetToDefaults();var init=function(){if(window.PTV_WEBSITE_BASE&&(STOP_FINDER_URL=window.PTV_WEBSITE_BASE+"/"+STOP_FINDER_URL),Metlink.Utility&&Metlink.Utility.addUtilityItem("Autocomplete",autocompleteInterface),"geolocation"in navigator&&isMobile){var locationOption={name:"My location",group:"",value:"My location",onchange:function(elem){if(currentPosition&&currentPosition.lon)Metlink.JourneyPlanner.setSearchPoint({lon:currentPosition.lon,lat:currentPosition.lat,label:"My location"},$(elem).attr("name").replace(/name_/gi,""));else{$(elem).val("");var $form=$($(elem)[0].form),validateErrorMessages={},msg=currentPosition&&currentPosition.length>0?currentPosition:"Position not available";validateErrorMessages[$(elem).attr("name")]=msg,$form.validate().showErrors(validateErrorMessages)}}};navigator.geolocation.getCurrentPosition(function(position){var lon=position.coords.longitude,lat=position.coords.latitude;currentPosition={lon:lon,lat:lat},defaultItems.push(locationOption)},function(error){var errorMessage="";switch(error.code){case error.PERMISSION_DENIED:errorMessage="My Location: Permission denied.";break;case error.POSITION_UNAVAILABLE:errorMessage="My Location: Position unavailable.";break;case error.TIMEOUT:errorMessage="My Location: Retrieval timed out."}currentPosition=errorMessage},{enableHighAccuracy:!0,timeout:3e3})}$("input.transportAutocomplete").entwine({onmatch:function(){bindAutocomplete(this)}})},setDataSource=function(source){activeSource=source},remoteDataSource=function(request,response){if(request.term.length>=WORD_LENGTH&&!inRequest)inRequest=!0,remoteDataSearch({term:request.term},function(items){response(items),inRequest=!1});else{var items=[];response(items)}},remoteDataSearch=function(params,callback){$.get(SEARCH_URL,params,function(data){var results=[],tokenizer=new RegExp("[^\\w]+","gi");data&&data.length&&$.each($.trim(data).split("\n"),function(){var info=this.split("|");results.push(constructItem({type:info[0],id:info[1],name:info[2],tokens:info[2].toLowerCase().split(tokenizer),synonyms:[info[3]],score:info[4],coords:{}}))}),callback(results)})},stopFinderSource=function(request,response){var resultItems=[];if(resultItems=resultItems.concat(defaultItems),resultItems=resultItems.concat(groups),request.term.length>=WORD_LENGTH&&!inRequest){var params={term:request.term};inRequest=!0,stopFinderSearch.call(request.element,params,function(items){resultItems=resultItems.concat(items),response(resultItems),inRequest=!1})}else{var myWayKey=autocompleteKey(request.element),myWayItems=[];Metlink.MyWay&&(myWayItems=0==request.term.length?Metlink.MyWay.getAllAutocompleteEntries(myWayKey):Metlink.MyWay.getAutocompleteMatch(myWayKey,request.term)),$.each(myWayItems,function(index,item){resultItems.push(constructItem({type:item.type,id:item.value,group:"user",userGroup:item.userGroup,name:item.text,synonyms:[],coords:item.coords?item.coords:{},userEntry:!0}))}),response(resultItems)}},guessStopTypeFromText=function(str){function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}if(str=str.toLowerCase(),landmarks.indexOf(str)>=0)return FilterOption.Landmark;var words=str.split(/\s+/g);if(words.length>=2){if(isNumeric(words[0]))return FilterOption.Address;for(var i=1;i<words.length;i++)if(streetWords.indexOf(words[i])>=0)return FilterOption.Address}return null},stopFinderSearch=function(params,callback){var self=this,url=STOP_FINDER_URL+"?callback=?",filters=[],guessedStopType=guessStopTypeFromText(params.term);switch(guessedStopType){case FilterOption.Address:filters=[{object_type:FilterOption.Address,minLength:3}];break;case FilterOption.Landmark:filters=[{object_type:FilterOption.Landmark,minLength:3}];break;default:filters=[{object_type:FilterOption.Stop,minLength:3},{object_type:FilterOption.Address+FilterOption.Landmark,minLength:6}]}$.each(pendingAJAXRequests,function(index,ajax){ajax.abort()}),pendingAJAXRequests=[],GroupSort.resetToDefaults(),$.each(filters,function(index,filter){if(!($(self).val().length<filter.minLength)){var paramFinal=$.extend({},params,{object_type:filter.object_type}),ajaxRequest=$.getJSON(url,paramFinal,function(data){var items=[];if(data&&data.length&&(data=$.parseJSON(data)),data&&data.stopFinder){var stopFinder=data.stopFinder;filter.object_type==FilterOption.Address+FilterOption.Landmark&&stopFinder.length<=3&&GroupSort.setAfter("efa","user");var exactMatch=!1;for(var i in stopFinder){var item=stopFinder[i],coords={};if(item.anyType){if(item.ref&&item.ref.coords){var bits=item.ref.coords.split(",");coords.lat=bits[0],coords.lon=bits[1]}var toAdd=constructItem({group:item.group?item.group:"",type:item.anyType,name:getFormattedName(item.name),synonyms:[],coords:coords,score:item.score});filter.object_type==FilterOption.Address+FilterOption.Landmark&&params.term.indexOf(" ")>0&&0===item.name.toLowerCase().indexOf(params.term)&&stopFinder.length<10&&(exactMatch=!0),toAdd.group||(toAdd.group=""),"stop"===item.anyType?toAdd.divaId=item.stateless:toAdd.stateless=item.stateless,items.push(toAdd)}}exactMatch&&GroupSort.setAfter("efa","user")}callback(items)});pendingAJAXRequests.push(ajaxRequest)}})},autocompleteKey=function(forElem){var searchType=$(forElem).parent().attr("data-search-for"),mode=$(forElem).parent().find("*[name=Mode]"),modeBit="";mode&&mode.val()&&(modeBit=mode.val()),searchType&&"undefined"!=typeof searchType||(searchType="");var stopType=$(forElem).parent().attr("data-stop-link");stopType=stopType&&"undefined"!=typeof stopType&&stopType.indexOf("diva")>0?"diva":"metlink";var key=$(forElem).attr("name")+"-"+searchType+"-"+modeBit+"-"+stopType+"-"+GLOBAL_KEY;return key};activeSource=stopFinderSource;var bindAutocomplete=function(elem){var baseConfig={select:function(event,ui){if(!ui.item)return!1;if(Metlink.log("Selected autocomplete result "+ui.item.name),Metlink.Utility&&Metlink.Utility.track("autocomplete","select_"+this.id,$(elem).attr("data-initval")+"|"+ui.item.name),$(elem).val(ui.item.name),"undefined"!=typeof ui.item.onchange)return void ui.item.onchange.call(ui.item.onchange,elem);var itemGroupID="undefined"!=typeof ui.item.userGroup?ui.item.userGroup:ui.item.group;$.each(groups,function(i,group){""!==group.id&&"undefined"!=typeof group.classPostfix&&""!==group.classPostfix&&($(elem).removeClass("jp-border--"+group.classPostfix),itemGroupID===group.id&&$(elem).addClass("jp-border--"+group.classPostfix))});var type=ui.item.divaId?"stopID":"any",val=ui.item.divaId?ui.item.divaId:ui.item.poiId;ui.item.type&&(type=ui.item.type,val=ui.item.divaId?ui.item.divaId:ui.item.id);var searchData={type:type,value:val,text:ui.item.name,coords:ui.item.coords,userGroup:ui.item.group};if(ui.item.stateless&&(searchData.value=ui.item.stateless),ui.item.anyType&&(searchData.type=ui.item.type),"undefined"!=typeof Metlink.MyWay){var autocompleteData={type:type,value:searchData.value,text:searchData.text,coords:searchData.coords,userGroup:searchData.userGroup},key=autocompleteKey(elem);Metlink.MyWay.addSelectedAutocompleteEntry(key,ui.item.name,autocompleteData)}return $(elem).data("searchData",searchData),$.fn.validate&&$(elem).valid(),$(elem).trigger("searchDataChanged",searchData),!1},source:function(request,response){var currentDataSource=activeSource;"stopfinder"===$(elem).attr("data-autocompletesource")?currentDataSource=stopFinderSource:"remote"===$(elem).attr("data-autocompletesource")&&(currentDataSource=remoteDataSource),request.element=elem,currentDataSource(request,function(items){if("undefined"!=typeof Metlink.MyWay){var key=autocompleteKey(elem),additional=Metlink.MyWay.getAutocompleteMatch(key,request.term);if($.each(additional,function(k,v){$.each(items,function(i,e){"object"===(typeof e).toLowerCase()&&e.name===v.text&&"undefined"==typeof items[i].userEntry&&""!==items[i].group&&(items[i].userEntry=!0,items[i].userGroup=items[i].group,items[i].group="user")})}),"undefined"!=typeof window.TRANSPORT_ENTRIES){var transportEntries=null;transportEntries=currentDataSource===stopFinderSource?window.TRANSPORT_ENTRIES.JP:window.TRANSPORT_ENTRIES.Other,$.each(transportEntries,function(){items.unshift(constructItem({transportEntry:!0,type:this.type,group:this.group,id:this.value,name:this.text,synonyms:[],coords:this.coords?this.coords:{}}))})}}currentDataSource===stopFinderSource&&($.each(groups,function(index,group){groups[index].visible=!1}),$.each(items,function(index,item){"group"!==item.type&&(groupIDLookup[item.group].visible=!0)})),items.sort(function(a,b){return a.group!==b.group?groupSortLookup[b.group]-groupSortLookup[a.group]:b.score-a.score}),response(items)})}};$(elem).on("click focus",function(e){isMobile&&$.scrollTo($(elem),350),$(this).val()||$(elem).data("autocomplete").search()}).on("keydown",function(e){e.keyCode<45||e.keyCode>90||$(elem).data("searchData",null)}),"stopfinder"===$(elem).data("autocompletesource")?$(elem).autocomplete($.extend({},baseConfig,{minLength:0,delay:630})):$(elem).autocomplete($.extend({},baseConfig,{minLength:0})),$(elem).data("autocomplete")._renderItem=function($ul,item){"undefined"==typeof item.synonyms&&(item.synonyms=[]),"undefined"!=typeof item.onchange&&"undefined"==typeof item.type&&(item.type="function");var listEntryElem=$("<li>").data("item.autocomplete",item).addClass("jp-autocomplete-item").appendTo($ul);if("group"===item.type){var classPostfix="undefined"!=typeof item.classPostfix?item.classPostfix:null;listEntryElem.addClass("jp-autocomplete-group"),classPostfix&&(listEntryElem.addClass("jp-autocomplete-group"),listEntryElem.addClass("jp-autocomplete-group--"+classPostfix),listEntryElem.addClass("jp-border--"+classPostfix)),item.visible&&item.name||listEntryElem.addClass("jp-autocomplete-group--hidden");var $textEl=$("<span>").addClass("jp-autocomplete-item--text").appendTo(listEntryElem);if("undefined"!=typeof item.hasIcon&&item.hasIcon&&classPostfix){$("<i>").addClass("jp-autocomplete-group--icon jp-icon-transport jp-icon-transport--"+classPostfix).appendTo($textEl)}$("<span>").addClass("jp-autocomplete-group--label").html(item.name).appendTo($textEl);return listEntryElem}var $aTag=$("<a>").attr("data-value",item.value).data("item.autocomplete",item).addClass("jp-autocomplete-item--link").appendTo(listEntryElem),entry=$(elem).val().replace("\\","").replace("(","\\(").replace(")","\\)"),re=new RegExp("("+entry+")","gi"),hilited=item.name.replace(re,'<span class="autocompleteMatch">$1</span>');if(hilited='<span class="entryTypeLabel tType-'+item.type+'">'+getLabelDescription(item.type,item.name)+"</span>"+hilited,$aTag.html(hilited+"</a><span style='display: none;'>score: "+item.score+" "+item.synonyms.join(" ")+"</span>"),item.userEntry){listEntryElem.addClass("userEntry");var $removeEntryButton=$('<button type="button" class="jp-u-reset-button jp-autocomplete-removehistory"><span class="ui-icon ui-icon-close"></span><span class="jp-u-visuallyhidden">Remove from history</span></button>)');listEntryElem.append($removeEntryButton),$removeEntryButton.click(function(){if($(this).parent().remove(),Metlink.MyWay){var searchType=$(elem).parent().attr("data-search-for");searchType||(searchType="");var key=autocompleteKey(elem);Metlink.log("Removing "+$(elem).attr("name")+" "+item.name),Metlink.MyWay.removeAutocompleteEntry(key,item.name)}})}return item.transportEntry&&listEntryElem.addClass("transportEntry"),listEntryElem}},constructItem=function(item){return item.value=item.name,item},autocompleteInterface=function(){function buildPanel(){var content=dialog.find(".autocompleteData");content.empty(),$("<select><option>Stop Finder</option><option>Remote</option></select>").appendTo(content).change(function(){"Remote"==$(this).val()?(inRequest=!1,activeSource=remoteDataSource):(inRequest=!1,activeSource=stopFinderSource)}).wrap("Which data source should be used?")}dialog||(dialog=$('<div id="AutocompleteDialog" class="metlinkDialog"><h2>Autocomplete Console</h2><div class="autocompleteData"></div></div>').appendTo("body")),buildPanel(),dialog.dialog({width:600,height:400,modal:!0,buttons:[{text:"Ok",click:function(){var _this=$(this);_this.dialog("close")}}]})},serviceModeMap={1:"Metro train",2:"Metro bus",3:"Metro tram",4:"VLine",5:"VLine",7:"Regional bus",8:"School bus",9:"Telebus",10:"Night bus",11:"Ferry",12:"Regional train",13:"Skybus",14:"Taxi"};return{WORD_LENGTH:WORD_LENGTH,init:init,stopFinderSearch:stopFinderSearch,remoteDataSearch:remoteDataSearch,setDataSource:setDataSource,remoteDataSource:remoteDataSource,stopFinderSource:stopFinderSource}}(),Metlink.register(Metlink.Autocomplete)}(jQuery),function($){Metlink.MyWay=function(){function getBackend(){if(!backend){try{backend=new Metlink.MyWay.Backends.LocalBackend(localStorage)}catch(e){backend=Metlink.MyWay.Backends.Noop}backend.init()}return backend}function clearAutocompleteData(){getBackend().clearAutocomplete(),getBackend().save()}function addSelectedAutocompleteEntry(type,label,value){var set=getBackend().getAutocompleteSet(type);set[label]=value,getBackend().save()}function getAllAutocompleteEntries(type){var set=getBackend().getAutocompleteSet(type),options=[];for(var term in set)options.push(set[term]);return options}function getAutocompleteMatch(type,str){var set=getBackend().getAutocompleteSet(type),options=[];for(var term in set)term.toLowerCase().indexOf(str.toLowerCase())>=0&&options.push(set[term]);return options}function removeAutocompleteEntry(type,label){var set=getBackend().getAutocompleteSet(type);delete set[label],getBackend().save()}function addFavourite(favourite){var deferred=$.Deferred(),content=$("<div />").addClass("myway-dialog-container"),dialog=$("<div />").addClass("myway-dialog").append(content),form=$("<form/>"),title=$('<input type="text" class="text">').val(favourite.title),add=$('<input type="submit" class="action add" value="Add">'),cancel=$('<input type="submit" class="action" value="Cancel">');return content.append($("<h2/>").text("Add "+favourite.typeTitle())),content.append("<p>Please enter a title to save this item to your favourites as:</p>"),content.append(form),form.append(title),form.append(add),form.append(cancel),$.fancybox({content:dialog,padding:0,overlayOpacity:.9,onClosed:function(){deferred.reject()}}),setTimeout(function(){title.focus()},100),add.click(function(){return favourite.title=title.val(),favourite.title?(content.empty().addClass("loading"),getBackend().addFavourite(favourite).done(function(){content.removeClass("loading").append("<h2>"+favourite.typeTitle()+" Saved</h2>").append("<p>The selected "+favourite.type()+" has been saved</p>").append('<p><a href="myway">View favourites.</a></p>'),dialog.append(favourite.dialogContent()),deferred.resolve()}).fail(function(msg){alert(msg.responseText||msg),$.fancybox.close()})):title.addClass("required"),!1}),cancel.click(function(){return $.fancybox.close(),!1}),deferred}function addVisited(title,type,link,icon,time){return getBackend().addVisited(new Metlink.MyWay.RecentlyVisited(title,type,link,icon,time))}var backend;return{clearAutocompleteData:clearAutocompleteData,removeAutocompleteEntry:removeAutocompleteEntry,getAllAutocompleteEntries:getAllAutocompleteEntries,addSelectedAutocompleteEntry:addSelectedAutocompleteEntry,getAutocompleteMatch:getAutocompleteMatch,addFavourite:addFavourite,addVisited:addVisited,backend:getBackend}}(),Metlink.register(Metlink.MyWay),$(function(){$("a.clearMywayData").click(function(e){return e.preventDefault(),Metlink.MyWay.backend().clear(),location.reload(),!1})}),$(".myway-add-favourite").entwine({onmatch:function(){var self=$(this),favourite=Metlink.MyWay.Favourites.factory(self.data("type"),self.data("title"),self.data("params"),self.data("lines"));Metlink.MyWay.backend().hasFavourite(favourite)&&self.addClass("myway-favourite"),self.click(function(e){e.preventDefault();var fav=$.extend(!0,{},favourite);return self.hasClass("myway-favourite")?(alert("This item already exists in your favourites."),!1):(self.addClass("loading"),Metlink.MyWay.addFavourite(fav).done(function(){self.removeClass("loading").addClass("myway-favourite")}).fail(function(){self.removeClass("loading")}),!1)})}})}(jQuery),function($){function Backend(storage){this.favourites=[],this.visited=[],this.autocomplete={},this.data={},this.storage=storage,this.favouritesKey="myway.favourites",this.visitedKey="myway.visited",this.autocompleteKey="myway.autocomplete",this.dataKey="myway.data"}function LocalBackend(storage){Backend.call(this,storage)}function UserBackend(user,storage){this.user=user,this.urls={addfav:"myway/addfavourite",removefav:"myway/removefavourite",addvisited:"myway/addvisited",clearvisited:"myway/clearvisited"},Backend.call(this,storage)}var MAX_VISITED=10;Backend.prototype.getFavourites=function(){return this.favourites},Backend.prototype.hasFavourite=function(favourite){return-1!=this.indexOfFavourite(favourite)},Backend.prototype.indexOfFavourite=function(favourite){for(var i=0;i<this.favourites.length;i++)if(this.favourites[i].equals(favourite))return i;return-1},Backend.prototype.getVisited=function(){return this.visited},Backend.prototype.getAutocompleteSet=function(type){return this.autocomplete[type]||(this.autocomplete[type]={}),this.autocomplete[type]},LocalBackend.prototype=new Backend,LocalBackend.prototype.init=function(){var self=this,favs=this.storage.getItem(this.favouritesKey),visits=this.storage.getItem(this.visitedKey),data=this.storage.getItem(this.dataKey),ac=this.storage.getItem(this.autocompleteKey);data&&(this.data=JSON.parse(data)),ac&&(this.autocomplete=JSON.parse(ac)),favs&&$.each(JSON.parse(favs),function(){self.favourites.push(Metlink.MyWay.Favourites.factory(this.type,this.title,this.params,this.lines))}),visits&&$.each(JSON.parse(visits),function(){self.visited.push(new Metlink.MyWay.RecentlyVisited(this.title,this.type,this.link,this.icon,this.time))}),$("input[name='FavouritesJSON']").val(favs),$("input[name='VisitedJSON']").val(visits)},LocalBackend.prototype.clear=function(){this.favourites=[],this.visited=[],this.autocomplete={},this.storage.clear()},LocalBackend.prototype.save=function(){var favs=$.map(this.favourites,function(v){return v.toMap()});try{return this.storage.setItem(this.dataKey,JSON.stringify(this.data)),this.storage.setItem(this.autocompleteKey,JSON.stringify(this.autocomplete)),this.storage.setItem(this.favouritesKey,JSON.stringify(favs)),this.storage.setItem(this.visitedKey,JSON.stringify(this.visited)),!0}catch(storageException){Metlink.log("Failed storing local data: "+storageException)}return!1},LocalBackend.prototype.setData=function(key,value){this.data[key]=value},LocalBackend.prototype.getData=function(key){return this.data[key]},LocalBackend.prototype.addFavourite=function(favourite){return this.hasFavourite(favourite)?$.Deferred().reject("The item already exists in your favourites."):(this.favourites.push(favourite),this.save()?$.Deferred().resolve():$.Deferred().reject("This item could not be saved; are you running in private browsing mode?"))},LocalBackend.prototype.removeFavourite=function(favourite){var index=this.indexOfFavourite(favourite);return-1!=index?(this.favourites.splice(index,1),this.save(),$.Deferred().resolve()):$.Deferred().reject("The item could not be found to remove.")},LocalBackend.prototype.addVisited=function(visited){if(this.visited.length&&this.visited[0].link==visited.link)return this.visited[0].time=new Date,this.save(),$.Deferred().resolve();for(;this.visited.length>=MAX_VISITED;)this.visited.pop();return this.visited.unshift(visited),this.save(),$.Deferred().resolve()},LocalBackend.prototype.clearVisited=function(){return this.visited=[],this.save(),$.Deferred().resolve()},LocalBackend.prototype.clearAutocomplete=function(){return this.autocomplete={},this.save(),$.Deferred().resolve()},UserBackend.prototype=new Backend,UserBackend.prototype.init=function(){this.storage.removeItem(this.favouritesKey),this.storage.removeItem(this.visitedKey);var self=this,favs=this.user.get("Favourites"),visited=this.user.get("RecentlyVisited");favs&&$.each(favs,function(){self.favourites.push(Metlink.MyWay.Favourites.factory(this.type,this.title,this.params,this.lines))}),visited&&$.each(visited,function(){self.visited.push(new Metlink.MyWay.RecentlyVisited(this.title,this.type,this.link,this.icon,this.time))})},UserBackend.prototype.clear=function(){alert("NOT implemented")},UserBackend.prototype.bindWarning=function(){$(window).bind("beforeunload",function(){return"Your MyWay favourites have not yet finished saving. Are you sure you want to leave the page?"})},UserBackend.prototype.unbindWarning=function(){$(window).unbind("beforeunload")},UserBackend.prototype.addFavourite=function(favourite){var self=this,data=favourite.toMap();return data.SecurityID=Metlink.user().token,self.bindWarning(),$.post(this.urls.addfav,data).done(function(){self.favourites.push(favourite),self.unbindWarning()})},UserBackend.prototype.removeFavourite=function(favourite){var self=this,index=this.indexOfFavourite(favourite),data=favourite.toMap();return-1==index?$.Deferred().reject("The item could not be found to remove."):(data.SecurityID=Metlink.user().token,self.bindWarning(),$.post(this.urls.removefav,data).done(function(){self.favourites.splice(index,1),self.unbindWarning()}))},UserBackend.prototype.getVisited=function(){return this.visited},UserBackend.prototype.addVisited=function(visited){var self=this,data=visited.toMap();return data.SecurityID=Metlink.user().token,self.bindWarning(),$.post(this.urls.addvisited,data).done(function(){self.visited.unshift(visited),self.unbindWarning()})},UserBackend.prototype.clearVisited=function(){var self=this,data={SecurityID:Metlink.user().token};return self.bindWarning(),$.post(this.urls.clearvisited,data).done(function(){self.visited=[],self.unbindWarning()})},UserBackend.prototype.clearAutocomplete=function(){return $.Deferred().resolve()},Metlink.MyWay.Backends={Base:Backend,LocalBackend:LocalBackend,UserBackend:UserBackend,Noop:{init:function(){},getFavourites:function(){return[]},hasFavourite:function(){return!1},indexOfFavourite:function(){return-1},getVisited:function(){return[]},getAutocompleteSet:function(){return[]},save:function(){},clear:function(){},setData:function(key,value){},getData:function(key){},addFavourite:function(favourite){return $.Deferred().resolve()},removeFavourite:function(favourite){},addVisited:function(visited){return $.Deferred().resolve()},clearAutocomplete:function(){return $.Deferred().resolve()},clearVisited:function(){return $.Deferred().resolve()}}}}(jQuery),function($){function FavouriteFactory(type,title,params,lines){switch(type){case"stop":return new FavouriteStop(title,params,lines);case"journey":return new FavouriteJourney(title,params,lines);case"timetable":return new FavouriteTimetable(title,params,lines);default:throw"Invalid favourite type "+type+"."}}function Favourite(title,params,lines){this.title=title,this.params=params,this.lines=lines}function FavouriteStop(title,params,lines){Favourite.call(this,title,params,lines)}function FavouriteTimetable(title,params,lines){Favourite.call(this,title,params,lines)}function FavouriteJourney(title,params,lines){Favourite.call(this,title,params,lines)}Favourite.prototype.typeTitle=function(){throw"Please implement a typeTitle method."},Favourite.prototype.type=function(){throw"Please implement a type method."},Favourite.prototype.hash=function(){throw"Please implement a hash method."},Favourite.prototype.dialogContent=function(){return""},Favourite.prototype.toMap=function(){return{type:this.type(),title:this.title,params:this.params,lines:this.lines}},Favourite.prototype.equals=function(other){return this.hash()==other.hash()},FavouriteStop.prototype=new Favourite,FavouriteStop.prototype.typeTitle=function(){return"Favourite Stop"},FavouriteStop.prototype.type=function(){return"stop"},FavouriteStop.prototype.hash=function(){return"stop-"+this.params.stop_id},FavouriteTimetable.prototype=new Favourite,FavouriteTimetable.prototype.typeTitle=function(){return"Favourite Timetable"},FavouriteTimetable.prototype.type=function(){return"timetable"},FavouriteTimetable.prototype.hash=function(){return["timetable",this.params.type,this.params.id].join("-")},FavouriteJourney.prototype=new Favourite,FavouriteJourney.prototype.typeTitle=function(){return"Favourite Journey"},FavouriteJourney.prototype.type=function(){return"journey"},FavouriteJourney.prototype.hash=function(){return["journey",this.params.search].join("-")},FavouriteJourney.prototype.dialogContent=function(){return""},Metlink.MyWay.Favourites={factory:FavouriteFactory,Base:Favourite,FavouriteStop:FavouriteStop}}(jQuery),function($){function RecentlyVisited(title,type,link,icon,time){this.title=title,this.type=type,this.link=link,this.icon=icon,time?isNaN(time)?this.time=$.timeago.parse(time):(this.time=new Date,this.time.setTime(1e3*time)):this.time=new Date,"Journey"==type&&(this.icon="a2b.png")}function render(){$(".recently-visited").each(function(){var tmpl=$(".recently-visited-tmpl",this),container=$(".recently-visited-container",this);container.empty().append(tmpl.tmpl({visited:Metlink.MyWay.backend().getVisited()})),container.find(".timeago").timeago()})}RecentlyVisited.prototype.toMap=function(){return{title:this.title,type:this.type,link:this.link,icon:this.icon,time:this.time.toISOString()}},Metlink.MyWay.RecentlyVisited=RecentlyVisited,$(".myway-clear-visited").live("click",function(){return $(this).text("Loading..."),Metlink.MyWay.backend().clearVisited().done(render),!1}),$(render)}(jQuery),function($){Metlink.Geocoder=function(){var pointLookup=function(lat,lon,zoomLevel,callback){"function"==typeof zoomLevel&&(callback=zoomLevel,zoomLevel=2),$.get("transport/direct/geocode.php",{lat:lat,lon:lon,zoom:zoomLevel},function(data){data&&callback(data)})};return{lookup:pointLookup}}()}(jQuery),function($){var MDV_PROXY=null,REMOTE_MDV_PROXY=null,JOURNEY_PLANNER_DATA_URL="/langsing/plan-journey",DEFAULT_INPUT_TEXT="Station, stop, landmark or address",ORIGIN={text:"input[name=name_origin]",type:"input[name=type_origin]",input:"input[name=nameInput_origin]"},DEST={text:"input[name=name_destination]",type:"input[name=type_destination]",input:"input[name=nameInput_destination]"},STOPFINDER={input:"#name_sf"},RESULTS="#JourneyPlanResults",DETAILS="#JourneyPlanDetails",SEARCH="#JpSearchForm",DEFAULT_TEXT={},PANEL="#journeyPlannerPanel",MAP_CONTAINER="#MapContent",replayed=!1,lastSearch=null,lastJsonUrl=null,transportModes=[],currentMode="",maskTimer=null,mapInfo=null,currentLeg=null,plannerLoadedCallbacks=[],plannerLoaded=!1,resultsDetails=null;Metlink.JourneyPlanner=function(){var init=function(){createMask(),DEFAULT_TEXT[SEARCH]=$(SEARCH).html(),DEFAULT_TEXT[RESULTS]=$(RESULTS).html(),DEFAULT_TEXT[DETAILS]=$(DETAILS).html(),resultsDetails=$('<div class="jpResultsDetails">').appendTo("body").hide(),$("iframe[name=JpMap]").length&&(Metlink.FrameManager.listenTo("JpMap",this),Metlink.FrameManager.send("JpMap","jpInit")),initializeAccordions(),$("#locationSelector").length&&(setMode("plan"),REMOTE_MDV_PROXY=MDV_PROXY=$("#MdvProxy").val(),$("#RemoteMdvProxy").length&&(REMOTE_MDV_PROXY=$("#RemoteMdvProxy").val()),MDV_PROXY=makeAbsolute(MDV_PROXY),REMOTE_MDV_PROXY=makeAbsolute(REMOTE_MDV_PROXY),Metlink.replayAction("jpsearch",replayJPAction))},initializeAccordions=function(){function debounce(fn,delay){delay=delay||150;var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout(function(){fn.apply(context,args)},delay)}}$(".js-jp-accordion-button").each(function(){function calculateHeight(){var $inner=$accordion.children().first(),height=$inner.height();return 0===height?null:height}var $accordion,$button=$(this),containerSelector=$button.attr("data-container");$accordion=containerSelector?$button.closest($button.data("container")).find(".js-jp-accordion"):$($button.attr("data-target")),$(window).resize(debounce(function(){if($accordion.hasClass("is-open")){var height=calculateHeight();if(null===height)return;$accordion.css("height",height)}})),$button.click(function(){if($accordion.hasClass("is-open"))$button.removeClass("is-open"),$accordion.removeClass("is-open"),$accordion.css("height",0);else{var height=calculateHeight();if(null===height)return;$button.addClass("is-open"),$accordion.addClass("is-open"),$accordion.css("height",height)}})})},makeAbsolute=function(relative){return relative&&relative.indexOf("//")<0?location.protocol+"//"+location.host+"/"+relative:relative},createMask=function(){hideMask()},showMask=function(){$(".jpform").addClass("is-loading"),window.clearTimeout(maskTimer),maskTimer=window.setTimeout(function(){hideMask()},1e4)},hideMask=function(){$(".jpform").removeClass("is-loading"),window.clearTimeout(maskTimer)},postInit=function(){Metlink.log("postInit journeyPlanner"),$("#MdvProxy").length&&!replayed&&Metlink.log("Setting default state (showPlanner")},setMode=function(mode){Metlink.log("Setting journeyplanner to "+mode+" but hardcoded to plan for now"),currentMode="plan"},resetJourneyPlanner=function(callback){journeyMode(),setMode("plan"),plannerLoaded=!1,callback&&addPlannerLoadHandler(callback),showMask(),$.get(MDV_PROXY,{language:"en"},function(data){hideMask(),$(SEARCH).html(DEFAULT_TEXT[SEARCH]),$(SEARCH).append(data),$(RESULTS).html(DEFAULT_TEXT[RESULTS]),$(DETAILS).html(DEFAULT_TEXT[DETAILS])}),currentLeg=null},addPlannerLoadHandler=function(fn){plannerLoaded?fn.call(this):plannerLoadedCallbacks.push(fn)},onPlannerLoaded=function(){for(plannerLoaded=!0;plannerLoadedCallbacks.length>0;){var fn=plannerLoadedCallbacks.shift();fn.call(this)}},replayActionHandlers={search:function(params){var doSearch=function(){deserializeJourneyPlanForm(params),executeSearch(params.from,params.to)};showPlanner(doSearch)},show:function(params){var doShow=function(){deserializeJourneyPlanForm(params)};showPlanner(doShow)},more:function(params){var doMore=function(){deserializeJourneyPlanForm(params),setTimeout(function(){$(".searchOptions a").click(),scrollTo(".selectPreferences")},200)};showPlanner(doMore)},showSearch:function(params){showSearch(null,!0)},showPlanner:function(params){showPlanner()},focusOn:function(params){params.data&&showSearch(function(){focusOn(params.data,!0)})},planFrom:function(params){params.data&&(addPlannerLoadHandler(function(){planFrom(params.data)}),showPlanner())}},replayJPAction=function(params){replayed=!0,params.action&&(Metlink.log("Checking param "+params.action),replayActionHandlers[params.action]&&(Metlink.log("Calling actionHandler "+params.action),replayActionHandlers[params.action].call(this,params)))},executeSearch=function(from,to,callback){if(Metlink.log("Executing search"),Metlink.Utility.track("journey_planner","search",from.text+"|"+to.text),showMask(),showPlanner(),callback||(callback=updateJourneyPlanner),from.text==DEFAULT_INPUT_TEXT||to.text==DEFAULT_INPUT_TEXT)return Metlink.log("Please provide an origin and destination","user"),scrollTo(ORIGIN.text),$(ORIGIN.text).effect("highlight",{},2e3),$(DEST.text).effect("highlight",{},2e3),void hideMask();syncSearchFieldState(from,to);var searchParams=serializeJourneyPlanForm();lastSearch=searchParams,Metlink.log(searchParams);var form=$(ORIGIN.type).parents("form");form.attr("action",JOURNEY_PLANNER_DATA_URL),form.length?form.ajaxSubmit(function(response){callback.call(Metlink.JourneyPlanner,response),hideMask()}):hideMask()},resetField=function(type,content){content||(content=DEFAULT_INPUT_TEXT);var field="origin"==type?ORIGIN.text:DEST.text;$(field).val(content),$(field).data("searchData",{type:null,text:content,value:null
}),$(field).removeAttr("data-stateless")},setMapInfo=function(info){mapInfo=info},setSearchPoint=function(pointInfo,type){if(!pointInfo)return resetField(type);var field="origin"===type?ORIGIN.text:DEST.text,value="",searchData={};value="Point",pointInfo.label&&(value=pointInfo.label),searchData.value=pointInfo.lon+":"+pointInfo.lat+":WGS84[DD.ddddd]:"+value,searchData.type="coord",showPlanner(function(){$(field).data("searchData",searchData),$(field).val(value),scrollTo(field)})},showTimetable=function(stopId){Metlink.log(stopId);var redirect="";redirect=stopId.divaId?location.protocol+"//"+location.hostname+"/timetables/divastop/"+stopId.divaId:location.protocol+"//"+location.hostname+"/timetables/stop/"+stopId,Metlink.log(redirect),location.href=redirect},displayJourneyPlan=function(jsonUrl,legId){journeyMode(),lastJsonUrl=jsonUrl,Metlink.log("Displaying journey plan for "+jsonUrl),Metlink.FrameManager.send("JpMap","displayJourneyPlan",jsonUrl,legId),currentLeg=legId},clearAllMarkers=function(){Metlink.FrameManager.send("JpMap","clearAllMarkers")},focusOn=function(point,loadData){if(Metlink.log("Focusing on point"),point.zoom||(point.zoom=6),Metlink.log(point),Metlink.FrameManager.send("JpMap","focusOn",point),loadData&&"diva"==point.type){var searchData={type:"stop",value:parseInt(point.value)+1e7,text:point.title};$(STOPFINDER.input).val(point.title),$(STOPFINDER.input).data("searchData",searchData)}},planFrom=function(data){var searchData={type:"stopID",value:data.value,text:data.title};focusOn({type:"diva",value:data.value-1e7,zoom:4}),$(ORIGIN.text).val(data.title),$(ORIGIN.text).data("searchData",searchData)},showRoute=function(routeID){Metlink.FrameManager.send("JpMap","showRoute",routeID)},showStop=function(stopID){Metlink.FrameManager.send("JpMap","showStop",stopID)},showStation=function(stationID){Metlink.FrameManager.send("JpMap","showStation",stationID)},journeyMode=function(){Metlink.log("Switch map to jp mode"),Metlink.FrameManager.send("JpMap","switchMode","jp")},ieHacked=!1,stopsAndRoutesMode=function(){Metlink.log("Switch map to find stops + routes mode"),Metlink.FrameManager.send("JpMap","switchMode","service"),!ieHacked&&$.browser.msie&&parseFloat($.browser.version)<=8&&(ieHacked=!0,Metlink.FrameManager.send("JpMap","switchMode","service"))},selectTransportModes=function(modes){transportModes=modes,Metlink.log("Selected transport modes"),Metlink.log(modes)},updateJourneyPlanner=function(resultsText){$("#JpSearchIndicator").hide(),$("#MapMenu").html(resultsText),initializeAccordions(),$(".jp-panel-page-content").hide(),$(".js-jp-panel-journeyoptions").addClass("is-open"),Metlink.JourneyPlannerTile.init(),cleanupJourneyDisruptions(),cleanupCoordInput($(ORIGIN.text)),cleanupCoordInput($(DEST.text)),hideMask()},cleanupJourneyDisruptions=function(){$("h2:contains(Service Disruptions)").each(function(){var links={};$(this).parent().find("li").each(function(){if(""==$(this).html())return void $(this).remove();var theLi=$(this),atag=$(this).find("a");atag.length&&(links[atag.attr("href")]&&theLi.remove(),links[atag.attr("href")]=!0)}),$(this).parent().find("a").attr("target","_blank")})},cleanupCoordInput=function(field){var fieldVal=field.val();if(fieldVal&&fieldVal.length){var loc=fieldVal.indexOf("WGS84[DD.ddddd]");if(loc>0){var newVal=fieldVal.substr(loc+16);field.val(newVal)}if(loc=fieldVal.indexOf(":GDAV:"),loc>0){var newVal=fieldVal.substr(loc+6);field.val(newVal)}}},displayJourneyOption=function(id,into){var elem=$("#itd"+id);elem.length&&(Metlink.log("Show journey "+id),into.find("span.jpDetails").appendTo(resultsDetails),into.empty(),into.append(DEFAULT_TEXT[DETAILS]),into.removeClass("fauxsabled"),elem.appendTo(into),elem.show(),scrollTo(into))},makeWide=function(){$(PANEL).removeClass("minimised"),$(PANEL).addClass("maximised"),$(MAP_CONTAINER).removeClass("maximised"),$(MAP_CONTAINER).addClass("minimised")},makeNarrow=function(){$(PANEL).removeClass("maximised"),$(PANEL).addClass("minimised"),$(MAP_CONTAINER).removeClass("minimised"),$(MAP_CONTAINER).addClass("maximised")},showPlanner=function(callback){currentLeg=null,"plan"!==currentMode?resetJourneyPlanner(callback):callback&&callback(),makeNarrow()},showSearch=function(callback,forceLoad){("search"!=currentMode||forceLoad)&&(showMask(),stopsAndRoutesMode(),$.get(MDV_PROXY,{name_sf:"1",language:"en"},function(data){Metlink.JourneyPlanner.updateJourneyPlanner(data),callback&&callback()}))},scrollTo=function(target){$(document).scrollTo(target,{offset:{top:-50},duration:100})},setSearchDate=function(date){var pad=function(str,len){return new Array(len-str.length+1).join("0")+str},day=pad(date.getDate().toString(),2),month=pad((date.getMonth()+1).toString(),2),year=date.getFullYear().toString(),date=year+"-"+month+"-"+day;$(".jpform").find('input[name="date"]').val(date)},getLastJourneyJsonUrl=function(){return lastJsonUrl},isPickList=function(field){var val=$(field).val();return val&&val.match(/^\d+:\d+$/)},syncSearchFieldState=function(from,to){to||(from=from.from,to=from.to),from.type&&$(ORIGIN.type).val(from.type),from&&from.value&&("coord"==from.type?($(ORIGIN.text).val(from.value),$(ORIGIN.input).remove()):$(ORIGIN.input).val(from.value)),to&&to.type&&$(DEST.type).val(to.type),to&&to.value&&("coord"==to.type?($(DEST.text).val(to.value),$(DEST.input).remove()):$(DEST.input).val(to.value)),$(ORIGIN.input).val()&&!isPickList(ORIGIN.input)||$(ORIGIN.input).remove(),$(DEST.input).val()&&!isPickList(DEST.input)||$(DEST.input).remove()},deserializeJourneyPlanForm=function(params){var formId="#locationSelector",form=$(formId);if(!form.length)return{};form=$(form[0]);var from=params.from,to=params.to,time=params.time;from&&from.text&&!from.text.match(/\d+:\d+/)&&$(ORIGIN.text).val(from.text),to&&to.text&&!to.text.match(/\d+:\d+/)&&$(DEST.text).val(to.text),"undefined"==from.coords&&(from.coords={}),"undefined"==to.coords&&(to.coords={}),$(ORIGIN.text).data("searchData",from),$(DEST.text).data("searchData",to),time&&(time.arr_dep&&$("select[name=itdTripDateTimeDepArr]").val(time.arr_dep).change(),time.time&&form.find("[name=time]").val(time.time).change(),time.date&&$("input[name=date]").val(time.date).change()),from.originType&&$("input[name=anyObjFilter_origin]").val(from.originType),to.destType&&$("input[name=anyObjFilter_destination]").val(to.destType),params.preferences&&form.find(".js-jp-panel-options input, .js-jp-panel-options select").each(function(){var myType=$(this).attr("type");"radio"==myType||"checkbox"==myType?params.preferences[$(this).attr("name")]&&params.preferences[$(this).attr("name")]==$(this).val()?$(this).attr("checked","checked"):$(this).removeAttr("checked"):params.preferences[$(this).attr("name")]&&$(this).val(params.preferences[$(this).attr("name")]),$(this).trigger("change")})},serializeJourneyPlanForm=function(ignoreTime,ignorePreferences){var formId="#locationSelector",form=$(formId);if(!form.length)return{};form=$(form[0]);var from=form.find("*[name='name_origin']"),to=form.find("*[name='name_destination']"),arrDep=form.find("select[name='itdTripDateTimeDepArr']"),date=form.find('input[name="date"]'),time=form.find("*[name=time]"),fromText=from.is("select")?from.find("option:selected").text():from.val(),toText=to.is("select")?to.find("option:selected").text():to.val(),fromData=from.data("searchData")?from.data("searchData"):{text:fromText,value:from.val()},toData=to.data("searchData")?to.data("searchData"):{text:toText,value:to.val()};"coord"==fromData.type||fromData.forceType||(fromData.type="any"),"coord"==toData.type||toData.forceType||(toData.type="any");var timeData={arr_dep:arrDep.val(),time:time.val(),date:date.val()};timeData.date||(timeData={time:"",date:""});var destType=$("input[name=anyObjFilter_destination]:checked").val();destType||(destType=$("input[name=anyObjFilter_destination]").val()),toData.destType=destType;var originType=$("input[name=anyObjFilter_origin]:checked").val();originType||(originType=$("input[name=anyObjFilter_origin]").val()),fromData.originType=originType;var params={action:"search",from:fromData,to:toData};return ignoreTime!==!1&&(params.time=timeData),ignorePreferences!==!1&&(params.preferences={},form.find(".js-jp-panel-options input, .js-jp-panel-options select").each(function(){var myType=$(this).attr("type");"radio"==myType||"checkbox"==myType?$(this).is(":checked")&&(params.preferences[$(this).attr("name")]=$(this).val()):params.preferences[$(this).attr("name")]=$(this).val()})),params};return{DEFAULT_INPUT_TEXT:DEFAULT_INPUT_TEXT,init:init,postInit:postInit,setMode:setMode,resetField:resetField,executeSearch:executeSearch,setMapInfo:setMapInfo,getMapInfo:function(){return mapInfo},getLeg:function(){return currentLeg},setSearchPoint:setSearchPoint,showTimetable:showTimetable,displayJourneyPlan:displayJourneyPlan,focusOn:focusOn,showRoute:showRoute,showStop:showStop,showStation:showStation,clearAllMarkers:clearAllMarkers,reset:resetJourneyPlanner,updateJourneyPlanner:updateJourneyPlanner,journeyMode:journeyMode,stopsAndRoutesMode:stopsAndRoutesMode,makeWide:makeWide,makeNarrow:makeNarrow,showPlanner:showPlanner,showSearch:showSearch,scrollTo:scrollTo,getLastJourneyJsonUrl:getLastJourneyJsonUrl,setSearchDate:setSearchDate,selectTransportModes:selectTransportModes,syncSearchFieldState:syncSearchFieldState,serializeJourneyPlanForm:serializeJourneyPlanForm,deserializeJourneyPlanForm:deserializeJourneyPlanForm,onPlannerLoaded:onPlannerLoaded,displayJourneyOption:displayJourneyOption,showMask:showMask,hideMask:hideMask}}(),Metlink.register(Metlink.JourneyPlanner),$("a[data-show-stop-id]").live("click",function(e){e.preventDefault(),location.href="journey#jpsearch[action]=focusOn&jpsearch[data][type]=metlink&jpsearch[data][value]="+$(this).attr("data-show-stop-id")}),$("a#JpReloader").live("click",function(e){return e.preventDefault(),Metlink.JourneyPlanner.reset(),!1}),$(function(){if(!($("div.noscriptJP").length>0)){var fixErrorSearches=function(alertMessage){var doClick=!1;if("No locations could be found"==alertMessage.text()){var newMsg="No departure information available for that stop. Please try another stop, or search for an address";alertMessage.text(newMsg);var redoAsCoord=function(field,searchLoc,fieldType){return $(field).length&&$(field).attr("data-matched-id")&&$(field).attr("data-matched-id").match(/^\d{8}$/)&&(Metlink.JourneyPlanner.resetField(fieldType),searchLoc.coords&&searchLoc.coords.lat)?(Metlink.JourneyPlanner.setSearchPoint({lat:searchLoc.coords.lat,lon:searchLoc.coords.lon,label:searchLoc.text},fieldType),!0):void 0};doClick=redoAsCoord(ORIGIN.text,lastSearch.from,"origin"),doClick=doClick||redoAsCoord(DEST.text,lastSearch.to,"dest")}var redoAsTextSearch=function(field,searchLoc,fieldType,removeField){return $(field).length&&0===$(field).val().indexOf("streetID")?(alertMessage.text("Searching for nearby address"),Metlink.JourneyPlanner.resetField(fieldType),$(field).data("searchData",{type:null,text:searchLoc.text,value:null}),$(removeField).remove(),$(field).val(searchLoc.text),Metlink.MyWay.backend().clear(),Metlink.MyWay.backend().save(),!0):void 0};return doClick=doClick||redoAsTextSearch(ORIGIN.text,lastSearch.from,"origin",ORIGIN.input),doClick=doClick||redoAsTextSearch(DEST.text,lastSearch.to,"dest",DEST.input),doClick?($("button[name=jpSubmit]").click(),!0):void 0},isFullJp=function(){return $("body.JourneyPlannerPage").length>0},fullJpSearch=function(){Metlink.log("Clicked search - isSearch = "+isSearch);var sfInput=$("#name_sf"),isSearch=sfInput.length>0;if(isSearch){var parentForm=$(this).parents("form");Metlink.JourneyPlanner.showMask();var data=sfInput.data("searchData");if(data&&data.value?(Metlink.log("Using stored search data"),Metlink.log(data),$("#nameInput_sf").val(data.value)):$("#nameInput_sf").val($("#name_sf").val()),$(STOPFINDER.input).val()==DEFAULT_INPUT_TEXT)return Metlink.log("Location required","user"),Metlink.JourneyPlanner.hideMask(),void $(STOPFINDER.input).effect("highlight",{},3e3);parentForm.ajaxSubmit(function(res){Metlink.JourneyPlanner.updateJourneyPlanner(res)})}else{var params=Metlink.JourneyPlanner.serializeJourneyPlanForm();params.from.value&&params.to.value&&(delete params.date,Metlink.recordAction("jpsearch",params)),Metlink.JourneyPlanner.executeSearch(params.from,params.to)}},tileSearch=function(){$("input",this).prop("disabled",!0),$.fn.selectBox&&$("select",this).selectBox("disable");var params=Metlink.JourneyPlanner.serializeJourneyPlanForm(),dosubmit=!0;if(params.from.text==Metlink.JourneyPlanner.DEFAULT_INPUT_TEXT&&(Metlink.log("Please provide an origin and destination","user"),$("input[name=name_origin]").effect("highlight",{},3e3),dosubmit=!1),params.to.text==Metlink.JourneyPlanner.DEFAULT_INPUT_TEXT&&(Metlink.log("Please provide an origin and destination","user"),$("input[name=name_destination]").effect("highlight",{},3e3),dosubmit=!1),!dosubmit)return $("input",this).removeAttr("disabled"),$.fn.selectBox&&$("select",this).selectBox("enable"),dosubmit;var base=$(this).data("js-action"),url=base+"#"+$.param({jpsearch:params});return $("body.js-iframe-jp").length?($("input,select",this).prop("disabled",!1),window.open(url),!1):(window.location=url,!1)};$("#locationSelector, #JourneyPlanResults form").entwine({onmatch:function(){var thisForm=$(this),sfInput=$("#name_sf"),isSearch=sfInput.length>0;if(isSearch&&sfInput.keydown(function(){$(this).data("changed",1)}),$(this).submit(function(e){var valid=thisForm.valid();return valid?isFullJp()?(e.preventDefault(),fullJpSearch.call(this),!1):tileSearch.call(thisForm):!1}),Metlink.log("Bind location selector form, search routes+stops is "+isSearch),$("a.js-saveAs").hide(),jQuery("#jInput_origin",thisForm).size()>0){var originVal=jQuery("#jInput_origin").attr("title"),nameInput_origin=$("#nameInput_origin");0==nameInput_origin.length&&(nameInput_origin='<input type="hidden" id="nameInput_origin" name="nameInput_origin" value="'+originVal+'" />',jQuery("#requestID").after(nameInput_origin)),originVal&&originVal.length&&originVal.indexOf("coord::::")<0&&(Metlink.log("Setting inputOrigin to "+$(ORIGIN.type).val()+" - "+originVal),$(ORIGIN.text).data("searchData",{forceType:!0,type:$(ORIGIN.type).val(),value:originVal,text:$(ORIGIN.text).val()}))}if(jQuery("#jInput_destination",thisForm).size()>0){var destVal=jQuery("#jInput_destination").attr("title"),nameInput_destination=$("#nameInput_destination");0==nameInput_destination.length&&(nameInput_destination='<input type="hidden" id="nameInput_destination" name="nameInput_destination" value="'+destVal+'" />',jQuery("#requestID").after(nameInput_destination)),destVal&&destVal.length&&$(DEST.text).data("searchData",{forceType:!0,type:$(DEST.type).val(),value:destVal,text:$(DEST.text).val()})}if(jQuery("#jInput_sf",thisForm).size()>0){var nameInput_sf='<input type="hidden" id="nameInput_sf" name="nameInput_sf" value="'+jQuery("#jInput_sf").attr("title")+'" />';jQuery("#requestID").after(nameInput_sf)}$(".ui-datepicker-trigger").length||$("<input/>").attr("type","hidden").appendTo("#calendar",thisForm).datepicker({showOn:"button",buttonImage:"themes/transport-site/images/date-picker-dark.gif",buttonImageOnly:!1,buttonText:"Show date picker",minDate:new Date,maxDate:(new Date).addYears(1),onSelect:function(){Metlink.JourneyPlanner.setSearchDate($(this).datepicker("getDate"))}}),$("ol.journeyOptions",thisForm).length&&$("#trITDepMOTvalue",thisForm).siblings("a.selectBox").after('<span><a href="#">More</a></span>');var errorMessage=thisForm.find("p.error"),alertMessage=thisForm.find("div.alert");$(thisForm).find("[data-stateless]").each(function(){$(this).data("searchData",{value:$(this).attr("data-stateless"),text:$(this).val()})});for(var inputErrors=$(".js-jp-input-error"),i=0;i<inputErrors.length;i++){var inputField=$(inputErrors[i]).attr("data-input-field");inputField&&(Metlink.JourneyPlanner.resetField(inputField,$("#name_"+inputField).val()),$("#nameInput_"+inputField).remove(),Metlink.MyWay.clearAutocompleteData())}var disableSwitching=thisForm.find(".js-no-switcher").length>0;errorMessage.length||alertMessage.length||$(".js-jp-destinationswitch").length||!$("#name_origin").is("input[type=text]")||disableSwitching||$("#name_origin",thisForm).after('<div id="destinationSwitch"><a href="#">Switch directions</a></div>'),disableSwitching&&$(thisForm).find("#destinationSwitch a, .js-jp-destinationswitch").remove();var hijackFormLoad=!1;if(alertMessage.length>0&&fixErrorSearches(alertMessage)===!0&&(hijackFormLoad=!0),$(thisForm).find("#destinationSwitch a, .js-jp-destinationswitch").click(function(e){if(!disableSwitching){e.preventDefault();var from=$(ORIGIN.text).data("searchData"),to=$(DEST.text).data("searchData");$(ORIGIN.text).data("searchData",to),$(DEST.text).data("searchData",from),from=$(ORIGIN.text).val(),to=$(DEST.text).val(),$(ORIGIN.text).val(to),$(DEST.text).val(from),to==DEFAULT_INPUT_TEXT&&Metlink.JourneyPlanner.resetField("origin"),from==DEFAULT_INPUT_TEXT&&Metlink.JourneyPlanner.resetField("dest");var originFilter=$("input[name=anyObjFilter_origin]:checked").val(),destFilter=$("input[name=anyObjFilter_destination]:checked").val();return $("input[name=anyObjFilter_destination][value="+originFilter+"]").click(),$("input[name=anyObjFilter_origin][value="+destFilter+"]").click(),!1}}),lastSearch&&!hijackFormLoad){$(ORIGIN.text).data("searchData",lastSearch.from),$(DEST.text).data("searchData",lastSearch.to),Metlink.JourneyPlanner.deserializeJourneyPlanForm(lastSearch);var formParams={action:"show",to:lastSearch.to,from:lastSearch.from,preferences:lastSearch.preferences},searchParams=$.param({jpsearch:formParams}),titleText="";if(formParams.from.text&&(titleText+=formParams.from.text),lastSearch.to.text){var sep=titleText.length>0?" to ":"Location to ";titleText+=sep+lastSearch.to.text}else titleText.length&&(titleText+=" to location");var myway={type:"journey",title:titleText,params:{search:searchParams},lines:[]},saveVisited=!1;if(lastSearch.from.value&&lastSearch.to.value){if(saveVisited=!0,$(SEARCH).find("div.alert").length&&(saveVisited=!1),saveVisited){Metlink.MyWay.addVisited(myway.title,"Journey","journey/#"+searchParams);var saveAs=$("a.js-saveAs");saveAs.data(myway).addClass("myway-add-favourite"),$("a.js-saveAs").show()}$("a#JpReloader").attr("href","journey/#"+searchParams)}}$("a.jp-link-route-map, div.stopMapButton a").click(function(e){e.preventDefault();var link=$(this);return Metlink.JourneyPlanner.showMask(),$.get(link.attr("href"),{ajax:1},function(data){if(data.success){var mapWindow=window.open(data.message);setTimeout(function(){Metlink.popupCheck.check(mapWindow)},20)}else confirm("To access this map your journey needs to be refreshed. Click OK below, then click the map link again")&&setTimeout(function(){$("button[name=jpSubmit]").click()},250)}).fail(function(d){Metlink.log("Communication error loading map"),Metlink.log(d),alert("Could not load the map, please refresh and try again")}).complete(function(){Metlink.JourneyPlanner.hideMask()}),!1}),Metlink.JourneyPlanner.onPlannerLoaded(),$(".noscript, .jpDetails",thisForm).hide()}}),$(document).on("click",".journeyOption li",function(){$(".journeyOption li").removeClass("selected"),$(this).hasClass("journeyTerminate")||$(this).addClass("selected");var i=$(this).attr("title");$(this).parents().each(function(){if($(this).hasClass("jpDetails")){var element="#"+$(this).attr("id").replace("itd","");""==i&&(i=0);var jsonUrl=$(element).attr("rel");jsonUrl=REMOTE_MDV_PROXY+jsonUrl.replace("/langsing/journey-planner",JOURNEY_PLANNER_DATA_URL),Metlink.JourneyPlanner.displayJourneyPlan(jsonUrl,i)}})}),$(document).on("click","#updateJourneyOptionsButton",function(e){e.preventDefault(),Metlink.JourneyPlanner.showMask();var parentForm=$(this).parents("form");parentForm.ajaxSubmit(function(response){Metlink.JourneyPlanner.updateJourneyPlanner(response)})}),$(document).on("click","a#jpMoreOptions",function(e){e.preventDefault(),$("#advancedInterface").toggle()}),$(document).on("click","a#jpLessOptions",function(e){e.preventDefault(),$("#advancedInterface").toggle()}),$(document).on("click","a.jp-earlierlater-link, a.earlierJourney, div.editJourney a, #JpEditor",function(e){return e.preventDefault(),Metlink.JourneyPlanner.showMask(),$.get($(this).attr("href"),{},Metlink.JourneyPlanner.updateJourneyPlanner),!1}),$("div.editJourney a").entwine({onmatch:function(){$("#JpEditor").attr("href",$(this).attr("href")).show()}}),$(document).on("click","a.clearSearch",function(e){e.preventDefault(),Metlink.JourneyPlanner.clearAllMarkers(),Metlink.recordAction("jpsearch",{action:"showPlanner"}),Metlink.JourneyPlanner.reset()}),$(document).on("click","#setOrigin",function(e){Metlink.JourneyPlanner.showPlanner(),$(".jpform ol.journeyOptions").length&&Metlink.JourneyPlanner.makeWide(),Metlink.recordAction("jpsearch",{action:"showPlanner"})}),$(document).on("focus","input[name=address]",function(){$(this).val()==DEFAULT_INPUT_TEXT&&$(this).val("")})}})}(jQuery),jQuery(function($){$(".journeyPlannerPrint, .journey-planner-print").live("click",function(){var url=$(this).attr("href");if(!url){var selection=$(".journeyOptions .selected a.displayDetails").attr("href");url=$(selection).find("a.printBtn").attr("href")}var info=Metlink.JourneyPlanner.getMapInfo();info&&info.zoomLevel&&(url+="&zoom="+info.zoomLevel),info&&info.latlon&&(url+="&latlon="+info.latlon);var leg=Metlink.JourneyPlanner.getLeg();leg&&(url+="&legId="+leg);var height=Math.max(Math.floor(.8*$(window).height()),800),opts="width=780,height="+height+",scrollbars=1";return window.open(url,"_blank",opts),!1})}),jQuery(function($){var prefix="expander-state-";$(".expander[data-cookie]").entwine({onmatch:function(){var self=$(this),cookie=prefix+self.attr("data-cookie"),value=$.cookie(cookie);"expanded"==value?self.addClass("expanded"):"collapsed"==value&&self.removeClass("expanded")}}),$(".expander > :first-child").live("click",function(){var expander=$(this).parent(),cookie=expander.attr("data-cookie");expander.toggleClass("expanded"),cookie&&$.cookie(prefix+cookie,expander.is(".expanded")?"expanded":"collapsed")}),$(".expander > :first-child a").live("click",function(){return $(this).parent().trigger("click"),!1})}),function($){Metlink.Disruptions=function(){var disruptions=null,loaded=!1,types={current:!1,planned:!1},trunks={},getGeneratedDate=function(type){return type||(type="current"),types[type]},init=function(){Metlink.Utility.addUtilityItem("Disruptions",disruptionsInterface),Metlink.FrameManager.listenTo("JpMap",this),$(".trunkLines").each(function(){var ids=$(this).val();ids.length&&(ids=ids.split(","),trunks[$(this).attr("data-trunkid")]=ids)})},deferred=null,loadDisruptions=function(){if(loaded)return deferred.resolve(disruptions.all);if(deferred)return deferred;deferred=$.Deferred(),disruptions={},disruptions.all={};for(var disruptionType in types);return deferred},isDisrupted=function(runId,lineId,lineMainId,cb){if(!loaded&&cb)return void loadDisruptions().done(function(){var d=isDisrupted(runId,lineId,lineMainId);cb.call(this,d)});if(disruptions){if(runId)for(var type in types)if(disruptions[type]&&disruptions[type].run[runId])return disruptions[type].run[runId];if(lineId)for(var type in types)if(disruptions[type]&&disruptions[type].line[lineId])return disruptions[type].line[lineId];if(lineMainId)for(var type in types)if(disruptions[type]&&disruptions[type].lineMain[lineMainId])return disruptions[type].lineMain[lineMainId]}},showDisruption=function(ids){$.isArray(ids)||(ids=[ids]);for(var i=0,disruptionDesc="";i<ids.length;i++){var disruption=ids[i];"object"!=typeof disruption&&(disruption=disruptions.all[disruption]),disruption&&(disruptionDesc+="<p>"+disruption.Description+"</p>")}if(i>0){var content='<div class="disruptionPopupInfo"><h3>Service Update</h3>'+disruptionDesc+"</div>";$.fancybox(content,{transitionIn:"none",transitionOut:"none",overlayOpacity:.8,overlayColor:"#000",padding:"0",scrolling:"no",height:350,width:600})}},showDisruptionsOnLineMain=function(lineMainId){if(disruptions){var ids=[];for(var type in types)if(disruptions[type]&&disruptions[type].lineMain[lineMainId])for(var i in disruptions[type].lineMain[lineMainId])ids.push(disruptions[type].lineMain[lineMainId][i].ID);showDisruption(ids)}},dialog=null,disruptionsInterface=function(){function buildPanel(){var content=dialog.find(".disruptionsDialogData");content.empty();var ip=$('<input type="button" value="Log Data" />').appendTo(content);content.append("<br/>");var isDis=$('<input type="text" />').appendTo(content),isDisButton=$('<input type="button" value="Check disruption" />').appendTo(content);content.append("<br>");var out=$("<textarea></textarea>").appendTo(content);isDisButton.click(function(){var val=isDis.val();if(val){var bits=val.split(" "),type=2;2==bits.length&&(type=parseInt(bits[0]),val=parseInt(bits[1]));var args=[null,null,null];args[type]=val;var d=isDisrupted.apply(this,args);out.val("No disruption"),d&&out.val(JSON.stringify(d))}}),ip.click(function(){Metlink.log(disruptions)})}dialog||(dialog=$('<div id="DisruptionsDebugDialog" class="metlinkDialog"><h2>Disruptions Console</h2><div class="disruptionsDialogData"></div></div>').appendTo("body")),buildPanel(),dialog.dialog({width:600,height:400,modal:!0,buttons:[{text:"Ok",click:function(){var _this=$(this);_this.dialog("close")}}]})},isTrunkDisrupted=function(trunkId){if(trunks[trunkId])for(var i in trunks[trunkId]){var lineMainId=trunks[trunkId][i];if(lineMainId.length&&isDisrupted(null,null,lineMainId))return!0}},showTrunkDisruptions=function(trunkId){if(disruptions){var ids=[];for(var type in types)if(trunks[trunkId])for(var i in trunks[trunkId]){var lineMainId=trunks[trunkId][i];if(lineMainId.length&&disruptions[type]&&disruptions[type].lineMain[lineMainId])for(var i in disruptions[type].lineMain[lineMainId])ids.push(disruptions[type].lineMain[lineMainId][i].ID)}showDisruption(ids)}};return{loadDisruptions:loadDisruptions,getGeneratedDate:getGeneratedDate,isDisrupted:isDisrupted,showDisruption:showDisruption,showDisruptionsOnLineMain:showDisruptionsOnLineMain,isTrunkDisrupted:isTrunkDisrupted,showTrunkDisruptions:showTrunkDisruptions,init:init}}(),Metlink.Disruptions.loadDisruptions(),Metlink.register(Metlink.Disruptions),$(function(){$(".disruption-alert").entwine({onmatch:function(){var myPos=$(this).position();myPos.top-=5,myPos.left+=$(this).width()+5;var link=$('<div class="alert-icon">&nbsp;</div>').css({position:"absolute",top:myPos.top+"px",width:"30px",height:"30px",left:myPos.left+"px"}).insertAfter($(this)),disruptions=$(this).data("disruptions");link.click(function(e){e.preventDefault(),e.stopPropagation(),Metlink.Disruptions.showDisruption(disruptions)})}})})}(jQuery),function($){$(function(){var searchForm=$("#Form_ModeSearchForm");if(!(searchForm.length<1)){searchForm.show();var mode=searchForm.find("*[name=Mode]"),search=searchForm.find("#Form_ModeSearchForm_Search"),placeholder=searchForm.data("placeholder"),stopLink=searchForm.data("stop-link"),lineLink=searchForm.data("line-link"),searchFor=searchForm.data("search-for");$.validator.addMethod("nonInitVal",function(value,element){return value!=placeholder&&""!=value}),searchForm.validate({rules:{Search:{nonInitVal:"Please enter a search term"}},messages:{Search:{nonInitVal:"Please enter a search term",minlength:'Search terms must be 2 characters in length; for routes try "line 1"'}}},"Please provide a term"),searchForm.submit(function(){if(search.data("searchData")){var data=search.data("searchData"),type=data.type,id=data.value;if(type.indexOf("-")>0&&(type=type.substr(0,type.indexOf("-"))),id&&("line"==type||"stop"==type)){var link="line"==type?lineLink:stopLink,url=link.replace("%s",id);return url=url.replace(/\/$/,"")+"/",mode.val()&&(url+=mode.val()),window.location=url,!1}}}),mode.change(function(){this.value&&($(this).removeClass("required"),search.removeAttr("disabled"))}).trigger("chosen:updated"),""==search.val()&&search.val(placeholder),Metlink.Autocomplete.setDataSource(function(request,response){var params={term:request.term,mode:mode.val(),"search-for":searchFor};stopLink&&stopLink.indexOf("diva")>=0&&(params.type="diva"),2==params.mode&&(params.grouped=1),request.term.length>=Metlink.Autocomplete.WORD_LENGTH?Metlink.Autocomplete.remoteDataSearch(params,response):response([])})}})}(jQuery),function($){function render(){var grouped={stops:[],timetables:[],journeys:[]};$.each(Metlink.MyWay.backend().getFavourites(),function(){grouped[this.type()+"s"].push(this)});for(var i in grouped)grouped[i].sort(function(a,b){return a.title>b.title});$.each(grouped,function(type){$("#myway-favourite-"+type).empty().append($("#myway-favourite-"+type+"-tmpl").tmpl(grouped))}),$(".myway-disruption").length&&renderDisruptions()}$(function(){$(".recently-visited").length>0&&(render(),$(".showOnClick a").click(function(){$(this).next().toggle()}).trigger("click"))});var renderDisruptions=function(){Metlink.Disruptions.loadDisruptions().done(function(){$(".myway-disruption").each(function(){var self=$(this),lines=self.parent().data("lines"),good=!0;lines&&$.each(lines,function(){var disruptions=Metlink.Disruptions.isDisrupted(null,null,this);disruptions&&(self.empty().addClass("disrupted alert").append($("<abbr></abbr>",{title:disruptions[0].Title,text:"Disrupted"})),good=!1)}),good&&self.addClass("good").text("Good")})})};$(".myway-remove-favourite").live("click",function(){var self=$(this).addClass("loading"),item=self.parent().parent(),fav=Metlink.MyWay.Favourites.factory(item.data("type"),null,item.data("params"));return confirm("Are you sure you want to remove this favourite?")?(Metlink.MyWay.backend().removeFavourite(fav).done(render).fail(function(msg){alert(msg.responseText||msg),self.removeClass("loading")}),!1):!1})}(jQuery);

}
/*
     FILE ARCHIVED ON 07:36:53 Sep 27, 2018 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 07:47:16 May 07, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.587
  exclusion.robots: 0.066
  exclusion.robots.policy: 0.056
  cdx.remote: 0.053
  esindex: 0.008
  LoadShardBlock: 53.696 (3)
  PetaboxLoader3.datanode: 177.67 (5)
  load_resource: 252.211 (2)
  PetaboxLoader3.resolve: 102.131 (2)
*/